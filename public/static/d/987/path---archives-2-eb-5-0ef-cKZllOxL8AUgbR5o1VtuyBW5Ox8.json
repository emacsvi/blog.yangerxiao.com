{"pageContext":{"group":[{"node":{"fields":{"slug":"/posts/php-timezone-setting"},"html":"<p><code class=\"language-text\">date(&quot;Y-m-d G:i T&quot;,time())</code> 取出来的时间和本地时间总是差8个小时，系统明明是中国标准时（GMT+8），最后终于找到了问题所在：</p>\n<p>原来从<code class=\"language-text\">php5.1.0</code>开始，<code class=\"language-text\">php.ini</code>里加入了<code class=\"language-text\">date.timezone</code>这个选项，默认情况下是关闭的，所以通过PHP获取的时间默认都是格林威治标准时间，和我们的时间（北京时间）差了正好8个小时，有以下两种方法可以恢复正常的时间：</p>\n<ul>\n<li>一劳永逸，直接修改<code class=\"language-text\">php.ini</code>：打开<code class=\"language-text\">php.ini</code>，查找<code class=\"language-text\">date.timezone</code>，去掉注释，<strong>=</strong>后面加上中国时区<code class=\"language-text\">Asia/Shanghai</code>(或者<code class=\"language-text\">PRC</code>)，重启http服务（nginx或者Apache）。</li>\n<li>如果不想修改<code class=\"language-text\">php.ini</code>，则在关于时间的初始化的语句的上面加上<code class=\"language-text\">date_default_timezone_set(&#39;PRC&#39;)</code>;</li>\n</ul>\n<p>参考：</p>\n<ul>\n<li><a href=\"http://php.net/manual/en/timezones.php\">PHP支持的时区列表</a></li>\n</ul>","frontmatter":{"title":"PHP时间总是差8小时问题","date":"2017-06-02T06:00:41.000Z","category":"技术","tags":["php","timezone","备忘"],"cover":null},"tableOfContents":"","excerpt":" 取出来的时间和本地时间总是差8个小时，系统明明是中国标准时（GMT+8），最后终于找到了问题所在： 原来从 开始， 里加入了 这个选项，默认情况下是关闭的，所以通过PHP获取的时间默认都是格林威治标准时间，和我们的时间（北京时间）差了正好…"}},{"node":{"fields":{"slug":"/posts/manage-money-matters"},"html":"<p>往财富蓄水池蓄水的方式有三种：用手，用脑，用钱。</p>\n<p>“挣”钱是在做加法，消费支出是做减法，“赚”钱则是做指数运算。</p>\n<p>储蓄，是钱生钱的第一步。</p>\n<p>如果你喜欢把“钱”紧紧抓在手里，财富反而会离你而去，就像手心捧起的水一样。</p>\n<p>货币并不等于全部的财富，富人的财富多以股权、债权，甚至房产等实物的形式存在。</p>\n<p>如果你的财富绝大部分以货币的形式存在，就可能会错过很多财富增值的机会。合理管理财富，第一步就是不能把“钱”（货币）看的太重。更何况货币还会贬值，还记得曾经的“万元户”吗。</p>\n<p>财富管理的最低要求就是跑赢通胀（注意不是跑赢CPI）：</p>\n<ul>\n<li>在满足日常开支及为突发事件储备的前提条件下，应当尽可能地持有可以带给你回报的资产，而不是持有货币（特别是现金）。</li>\n<li>你也可以将货币换成“东西”。这类“东西”必须容易保存（折旧年限长）和变现（可迅速达成交易且费率低），且该种“东西”的劳动生产率无法显著提高。这一领域比较典型的代表有：房产、贵金属、某些收藏及纪念品。</li>\n</ul>\n<p>时间是财富的载体，我们在日常生活中，对开销的理解，多以金钱来量化，很少有人会把时间也计算在内。不少人小心翼翼省下一笔笔物质财富，却浪费了大把时间，这些时间本可以丰富他们的大脑，提高劳动报酬率，创造更多财富。所以，尽量花时间去武装头脑，而不是为了节约开支而浪费大量时间。</p>\n<p>课本知识不是全部，如诚实守信等品格、人际交往能力、言辞谈吐技巧、组织管理协调，乃至风险意识、商业眼光等，这些都需要在社会大染缸里摸爬滚打。知识面的拓宽、价值观提升后，会潜移默化帮助我们抓住更多机会。</p>\n<p>要达到财务自由状态，财富必然有很大一部分以资产的形式存在。</p>\n<p>只有当财产性收入远大于生活开支，并且足以抵抗一定的事故性风险，才敢说是财务自由。</p>\n<p>消费型时间享受了就没有然后了，投资型时间可能在未来给予你汇报。</p>\n<p>资产负债表：</p>\n<ul>\n<li>资产：我们所拥有的物质财富，如金钱、房产、汽车、股票等</li>\n<li>负债：我们欠了别人的，需要到期偿还的，如房贷、信用卡欠款、亲朋好友借款等。</li>\n<li>股东权益：资产减去负债后的净额，即我们实际所拥有的财富。</li>\n</ul>\n<p>容易变现的资产称为流动资产，反之为非流动性资产；近期要偿还的负债称为流动负债，反之为非流动负债。</p>\n<p>只有短期用不到的资金，才能置换成股票等非流动性资产，否则就是“以短持长”，以短持长是资产配置时应当尽量避免的情况。</p>\n<p>表外资产：</p>\n<ul>\n<li>时间（生命）</li>\n<li>劳动能力</li>\n<li>亲朋好友的资助</li>\n</ul>\n<p>表外负债：</p>\n<ul>\n<li>疾病</li>\n<li>赡养老人、养育小孩</li>\n<li>人情，突发性不利事件：失火、被盗等</li>\n</ul>\n<p>收益与风险，只盯着收益叫贪婪，只盯着风险叫恐惧，两者都不可取。</p>\n<p>投资者能做的，是随着时间推移预估各种可能性，然后选择进入还是逃离这个机会（风险）。</p>\n<p>基本面：各种宏观、微观分析，偏向事物的本质。</p>\n<p>技术面：认为事物的本质都已经包含在价格波动中，并用历史价格波动去预测未来价格走势。</p>\n<p>在正确的方向上慢行：人生只有一次；重视时间的价值；提高劳动报酬率；收入减去开支等于节余（加减法）；节余的部分进行财富管理（指数运算）；各类资产的期限、风险、收益。注意保持收入大于支出，管理好节余部分的财富，让其保值增值，让钱生钱，财富蓄水池就是这么简单。</p>","frontmatter":{"title":"阅读笔记《理财不用懂太多》","date":"2017-06-01T03:12:08.000Z","category":"阅读笔记","tags":["理财","生活","成长","阅读"],"cover":null},"tableOfContents":"","excerpt":"…"}},{"node":{"fields":{"slug":"/posts/ssh-timeout-solution"},"html":"<p><img src=\"/images/ssh.png\" alt=\"ssh\"></p>\n<h1 id=\"问题\"><a href=\"#%E9%97%AE%E9%A2%98\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>问题</h1>\n<p>SSH登录远程服务器(Centos 7)，有时会遇到这样的问题：一段时间没有操作，会自动断开连接。</p>\n<h1 id=\"解决\"><a href=\"#%E8%A7%A3%E5%86%B3\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>解决</h1>\n<p>通过设置<code class=\"language-text\">sshd_config</code>的<code class=\"language-text\">ServerAliveInterval</code>和<code class=\"language-text\">ClientAliveInterval</code>，可以达到目的。默认情况下，这两个设置项没有或者值为0，也是导致我们连接长时间不响应就断开的原因。</p>\n<p>首先，确认自己有root权限，然后：</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\">\n      <pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># vim /etc/ssh/sshd_config</span></code></pre>\n      </div>\n<p>找到<code class=\"language-text\">ClientAliveInterval</code>，如果没有，就添加，将其做如下设置（单位：秒）</p>\n<div class=\"gatsby-highlight\" data-language=\"text\">\n      <pre class=\"language-text\"><code class=\"language-text\">ClientAliveInterval 60</code></pre>\n      </div>\n<p>重启sshd服务：</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\">\n      <pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> systemctl restart sshd.service</code></pre>\n      </div>\n<p>至此，每隔60秒，服务器会给客户端发送一个消息，确认客户端还活着。如果收不到响应，就会断开连接，所以需要注意电脑不要设置自动休眠时间，至少不要设置太短。</p>\n<h1 id=\"参考\"><a href=\"#%E5%8F%82%E8%80%83\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>参考</h1>\n<p><a href=\"https://www.ehowstuff.com/prevent-ssh-timing-out/\">How to Prevent SSH Timing out from Server and Client</a></p>","frontmatter":{"title":"SSH远程连接服务器超长待机设置","date":"2017-04-29T06:00:41.000Z","category":"技术","tags":["运维","linux","shell","备忘"],"cover":null},"tableOfContents":"<ul>\n<li><a href=\"/posts/ssh-timeout-solution/#%E9%97%AE%E9%A2%98\">问题</a></li>\n<li><a href=\"/posts/ssh-timeout-solution/#%E8%A7%A3%E5%86%B3\">解决</a></li>\n<li><a href=\"/posts/ssh-timeout-solution/#%E5%8F%82%E8%80%83\">参考</a></li>\n</ul>","excerpt":"问题 SSH登录远程服务器(Centos 7)，有时会遇到这样的问题：一段时间没有操作，会自动断开连接。 解决 通过设置 的 和 ，可以达到目的。默认情况下，这两个设置项没有或者值为0，也是导致我们连接长时间不响应就断开的原因。 首先，确认自己有root…"}},{"node":{"fields":{"slug":"/posts/how-to-grow-to-be-a-better-man"},"html":"<p>我们总是在惯性中生活，在教导下学习，在成规中思考，在劝解中决定，并在无助的结果中自责。我们着实需要一种智识和能力，去观察、反思自己被局限的生活，去发现和实践更多成长和成才的路径。可问题是，大多数时候，当我们对眼前的一切习以为常时，我们连这种“需要”都没有意识到。</p>\n<p>只有坚持做一个你所喜欢的自己，你才可能实现真正意义上的成功。</p>\n<p>实践、表达和思考一样，占据着同等重要的位置，而写一本书，就是能同时承载三者的理想行动。</p>\n<h1 id=\"时间之尺\"><a href=\"#%E6%97%B6%E9%97%B4%E4%B9%8B%E5%B0%BA\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>时间之尺</h1>\n<p>郑重是这样一种态度：不敷衍、不迟疑、不摇摆，认真地聚焦于当下的事情，自觉而专注地投入。</p>\n<p>斯坦福大学著名的心理学家菲利普·津巴多（Philip Zimbardo）提出用“时间视角”这一概念表示人们对过去、现在和未来的不同态度。他发现，根据不同的时间视角可以划分出五种人：</p>\n<ul>\n<li>第一种是积极过去视角，具有这种视角的人总以积极的心态往回看，他们是怀旧的，经常怀念过去美好的事情，珍视亲情和友情，对已经拥有的东西怀有感恩之心。但这样的人容易忽视当下的快乐。</li>\n<li>第二种是消极过去视角，具有这种视角的人总以消极的心态往回看，他们经常回忆人生中的负面经历，沉浸在以前的伤害中无法自拔，因而出现心理问题的风险比较大。</li>\n<li>第三种是享乐主义视角，具有此种视角的人总以享乐的心态看待当下，他们认为及时行乐是第一要务，回首过去和展望未来都无太大必要，尽情享受当下便好了。他们的幸福感比较高，但出现成瘾行为如吸烟、酗酒或暴饮暴食的风险比较大。</li>\n<li>第四种是以宿命的观点看待当下的人，即具有宿命论视角，他们对现时发生的事情感到无能为力，认为一切都是命中注定，自己只能顺从和忍受外界的安排。</li>\n<li>第五种是习惯往前看、为未来谋划的人，这种视角被称为未来视角，他们具有前瞻性，更关注有待完成的目标和任务。为了完成未来的目标，他们愿意舍弃当下的享乐，时间的利用更有效率，因而更容易取得比较高的成就。但是由于一直为未来担心，所以幸福感并不强。</li>\n</ul>\n<p>津巴多建议不要维持单一的时间视角。因为这五种时间视角里每一种都不是完美的，都有各自的缺点，所以最好采用混合和折中的方式：多采纳积极过去视角、享乐主义视角和未来视角，并且在三者中取得平衡，少采纳负面作用明显的消极过去视角和宿命论视角。并且，在采纳前三种视角时还要“随需而变”，即根据不同现实场景加以灵活选择。</p>\n<p>对五年后的自己提问，意味着你可以去思考有没有可能坚持做好一件有价值的事情，甚至把它做到极致。</p>\n<p>长半衰期事件指南</p>\n<ul>\n<li>积累可信的知识</li>\n<li>训练实践技能</li>\n<li>构建新的思维模式</li>\n<li>提升审美品味</li>\n<li>反思和总结个人经历</li>\n<li>保持和促进健康</li>\n<li>建立和维持相互信任的关系</li>\n<li>寻找和获得稀缺性资源</li>\n<li>探索、提出独创性的构思或者发明</li>\n<li>获得高峰体验</li>\n</ul>\n<p>并不意味着要完全杜绝短半衰期的事，毕竟人还是需要当下的快乐和即兴的满足，只不过，它不应是我们生活的重心。清醒地意识到我们到底在做什么、要追求什么，才能作出让自己未来不会后悔的选择。</p>\n<p>你主动过滤掉的信息越多，也就意味着你越有富余的时间、精力甚至脑力来寻找和领会那些真正有价值的信息。你不如想象，和那些历史上的杰出人物做朋友，就如同把他们加为微信好友，每天捧读他们的作品，就如同刷朋友圈，这时你或许会发现，这个朋友圈丝毫不比你现实好友的朋友圈无趣，甚至更加引人入胜。</p>\n<p>我们原本就是因为快而痛苦，可时间管理却教我们如何更快。</p>\n<p>美学家朱光潜先生曾经说过：“做学问，做事业，在人生中都只能算是第二桩事。人生第一桩事是生活。我所谓‘生活’是‘享受’，是‘领略’，是‘培养生机’。假若为学问为事业而忘却生活，那种学问和事业在人生中便失其真正意义与价值。”这番话，值得好好深思和回味。</p>\n<h1 id=\"寻找心中的巴拿马\"><a href=\"#%E5%AF%BB%E6%89%BE%E5%BF%83%E4%B8%AD%E7%9A%84%E5%B7%B4%E6%8B%BF%E9%A9%AC\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>寻找心中的“巴拿马”</h1>\n<p>当我们陷于某个人生困局时，困住我们的不仅有外界的客观现实，还有我们过去的经历、习惯和思维惯性。这些东西会在我们思考时自动植入“隐含假设”，从而限制了思考的角度和范围。其结果是，我们通常只是在两三个“可见选项”中去做决定，而意识不到更多的“可能选项”。</p>\n<p>管理学大师彼得·德鲁克认为，大多数的智力劳动者，对自己的工作都有一定的掌控权和自由度，工作并不完全是由组织分配和决定的，而是具有充分的弹性。当你认为你的工作枯燥无味时，你不妨考虑一下如何去“改造”你的工作，包括挑战你的时间分配，优化你的工具，改善你与同事间的关系，以及影响上级的想法和思路。</p>\n<p>在看似非此即彼的两个极端选择之间，你还可以有很多的中间选择，你可以大胆地重组你的时间，让理想与现实兼顾且不冲突；你可以寻找两个选择之间的连接点，把能力嫁接过去；你也可以对它们做出创造性的改造，让它们互相影响，使你的工作更像你的爱好，你的爱好更像你的事业。总之，永远不要放弃寻找“第3选择”，因为最好的选择，往往来自在更高目标指引下的我们的创造。</p>\n<p>在东方文化下，“身份”更多是作为社会和外部的期望加之于个人身上的，而不是个人自由探索的结果。于是它就成了我们头脑中的一个框框，限定、阻碍了我们的思考。我们可能更多地会想“我们应该做什么”，而不是“我们想要做什么”；更多地会想“我们只能做什么”，而不是“我们擅长做什么”；更多地会想“我现在是谁，已经是谁”，而不是“我未来是谁，我还能是谁”……于是虽然我们在做选择，但又好像我们只是在做一些注定要做的事罢了。</p>\n<p>有时候我们会选错，甚至为这个错误付出太多，但是没有关系，我们仍然可以重新作出选择，因为这才是人生的常态。</p>\n<h1 id=\"即刻行动\"><a href=\"#%E5%8D%B3%E5%88%BB%E8%A1%8C%E5%8A%A8\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>即刻行动</h1>\n<p>纵使一件事情真的很难，你就迈出第一步试试，有何不可？</p>\n<h2 id=\"最小化可行产品\"><a href=\"#%E6%9C%80%E5%B0%8F%E5%8C%96%E5%8F%AF%E8%A1%8C%E4%BA%A7%E5%93%81\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>最小化可行产品</h2>\n<blockquote>\n<p>在某家公司的实习经历不是产品，但基于实习经历写成的系统性总结报告可以算作产品；阅读一本书的经历不是产品，但是对这本书深入、透彻分析的文章可以算作产品；拥有绘画的技能不是产品，但是使用这项技能创造的绘画作品可以算作产品。</p>\n</blockquote>\n<blockquote>\n<p>可能有人会觉得，这些东西都太“小”、太简单了，不能算作产品。确实，它们并不是什么复杂的产品，可把它们当作个人的“最小化可行产品”是没有什么疑问的。这些小产品，可以作为你才华展示的载体，让你的才能搭载着这些载体，传播出去，供其他人欣赏、品味，并获得反馈，然后你可以继续做出更复杂、更优秀的产品。比如，从一篇短文到一篇长文，从一篇长文到一本书；从单幅的漫画到多格漫画，再从多格漫画到长篇漫画连载。如此一来，你的才能、声誉、影响力和成就感都会慢慢培育出来。</p>\n</blockquote>\n<p>只有你做出了实实在在的东西，你的思路才会更清晰，才能才得以切实地锻炼，视野才更加开阔。</p>\n<p>批评我的人，并不是在评价我，而只是在给我提供信息，因此没有理由去排斥这些批评。</p>\n<p>以精益创业的方式去走向人生的成功，要做到这三点：</p>\n<ol>\n<li>克服“过度准备”的惯性，向前一步，把未完成的事情完成；</li>\n<li>克服“自我防卫”的心态，乐于接受反面意见并加以慎重地审视；</li>\n<li>克服“沉没成本”的固执，有勇气否定并重新构造自己的产品。</li>\n</ol>\n<h2 id=\"像photoshop一样分解任务：从工作的核心区开始\"><a href=\"#%E5%83%8Fphotoshop%E4%B8%80%E6%A0%B7%E5%88%86%E8%A7%A3%E4%BB%BB%E5%8A%A1%EF%BC%9A%E4%BB%8E%E5%B7%A5%E4%BD%9C%E7%9A%84%E6%A0%B8%E5%BF%83%E5%8C%BA%E5%BC%80%E5%A7%8B\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>像Photoshop一样分解任务：从工作的核心区开始</h2>\n<p>核心思考区间：很多时候，你只是需要一个专注不受干扰的、能纯粹跳脱出来思考的、能达至“心流”状态的、能把最关键的“硬核”搞定的——半小时。</p>\n<p>而对一个创作者而言，小说写作的次序存在多种可能性。比如有些作家喜欢先把小说的结尾写好，有些作家会先把小说中最精彩的高潮部分写好。如果从图层的角度来看，一部小说通常有三个图层：叙述、描写和对话，其中叙述主要是负责情节的推进，描写主要用于氛围的营造，对话则用来展现人物性格和冲突。那么一个作家，完全有可能先把小说从头到尾的叙述部分写好，再营造气氛，再精心雕琢对话。</p>\n<p>“图层工作法”是完成一个复杂作品或者复杂项目的基础，甚至可能是最有效的战术，而对习惯于制作简单作品的我们来说，它也是帮助我们迈向更高行动能力的一架梯子。正如德国思想家本雅明所说：“写一篇好散文要经过三个台阶，一个是音乐的，这时它被构思；一个是建筑的，这时它被搭建起来；最后一个是纺织的，这时它被织成。”</p>\n<h1 id=\"怎样的学习，才能够直面现实\"><a href=\"#%E6%80%8E%E6%A0%B7%E7%9A%84%E5%AD%A6%E4%B9%A0%EF%BC%8C%E6%89%8D%E8%83%BD%E5%A4%9F%E7%9B%B4%E9%9D%A2%E7%8E%B0%E5%AE%9E\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>怎样的学习，才能够直面现实</h1>\n<p>一个好的问题，让我们成为一个“猎手”，知识是我们主动去侦察、寻觅、狩猎的猎物，而不是我们战战兢兢供奉着的或者亦步亦趋跟随着的对象。在问题引导下的学习最大的特点是，它所希求的知识是没有边界的，为了找到问题的解，我们可能会寻访任何可能的线索，查阅任何有益的资料，而不受既定的观点的束缚。</p>\n<p>提问是将我们引向深度学习的起点。一位优秀的学习者，必定是一个优秀的提问者，他从阅读、观察和思考的过程中产生问题，先解答表层的、容易的那部分，留下深度的、探索式的问题给自己，并在由此问题招致的持续困扰和折磨中开启卓越的心智旅程。</p>\n<p>伟大的艺术作品，常常有很深厚的内涵和很精巧细微的技法，不论你在哪个或深或浅的层次上解读它，它都能呈现出美妙的意味，但如果你不做一番细心的努力和挖掘，就只能尝到最表层的那一小部分味道。</p>\n<p>你掌握了多少知识，并不取决于你记忆了多少知识以及知识的关联，而是取决于你能调用多少知识以及知识关联。</p>\n<p>获得技能也就意味着你拥有了改变世界的能力，哪怕一开始这种能力非常弱小。不管我们想学或者正在学的是哪一个领域的知识，我们都可以想一想，如何不把它当成是一种静态的、安安静静地躺在书本里的东西，而是把它当成一种动态的、可运用的、可以用来完成某件事情的技能。</p>\n<p>教育只有一个主题，那就是五彩缤纷的生活。</p>\n<p>关于科技产品创业，《黑客与画家》中的阐述已然非常精彩。格雷厄姆认为，创业的价值在于可测量性和可放大性两个方面：</p>\n<ol>\n<li>可测量性。与在公司打工相比，自己创业产生的价值更大，是因为在公司个人工作产生的价值被大幅度地压缩了，因为在大公司里，个人的绩效无法被真实有效地评估，公司更倾向于以一种平均化的方式给员工提供报酬。</li>\n<li>可放大性。个人在大公司里的贡献不具有可放大性，因为通常只能以“计时”或“计件”的方式来获取报酬。技术创业之所以能产生价值，是因为它“发现了一种做事的新方式，它的经济价值就取决于有多少人使用这种新方式”。如果你的生意是做鸡蛋饼，那么做一个只能赚一个的钱，但是如果你解决的是一个热门的技术难题，让很多人受益，就形成了放大性。</li>\n</ol>\n<h1 id=\"向未知的无限逼近\"><a href=\"#%E5%90%91%E6%9C%AA%E7%9F%A5%E7%9A%84%E6%97%A0%E9%99%90%E9%80%BC%E8%BF%91\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>向未知的无限逼近</h1>\n<p>简化是清晰思考的前提。把原本繁复的内容梳理、整合、精简完成后，我们的头脑才能腾出空间，处理其他的信息和进行更复杂更精微的思考。</p>\n<p>过滤没有价值的信息：</p>\n<ul>\n<li>精选可信赖的信息源</li>\n<li>不追逐当下流行或过热的信息\n网络上的热门话题多半是人为制造的营销性话题，通过迎合人们的猎奇心态来博取眼球。这些内容通常没有关注的必要。</li>\n<li>重事实信息，轻观点和评论</li>\n<li>定期闭关，屏蔽外界纷扰</li>\n</ul>\n<p>当我们习惯了碎片式地吸收信息，碎片式地表达信息，碎片式地做各种浅尝辄止的事情，那么我们的头脑、我们的生活就必然是烦琐、冗余和无所适从的。</p>\n<p>在复杂问题的解决或者复杂产品的设计过程中，人们很难一开始就找到一条正确的航道，而是必须在反复的尝试、摸索和试错中，通过不断提出各种假设并加以测试，才能逐渐让问题清晰起来。</p>\n<p>当我们思考一个现实场景中的问题时，如果很快就找到了答案，那么可能意味着这个答案并不周密，只顾及了问题中的某个侧面或者局部。</p>\n<p>人在思考时可能会有很多毛病，会被生动的个案吸引，会固执地捍卫自己的观点，还会对自己的未知领域毫无洞察。</p>\n<h1 id=\"努力，是一种最需要学习的才能\"><a href=\"#%E5%8A%AA%E5%8A%9B%EF%BC%8C%E6%98%AF%E4%B8%80%E7%A7%8D%E6%9C%80%E9%9C%80%E8%A6%81%E5%AD%A6%E4%B9%A0%E7%9A%84%E6%89%8D%E8%83%BD\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>努力，是一种最需要学习的才能</h1>\n<p>努力不仅是一种信念，不只是意志力的较量，它更是一种具有策略性的活动。这种策略性体现在对个人资源的调配、行动方向的选择、执行进度的把控和调适多方面上，而好在策略是可以不断学习和优化的。</p>\n<p>一部智能手机在手，我们的时间就被分割得七零八落；每天各式各样的信息如潮水般涌来，让我们无所适从，不知如何选择；我们的耐心越来越少，我们总是被标题吸引，打开正文后匆匆看两眼又马上关掉；每天翻新的网络热点，无外乎性、谎言、奇闻和窥探，到第二天就被我们忘得一干二净；我们幻想在一篇网文中寻找“干货”，希望发财致富、人生辉煌的不传之秘能被一二三四五和盘托出，没想到只是又一次被骗了点击；我们总是在找更多的资源，搜索、下载、囤积，然后闲置，错把硬盘当成自己的大脑……</p>\n<p>在这个互联网时代，信息是爆炸的，知识是过载的，观点是鼓噪的，热点是速朽的。而反过来，专注在一件事上，精益求精、持之以恒的态度和行动，则是最稀少和最珍贵的。</p>\n<p>人是需要一些挫折、失败或者高难度的挑战来刺激的。如果总是一帆风顺，就会一直待在自己的“舒适区”里不肯出来，潜能就无法被充分地激发。从这个角度来说，挑战和才能是相伴相生的，没有足够的挑战就催生不出杰出的才能，而越是具有杰出才能的人也越有可能接近高难度的挑战。</p>\n<p>当你以一种简单容易的方式去学习时（比如学完一个新东西马上测试而不是延迟一段时间再测试），你的记忆提取过程会很流畅，知识提取强度也比较低，这时你的头脑会欺骗你，让你误以为你已经很好地掌握了这些知识，高估学习的效果。相反，在学习以及练习时，如果能刻意增加难度，给自己增加一点小障碍，比如在学完知识后延迟一段时间再做练习，或者学习不同科目的知识后进行交叉练习，又或者变换不同的题型和考查点来做练习，那么知识提取强度就会增加，学习效果就会更好。不夸张地说，练大脑就像练肌肉，得科学“加量”才行。</p>\n<p>如果你做一件事的时候，先不去问有没有兴趣，而是先做起来，而且很投入、很专注地做，并懂得如何把一件单向的事变得双向，把一件被动的事变得主动，那么你就可能越做越有味道，一点也不痛苦地坚持做下去。不需要意志力拖着你走，你自己就勇往直前，奔得很远了。</p>\n<h1 id=\"每一个成功者都是唯一的\"><a href=\"#%E6%AF%8F%E4%B8%80%E4%B8%AA%E6%88%90%E5%8A%9F%E8%80%85%E9%83%BD%E6%98%AF%E5%94%AF%E4%B8%80%E7%9A%84\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>每一个成功者都是唯一的</h1>\n<p>一个自我教育者应该学会定期审视自己的所知和未知，能评估自己所学知识的价值，特别是在实践领域中的价值。当然我并不是说，没有应用价值的知识就不要学，很多“无用之学”例如哲学、艺术可以帮助我们成为更好的人。但是我们也要尽力避免这样一种尴尬的情况：自己所有的知识都没有实用价值。这样我们就无法在社会上生存了。要防止这种情况，我们必须对象牙塔外的世界保持敏感，能观察和发现在市场上有较大应用价值和发展潜力的知识。在《程序员修炼之道——从小工到专家》一书中，作者把一个人所拥有的知识和金融资产相类比，认为每个人都应该管理好自己的“知识资产”（knowledge portfolios），并给出了几条具体的建议，其中有一条就是：在新思想或新技术刚刚开始兴起无人问津之时就投入进去，成为某一个新知识领域的先驱，实现知识能力的“低买高卖”。</p>\n<p><strong>在现实世界中思考理论问题，在理论世界中思考现实问题。</strong></p>\n<p>在互联网时代，我们的思想和行动太容易被一波波热潮推搡着前进了，当所有人都在热议一个话题时，你很难有不参与其中的勇气，当所有人都在激动地说“互联网+”创业时，你很难不蠢蠢欲动。在这样的热潮的推动下，我们渐渐形成了用单一的标准去提出问题，用单一的模式去分析问题，用单一的路径去解决问题的行为习惯，甚而至于我们连思考的权利都放弃，只跟随着“成功人士”的振臂一呼，就不假思索地采取行动了。</p>\n<p>本来每一个人都是独特的，你有自己的志向、经历、喜好、品味、才能和运气，你完全可以把写出一本精彩绝伦的小说作为毕生的目标，而不是那个折磨人的早日实现“财务自由”的目标；你也可以选择一份轻松愉悦的工作，而不是成为一个每天承受巨大压力、被时间追着跑的创业者。在生活方式上，你可以选择结婚；你也可以选择独身主义，一辈子不结婚；或者丁克，结婚但不生孩子，虽然也许我们作出这些选择会承受巨大的社会压力，但是我们有根据自己的内心需要独立选择自己人生、不受外部影响的权利。</p>\n<p>在战略管理领域里，很多学者认为最好的竞争策略并不是教你如何跟其他人竞争，而是开拓出一条独一无二、罕有竞争者的道路。战略管理大师迈克尔·波特说：“战略的意义就在于让你远离竞争，战略不是要你做得更好，而是要你做得不同。”对个人而言同样如此，一个显而易见的事实是：如果你与大多数人相比，没有什么特殊之处，那么为什么社会要给你超出平均水准的回报？</p>\n<p>让自己变得独特是通向成功的必要条件。具有心智独特性的人所具有的优势：</p>\n<ol>\n<li>在主流观点之外洞察出别人未曾发现的机会；</li>\n<li>形成个人核心竞争力，避免低层次的同质化竞争，使自己不可替代；</li>\n<li>拒绝他人和大众给自己贴上的标签，以更开放和自由的心态发展自己；</li>\n<li>因为不必迎合社会主流而节约了大量时间精力，可以专注于做好自己的事情；</li>\n<li>为大众带来新鲜的见解和启发，形成对公众的影响力；</li>\n<li>具有更高的可辨识性，更易于形成个人品牌；</li>\n<li>吸引到其他独特而优秀的人，与他们成为朋友或者合作伙伴。</li>\n</ol>\n<p>“财富”和“酷”是两个独立的价值系统，有钱的人可能酷，也可能不酷，酷的人可能富有，也可能贫穷，但绝不存在“有了钱就可以变酷”这样的事情。正如一个人不会因为有了钱就自然具备了对艺术作品的审美能力，一个人也不会因为有了钱就自然具备了酷的能力。</p>\n<p>日本哲学家高桥哲哉说“哲学式的思考就是怀疑理所当然的事物”，类似地，选择做酷的事就是怀疑理所当然的生活。读一本时下流行的小说，并不是一件酷事，但如果你能把这部小说的寓意做出一番别具一格的解读并写成文章，就成了一件酷事；做一顿饭，并不是一件酷事，但是如果你能创造性地把中西餐的做法融汇在一起，发明几道新式菜肴，就成了一件酷事；给学生上课，并不是一件酷事，但是如果你不仅能把知识生动活泼地展现出来，还能引导学生主动探索，激发起他们对这门学科的兴趣，就成了一件酷事；做一个卡车司机并不是一件酷事，但是有一位名叫孔龙震的卡车司机，却酷得不行，他以一种狂热的态度来作画，把自己独特的职业感悟和对美的理解融进了他的作品，形成了自己的风格，其作品也具有一种独特的艺术魅力……</p>\n<p>“酷”的反面不是“不酷”，不酷只是生活的常态。“酷”的反面是“无味”，“无味”就是重复无价值或价值被掏空的事物，如现在在晚会上表演《小苹果》 就是典型的“无味”。</p>\n<p>当我们避开了追求社会认同的陷阱，也意识到去做酷事的价值以后，我们可能便走上了因独特而成功的道路。在这条道路上，下面七个方法能够助我们一臂之力：</p>\n<ol>\n<li>抗拒自己的欲望，或者延迟满足欲望；</li>\n<li>质疑貌似最可信的言论，不盲从任何人；</li>\n<li>屏蔽流行信息，或者只在固定的时段接收流行信息；</li>\n<li>思考最不可能的事，为其发展出可能性；</li>\n<li>保留和发展自己的“怪癖”，并将其发展成自己的竞争力；</li>\n<li>为小事物狂热，并在小事物中发现大世界；</li>\n<li>开展思想试验和行动试验，让思想和行动相互激发。</li>\n</ol>","frontmatter":{"title":"阅读笔记《精进：如何成为一个很厉害的人》","date":"2017-04-24T09:31:37.000Z","category":"阅读笔记","tags":["自我管理","成长","知乎","阅读"],"cover":null},"tableOfContents":"<ul>\n<li><a href=\"/posts/how-to-grow-to-be-a-better-man/#%E6%97%B6%E9%97%B4%E4%B9%8B%E5%B0%BA\">时间之尺</a></li>\n<li><a href=\"/posts/how-to-grow-to-be-a-better-man/#%E5%AF%BB%E6%89%BE%E5%BF%83%E4%B8%AD%E7%9A%84%E5%B7%B4%E6%8B%BF%E9%A9%AC\">寻找心中的“巴拿马”</a></li>\n<li>\n<p><a href=\"/posts/how-to-grow-to-be-a-better-man/#%E5%8D%B3%E5%88%BB%E8%A1%8C%E5%8A%A8\">即刻行动</a></p>\n<ul>\n<li><a href=\"/posts/how-to-grow-to-be-a-better-man/#%E6%9C%80%E5%B0%8F%E5%8C%96%E5%8F%AF%E8%A1%8C%E4%BA%A7%E5%93%81\">最小化可行产品</a></li>\n<li><a href=\"/posts/how-to-grow-to-be-a-better-man/#%E5%83%8Fphotoshop%E4%B8%80%E6%A0%B7%E5%88%86%E8%A7%A3%E4%BB%BB%E5%8A%A1%EF%BC%9A%E4%BB%8E%E5%B7%A5%E4%BD%9C%E7%9A%84%E6%A0%B8%E5%BF%83%E5%8C%BA%E5%BC%80%E5%A7%8B\">像Photoshop一样分解任务：从工作的核心区开始</a></li>\n</ul>\n</li>\n<li><a href=\"/posts/how-to-grow-to-be-a-better-man/#%E6%80%8E%E6%A0%B7%E7%9A%84%E5%AD%A6%E4%B9%A0%EF%BC%8C%E6%89%8D%E8%83%BD%E5%A4%9F%E7%9B%B4%E9%9D%A2%E7%8E%B0%E5%AE%9E\">怎样的学习，才能够直面现实</a></li>\n<li><a href=\"/posts/how-to-grow-to-be-a-better-man/#%E5%90%91%E6%9C%AA%E7%9F%A5%E7%9A%84%E6%97%A0%E9%99%90%E9%80%BC%E8%BF%91\">向未知的无限逼近</a></li>\n<li><a href=\"/posts/how-to-grow-to-be-a-better-man/#%E5%8A%AA%E5%8A%9B%EF%BC%8C%E6%98%AF%E4%B8%80%E7%A7%8D%E6%9C%80%E9%9C%80%E8%A6%81%E5%AD%A6%E4%B9%A0%E7%9A%84%E6%89%8D%E8%83%BD\">努力，是一种最需要学习的才能</a></li>\n<li><a href=\"/posts/how-to-grow-to-be-a-better-man/#%E6%AF%8F%E4%B8%80%E4%B8%AA%E6%88%90%E5%8A%9F%E8%80%85%E9%83%BD%E6%98%AF%E5%94%AF%E4%B8%80%E7%9A%84\">每一个成功者都是唯一的</a></li>\n</ul>","excerpt":"…"}},{"node":{"fields":{"slug":"/posts/new-web-features-in-safari-10-1"},"html":"<p><img src=\"https://zerosoul.github.io/2017/03/31/new-web-features-in-safari-10-1/qiaobusi.jpg\" alt=\"乔布斯与HTML5\"></p>\n<p>伴随着 iOS 10.3 和 macOS Sierra 10.12.4 的更新，一个新版本的Safari也随之而来，其中有许多值得一提的web新特性让前端工程师激动不已，恩，值得唠唠。</p>\n<p>这次新版本的发布不仅让web更为强大，同时也简化了当前代码的维护，使得web开发更得心应手。前端工程师利用这些改进能够给用户带来更好的体验，想想都有些小激动呢。</p>\n<p>好了，废话不多说，下面看看都有哪些新特性：</p>\n<h1 id=\"fetch\"><a href=\"#fetch\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Fetch</h1>\n<p>Fetch是<code class=\"language-text\">XMLHttpRequest</code>的改进版本。它能够以更简洁的方式异步获取资源，不仅如此，它还利用ECMAScript 2015(ES6)中的<a href=\"http://www.ecma-international.org/ecma-262/6.0/#sec-promise-objects\">Promises</a>,简化和链式响应操作。相对于<code class=\"language-text\">XMLHttpRequest</code>，Fetch API更简洁，更具有可读性，从而也就更易维护。  </p>\n<div class=\"gatsby-highlight\" data-language=\"js\">\n      <pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">let</span> jsonURLEndpoint <span class=\"token operator\">=</span> <span class=\"token string\">\"https://svn.webkit.org/repository/webkit/trunk/Source/WebCore/features.json\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span>jsonURLEndpoint<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n\n    method<span class=\"token punctuation\">:</span> <span class=\"token string\">\"get\"</span>\n\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n    response<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span>json<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>json<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">catch</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n      </div>\n<p>想了解更多请参考：<a href=\"https://fetch.spec.whatwg.org/\">Fetch标准</a></p>\n<h1 id=\"css栅格css-grid-layout\"><a href=\"#css%E6%A0%85%E6%A0%BCcss-grid-layout\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CSS栅格(CSS Grid Layout)</h1>\n<p>CSS栅格基于容器的行与列，给前端工程师带来一种强大的新布局方式。通过CSS提供的这种可控的页面布局工具，可以针对不同视口做出复杂的平面排版设计。以前利用CSS中的奇淫技巧才能实现的打印样式，像浮动和Flexbox，现在可以通过CSS栅格轻松实现。</p>\n<p>想了解更多请参考：<a href=\"https://webkit.org/blog/7434/css-grid-layout-a-new-layout-module-for-the-web/\">CSS栅格系统: 一种新的布局方式</a></p>\n<h1 id=\"ecmascript-2016--ecmascript-2017\"><a href=\"#ecmascript-2016--ecmascript-2017\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ECMAScript 2016 &#x26; ECMAScript 2017</h1>\n<p>ECMAScript 2016 和 ECMAScript 2017是Javascript的最新语言标准，Safari 10.1新增了一些支持。当然，对ECMAScript 2016只是做了些微小的工作，毕竟2016版的标准由来已久，但2017版的标准却带来了不小的改进。</p>\n<p><a href=\"https://www.ecma-international.org/ecma-262/7.0/\">ECMAScript 2016</a>带来的改进包括：</p>\n<ul>\n<li>求幂运算符（<code class=\"language-text\">x ** y</code>可以替代<code class=\"language-text\">Math.pow(x,y)</code>，更简洁了！）</li>\n<li><code class=\"language-text\">Array.prototype.includes</code>（与<code class=\"language-text\">Array.prototype.indexOf</code>类似，只不过能对<code class=\"language-text\">NaN</code>做出识别）</li>\n</ul>\n<p><a href=\"https://tc39.github.io/ecma262/\">ECMAScript 2017</a>带来了:</p>\n<ul>\n<li><code class=\"language-text\">async</code>和<code class=\"language-text\">await</code>语法，</li>\n<li>共享内存对象，包括原子类型（Atomics）和（缓冲数组）Shared Array Buffers</li>\n<li><code class=\"language-text\">String.prototype.padStart</code>,<code class=\"language-text\">String.prototype.padEnd</code>,<code class=\"language-text\">String.prototype.values</code>和<code class=\"language-text\">String.prototype.entries</code></li>\n<li>允许在函数参数列表和调用中使用逗号</li>\n</ul>\n<h1 id=\"indexdb-20\"><a href=\"#indexdb-20\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>IndexDB 2.0</h1>\n<p>新版本的IndexDB有了更大的提升。它更快，与标准更兼容，并且支持IndexDB 2.0的新特性。IndexedDB 2.0加入了对二进制数据的支持，比如索引键，这样就不用再将其序列化为字符串或者对象数组。不仅如此，还有对象存储和索引重命名，<code class=\"language-text\">IDBObjectStore</code>的<code class=\"language-text\">getKey()</code>和<code class=\"language-text\">IDBIndex</code>的<code class=\"language-text\">getPrimaryKey()</code>。</p>\n<p>想了解更多请参考文档：<a href=\"https://www.w3.org/TR/IndexedDB-2/\">Indexed Database API 2.0</a></p>\n<h1 id=\"自定义元素custom-elements\"><a href=\"#%E8%87%AA%E5%AE%9A%E4%B9%89%E5%85%83%E7%B4%A0custom-elements\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>自定义元素(Custom Elements)</h1>\n<p>前端工程师不用再依赖Javascript框架来创建可复用组件啦，自定义元素可以轻松做到。和那些内置元素一样，自定义元素也可以通过特性（attributes）设置和获取值，并且还可以通过回调函数响应用户的交互。</p>\n<p>了解更多请参考：<a href=\"https://webkit.org/blog/7027/introducing-custom-elements/\">自定义元素简介</a></p>\n<h1 id=\"游戏手柄（gamepad）\"><a href=\"#%E6%B8%B8%E6%88%8F%E6%89%8B%E6%9F%84%EF%BC%88gamepad%EF%BC%89\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>游戏手柄（Gamepad）</h1>\n<p>Gamepad API 让Web App使用游戏手柄成为可能。在macOS中任何无需通过额外驱动就可以使用的游戏手柄，Web App都可以完美兼容，当然，iOS中的MFi游戏手柄也同样支持。</p>\n<p>了解更多请参考：<a href=\"https://www.w3.org/TR/gamepad/\">Gamepad规范</a></p>\n<h1 id=\"指针锁\"><a href=\"#%E6%8C%87%E9%92%88%E9%94%81\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>指针锁</h1>\n<p>macOS中的Safari通过在元素中使用指针锁，可以让鼠标指针隐藏，同时还可以获取鼠标移动的数据。这个在开发Web游戏中特别有用。指针锁还扩展了<code class=\"language-text\">MouseEvents</code>接口，新增了<code class=\"language-text\">movementX</code>和<code class=\"language-text\">movementY</code>两个属性，即使鼠标移出了可视区域，依然能获取流信息。鼠标锁于某个元素时，Safari还会显示提示栏通知用户鼠标指针已隐藏。第一次按<code class=\"language-text\">ESC</code>键，会关闭提示栏，再次按<code class=\"language-text\">ESC</code>，将会释放指针锁。</p>\n<p>更多信息请移步：<a href=\"https://www.w3.org/TR/pointerlock/\">Pointer Lock 规范</a></p>\n<h1 id=\"全屏下的键盘输入\"><a href=\"#%E5%85%A8%E5%B1%8F%E4%B8%8B%E7%9A%84%E9%94%AE%E7%9B%98%E8%BE%93%E5%85%A5\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>全屏下的键盘输入</h1>\n<p>WebKit通常会限制在全屏模式下的键盘输入，随着macOS Safari 10.1的更新，这一限制已去掉。</p>\n<h1 id=\"交互式的表单验证\"><a href=\"#%E4%BA%A4%E4%BA%92%E5%BC%8F%E7%9A%84%E8%A1%A8%E5%8D%95%E9%AA%8C%E8%AF%81\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>交互式的表单验证</h1>\n<p>在旧浏览器时代，你知道我指的是哪一款o(╯□╰)o，表单验证一直是件头痛的事情，后来HTML5引入了一些表单元素的特性，解决了一些常见的验证需求，比如必填，约束数据类型等。Safari 10.1更进一步，引入了<code class=\"language-text\">checkValidity()</code>和<code class=\"language-text\">reportValidity()</code>两个扩展接口，让提示更标准化，大大减少了Javascript代码。</p>\n<p>了解更多：<a href=\"https://webkit.org/blog/7099/html-interactive-form-validation/\">HTML交互式表单验证</a></p>\n<h1 id=\"输入事件\"><a href=\"#%E8%BE%93%E5%85%A5%E4%BA%8B%E4%BB%B6\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>输入事件</h1>\n<p>输入事件简化了富文本输入的实现。新增的<code class=\"language-text\">beforeinput</code>监听并截获默认的输入行为，并通过新特性强化了该事件。</p>\n<p>了解更多：<a href=\"https://webkit.org/blog/7358/enhanced-editing-with-input-events/\">使用输入事件增强编辑体验</a></p>\n<h1 id=\"html5的下载特性\"><a href=\"#html5%E7%9A%84%E4%B8%8B%E8%BD%BD%E7%89%B9%E6%80%A7\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>HTML5的下载特性</h1>\n<p><code class=\"language-text\">a</code>标签中的<code class=\"language-text\">download</code>特性标识了是个可下载的链接，用户点击后往往会直接下载资源而非跳转新页面。不仅如此，前端工程师也可以完全使用Javascript来创建blob数据当做文件资源来下载。如果<code class=\"language-text\">download</code>指定了值，那么就相当于重命名了下载文件的名字。</p>\n<div class=\"gatsby-highlight\" data-language=\"html\">\n      <pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>https://webkit.org/favicon.ico<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">download</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>webkit-favicon.ico<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Download Favicon<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span></code></pre>\n      </div>\n<p>了解更多：<a href=\"https://html.spec.whatwg.org/multipage/semantics.html#downloading-resources\">HTML5中下载资源</a></p>\n<h1 id=\"html媒体捕捉\"><a href=\"#html%E5%AA%92%E4%BD%93%E6%8D%95%E6%8D%89\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>HTML媒体捕捉</h1>\n<p>在新版的Safari中，HTML媒体捕捉扩展了其捕捉类型，可以使用设备上的相机和麦克来获取用户输入。</p>\n<div class=\"gatsby-highlight\" data-language=\"html\">\n      <pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>imageCapture<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>file<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">accept</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>image/*<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">capture</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>videoCapture<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>file<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">accept</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>video/*<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">capture</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>audioCapture<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>file<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">accept</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>audio/*<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">capture</span><span class=\"token punctuation\">></span></span>`</code></pre>\n      </div>\n<p>更多细节请移步：<a href=\"https://www.w3.org/TR/html-media-capture/\">HTML媒体捕捉</a></p>\n<h1 id=\"改进了code-classlanguage-textfixedcode和code-classlanguage-textstickycode元素的定位\"><a href=\"#%E6%94%B9%E8%BF%9B%E4%BA%86code-classlanguage-textfixedcode%E5%92%8Ccode-classlanguage-textstickycode%E5%85%83%E7%B4%A0%E7%9A%84%E5%AE%9A%E4%BD%8D\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>改进了<code class=\"language-text\">fixed</code>和<code class=\"language-text\">sticky</code>元素的定位</h1>\n<p>当捏合放大（pinch-to-zoom）时，固定和粘连元素的定位表现有了提升，这得归功于<strong>视觉窗口</strong>(visual viewports)。有了视觉窗口，输入元素获取焦点时不再会禁用固定和粘连元素的定位了。</p>\n<h1 id=\"改进的web调试\"><a href=\"#%E6%94%B9%E8%BF%9B%E7%9A%84web%E8%B0%83%E8%AF%95\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>改进的Web调试</h1>\n<p>WebKit新增了针对Web Worker的调试支持，同时对正在调试和即将执行的语句高亮，这样，就能清楚看出哪条代码即将执行，在一些控制流程非常复杂或者多条语句写在了一行中，这种改进的体验非常棒。</p>\n<p>更详细的介绍请移步：<a href=\"https://webkit.org/blog/7219/javascript-debugging-improvements/\">Javascript调试改进</a></p>\n<h1 id=\"css全范围色彩（wide-gamut-colors）\"><a href=\"#css%E5%85%A8%E8%8C%83%E5%9B%B4%E8%89%B2%E5%BD%A9%EF%BC%88wide-gamut-colors%EF%BC%89\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CSS全范围色彩（Wide-Gamut Colors）</h1>\n<p>现在的设备能够支持色域更广的颜色。随着新版本Safari的发行，前端工程师能够扩展出更多的色彩想象力，包括Display P3色彩域。通过<code class=\"language-text\">color-gamut</code>媒体查询可以测试出显示器是否支持该特性，然后用CSS新增的<code class=\"language-text\">color()</code>函数，定义出新的颜色。</p>\n<div class=\"gatsby-highlight\" data-language=\"css\">\n      <pre class=\"language-css\"><code class=\"language-css\"><span class=\"token atrule\"><span class=\"token rule\">@media</span> <span class=\"token punctuation\">(</span><span class=\"token property\">color-gamut</span><span class=\"token punctuation\">:</span>p3<span class=\"token punctuation\">)</span></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token selector\">.brightred</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">color</span><span class=\"token punctuation\">:</span> <span class=\"token function\">color</span><span class=\"token punctuation\">(</span>display-p3 1.0 0 0<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre>\n      </div>\n<p>更多请访问：<a href=\"https://drafts.csswg.org/css-color/\">CSS颜色模块标准</a></p>\n<h1 id=\"后记\"><a href=\"#%E5%90%8E%E8%AE%B0\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>后记</h1>\n<p>这篇文章翻译自<a href=\"https://webkit.org/blog/7477/new-web-features-in-safari-10-1/\">New Web Features in Safari 10.1</a>，内容略有删减，有些特性我也没搞懂，比如<code class=\"language-text\">color-gamut</code>，所以可能会有词不达意的地方，望见谅。</p>","frontmatter":{"title":"你可能不知道的Safari 10.1(iOS 10.3)Web开发新特性","date":"2017-03-31T09:31:37.000Z","category":"它山之石","tags":["前端","翻译","html5"],"cover":"https://zerosoul.github.io/2017/03/31/new-web-features-in-safari-10-1/qiaobusi.jpg"},"tableOfContents":"<ul>\n<li><a href=\"/posts/new-web-features-in-safari-10-1/#fetch\">Fetch</a></li>\n<li><a href=\"/posts/new-web-features-in-safari-10-1/#css%E6%A0%85%E6%A0%BCcss-grid-layout\">CSS栅格(CSS Grid Layout)</a></li>\n<li><a href=\"/posts/new-web-features-in-safari-10-1/#ecmascript-2016--ecmascript-2017\">ECMAScript 2016 &#x26; ECMAScript 2017</a></li>\n<li><a href=\"/posts/new-web-features-in-safari-10-1/#indexdb-20\">IndexDB 2.0</a></li>\n<li><a href=\"/posts/new-web-features-in-safari-10-1/#%E8%87%AA%E5%AE%9A%E4%B9%89%E5%85%83%E7%B4%A0custom-elements\">自定义元素(Custom Elements)</a></li>\n<li><a href=\"/posts/new-web-features-in-safari-10-1/#%E6%B8%B8%E6%88%8F%E6%89%8B%E6%9F%84%EF%BC%88gamepad%EF%BC%89\">游戏手柄（Gamepad）</a></li>\n<li><a href=\"/posts/new-web-features-in-safari-10-1/#%E6%8C%87%E9%92%88%E9%94%81\">指针锁</a></li>\n<li><a href=\"/posts/new-web-features-in-safari-10-1/#%E5%85%A8%E5%B1%8F%E4%B8%8B%E7%9A%84%E9%94%AE%E7%9B%98%E8%BE%93%E5%85%A5\">全屏下的键盘输入</a></li>\n<li><a href=\"/posts/new-web-features-in-safari-10-1/#%E4%BA%A4%E4%BA%92%E5%BC%8F%E7%9A%84%E8%A1%A8%E5%8D%95%E9%AA%8C%E8%AF%81\">交互式的表单验证</a></li>\n<li><a href=\"/posts/new-web-features-in-safari-10-1/#%E8%BE%93%E5%85%A5%E4%BA%8B%E4%BB%B6\">输入事件</a></li>\n<li><a href=\"/posts/new-web-features-in-safari-10-1/#html5%E7%9A%84%E4%B8%8B%E8%BD%BD%E7%89%B9%E6%80%A7\">HTML5的下载特性</a></li>\n<li><a href=\"/posts/new-web-features-in-safari-10-1/#html%E5%AA%92%E4%BD%93%E6%8D%95%E6%8D%89\">HTML媒体捕捉</a></li>\n<li><a href=\"/posts/new-web-features-in-safari-10-1/#%E6%94%B9%E8%BF%9B%E4%BA%86code-classlanguage-textfixedcode%E5%92%8Ccode-classlanguage-textstickycode%E5%85%83%E7%B4%A0%E7%9A%84%E5%AE%9A%E4%BD%8D\">改进了&#x3C;code class=\"language-text\">fixed&#x3C;/code>和&#x3C;code class=\"language-text\">sticky&#x3C;/code>元素的定位</a></li>\n<li><a href=\"/posts/new-web-features-in-safari-10-1/#%E6%94%B9%E8%BF%9B%E7%9A%84web%E8%B0%83%E8%AF%95\">改进的Web调试</a></li>\n<li><a href=\"/posts/new-web-features-in-safari-10-1/#css%E5%85%A8%E8%8C%83%E5%9B%B4%E8%89%B2%E5%BD%A9%EF%BC%88wide-gamut-colors%EF%BC%89\">CSS全范围色彩（Wide-Gamut Colors）</a></li>\n<li><a href=\"/posts/new-web-features-in-safari-10-1/#%E5%90%8E%E8%AE%B0\">后记</a></li>\n</ul>","excerpt":"伴随着 iOS 10.3 和 macOS Sierra 10.12.4 的更新，一个新版本的Safari也随之而来，其中有许多值得一提的web新特性让前端工程师激动不已，恩，值得唠唠。 这次新版本的发布不仅让web更为强大，同时也简化了当前代码的维护，使得web…"}},{"node":{"fields":{"slug":"/posts/the-road-growing-up-to-be-a-designer"},"html":"<p>艺术是感性的，而设计是相对理性、精密的。艺术所表达的是创作者的个人意识，而设计是为了解决用户具体的问题。</p>\n<p>设计师既需要一定的灵感和天分，也需要后天努力的学习，掌握一定的技巧和方法，更重要的是严谨细致的心思。</p>\n<p>用户体验设计师首先是解决用户的某个实际问题，其次是让问题更容易解决，最后是给用户留下深刻的印象，让他在整个过程中产生美好的体验。</p>\n<p>用户体验设计的特征：</p>\n<ul>\n<li>严谨、理性、创意</li>\n<li>提供特定问题的解决方案</li>\n<li>不让用户思考</li>\n<li>趣味横生</li>\n</ul>\n<p>用户体验设计的精益之道：</p>\n<ul>\n<li>热爱生活，细心观察，勇于改变</li>\n<li>了解人，观察人</li>\n<li>理性的思路</li>\n<li>亲自试用、体验</li>\n<li>多听用户的反馈</li>\n<li>留心好的设计，在此基础上优化</li>\n</ul>\n<p>一个好的用户体验设计师，一定是一个热爱生活、有激情、有梦想、喜欢解决问题的人。他的头脑中总是充满了各种各样新奇、有趣、靠谱的想法。他既具备理性的头脑、又具有一颗体察入微的心，更具有强大的执行力，可以把美好的想法转化成实际的产品。</p>\n<p>技能只是冰山一角：</p>\n<p><img src=\"/images/jineng.png\" alt=\"jineng\"></p>\n<p>设计师如何参与一个具体的项目：</p>\n<p><img src=\"/images/partin.png\" alt=\"partin\"></p>\n<p>解决用户需求是第一位的，也是最基本的要求，达到这个程度可以算是“合格”；让产品更易用，减少理解和操作成本，这是更进一步的要求，达到这个程度算是“专业”；让产品深深吸引用户，给用户留下美好而深刻的印象，达到这个程度可谓“出色”。</p>","frontmatter":{"title":"阅读笔记《破茧成蝶：用户体验设计师成长之路》","date":"2017-03-12T08:12:08.000Z","category":"阅读笔记","tags":["互联网","设计","产品","阅读"],"cover":null},"tableOfContents":"","excerpt":"…"}},{"node":{"fields":{"slug":"/posts/fe-code-style-guide"},"html":"<p><img src=\"https://zerosoul.github.io/2017/03/03/fe-code-style-guide/code.jpg\" alt=\"code style jpg\"></p>\n<blockquote>\n<p>代码是写给人读的，只是机器偶尔执行一下。</p>\n</blockquote>\n<h1 id=\"写在前面的话\"><a href=\"#%E5%86%99%E5%9C%A8%E5%89%8D%E9%9D%A2%E7%9A%84%E8%AF%9D\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>写在前面的话</h1>\n<ul>\n<li>规范的初衷是为了代码的可维护性，让多人写出的代码像出自同一人之手</li>\n<li>该规范具有演化性，会随着实际情况做出相应的调整。开源地址：<a href=\"https://github.com/zerosoul/fe.code.guide\">fe.code.guide</a></li>\n<li>该规范适用于开发阶段，最后上线的代码不一定符合该规范，因为上线代码可能会经过打包、混淆和压缩</li>\n</ul>\n<h1 id=\"通则\"><a href=\"#%E9%80%9A%E5%88%99\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>通则</h1>\n<ul>\n<li><strong><a href=\"http://baike.baidu.com/subview/5018/6328024.htm#viewPageContent\">KISS原则</a></strong>:坚持简约，避免不必要的复杂化</li>\n<li><strong>所有代码小写</strong>（常量命名、特殊名词、纯字符串除外）</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"html\">\n      <pre class=\"language-html\"><code class=\"language-html\">//不推荐\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>A</span> <span class=\"token attr-name\">HREF</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>/<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Home<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>A</span><span class=\"token punctuation\">></span></span>\n\n//推荐\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>img.png<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">alt</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>Image<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></code></pre>\n      </div>\n<div class=\"gatsby-highlight\" data-language=\"css\">\n      <pre class=\"language-css\"><code class=\"language-css\">//不推荐\n\n<span class=\"token property\">color</span><span class=\"token punctuation\">:</span> #E5E5E5<span class=\"token punctuation\">;</span>\n\n//推荐\n\n<span class=\"token property\">color</span><span class=\"token punctuation\">:</span> #e5e5e5<span class=\"token punctuation\">;</span></code></pre>\n      </div>\n<ul>\n<li>命名规则（项目，目录，HTML、CSS、JS、图片等静态文件）</li>\n</ul>\n<p>小写，以下划线分割，例：my_project_name</p>\n<ul>\n<li>\n<p>注释（建议以下情况使用注释）</p>\n<ul>\n<li>难于理解的代码段</li>\n<li>可能存在错误的代码段</li>\n<li>浏览器特殊的HACK代码</li>\n<li>业务逻辑强相关的代码</li>\n</ul>\n</li>\n</ul>\n<p>代码是人写的，也是由人维护，所以尽可能确保代码具备描述性，做到不注自释。<br>\n好注释能表达出代码的上下文和目的，不要只是复述从代码就能读出的信息。</p>\n<h1 id=\"html\"><a href=\"#html\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>HTML</h1>\n<h2 id=\"文档骨架\"><a href=\"#%E6%96%87%E6%A1%A3%E9%AA%A8%E6%9E%B6\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>文档骨架</h2>\n<p>PC：  </p>\n<div class=\"gatsby-highlight\" data-language=\"html\">\n      <pre class=\"language-html\"><code class=\"language-html\"><span class=\"token doctype\">&lt;!DOCTYPE html></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span><span class=\"token punctuation\">></span></span>\n\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">charset</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>utf-8<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>title</span><span class=\"token punctuation\">></span></span>Page title<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>title</span><span class=\"token punctuation\">></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">http-equiv</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>X-UA-Compatible<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">content</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>IE=Edge<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span>\n\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span>\n\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span></code></pre>\n      </div>\n<p><em>强制浏览器使用标准模式渲染，保证页面效果统一。IE浏览器使用最新版本，即<a href=\"http://stackoverflow.com/questions/6771258/what-does-meta-http-equiv-x-ua-compatible-content-ie-edge-do\">Edge Mode</a></em>。</p>\n<p>Mobile：  </p>\n<div class=\"gatsby-highlight\" data-language=\"html\">\n      <pre class=\"language-html\"><code class=\"language-html\"><span class=\"token doctype\">&lt;!DOCTYPE html></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span><span class=\"token punctuation\">></span></span>\n\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">charset</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>utf-8<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>title</span><span class=\"token punctuation\">></span></span>Page title<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>title</span><span class=\"token punctuation\">></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">content</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>viewport<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span>\n\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span>\n\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span></code></pre>\n      </div>\n<p><em>强制浏览器使用标准模式渲染，保证页面效果统一</em></p>\n<h2 id=\"语法\"><a href=\"#%E8%AF%AD%E6%B3%95\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>语法</h2>\n<ul>\n<li><strong>使用双空格短缩进</strong></li>\n<li>在属性中始终书写双引号</li>\n<li>自关闭元素不要使用斜杠结尾（<a href=\"http://blog.jobbole.com/61514/\">参考此处</a>）</li>\n</ul>\n<p>常见的自关闭元素：  </p>\n<div class=\"gatsby-highlight\" data-language=\"html\">\n      <pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>br</span><span class=\"token punctuation\">></span></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>hr</span><span class=\"token punctuation\">></span></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span><span class=\"token punctuation\">></span></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span><span class=\"token punctuation\">></span></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>link</span><span class=\"token punctuation\">></span></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span><span class=\"token punctuation\">></span></span></code></pre>\n      </div>\n<p>不常见的自关闭元素：  </p>\n<div class=\"gatsby-highlight\" data-language=\"html\">\n      <pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>area</span><span class=\"token punctuation\">></span></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>base</span><span class=\"token punctuation\">></span></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>col</span><span class=\"token punctuation\">></span></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>command</span><span class=\"token punctuation\">></span></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>embed</span><span class=\"token punctuation\">></span></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>keygen</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>param</span><span class=\"token punctuation\">></span></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>source</span><span class=\"token punctuation\">></span></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>track</span><span class=\"token punctuation\">></span></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>wbr</span><span class=\"token punctuation\">></span></span></code></pre>\n      </div>\n<h2 id=\"引用css和javascript文件\"><a href=\"#%E5%BC%95%E7%94%A8css%E5%92%8Cjavascript%E6%96%87%E4%BB%B6\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>引用CSS和JavaScript文件</h2>\n<p>按照HTML5规范，一般来说，当CSS和JS文件被引用时，都会默认以 <code class=\"language-text\">text/css</code> 和 <code class=\"language-text\">text/javascript</code> 的方式，没必要特意为其指定 <code class=\"language-text\">type</code> 类型。例如：  </p>\n<div class=\"gatsby-highlight\" data-language=\"html\">\n      <pre class=\"language-html\"><code class=\"language-html\"><span class=\"token comment\">&lt;!-- 外部 CSS --></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>link</span> <span class=\"token attr-name\">rel</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>stylesheet<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>demo.css<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token comment\">&lt;!-- 文档内CSS --></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>style</span><span class=\"token punctuation\">></span></span><span class=\"token style language-css\">\n\n  <span class=\"token comment\">/* ... */</span>\n\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>style</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token comment\">&lt;!-- Javascript --></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>demo.js<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script language-javascript\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></code></pre>\n      </div>\n<h2 id=\"精简标签\"><a href=\"#%E7%B2%BE%E7%AE%80%E6%A0%87%E7%AD%BE\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>精简标签</h2>\n<p>书写HTML时尽可能减少冗余的标签。比如：  </p>\n<div class=\"gatsby-highlight\" data-language=\"html\">\n      <pre class=\"language-html\"><code class=\"language-html\"><span class=\"token comment\">&lt;!-- 不推荐 --></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>avatar<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>...<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token comment\">&lt;!--推荐 --></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>avatar<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>...<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></code></pre>\n      </div>\n<p>另外，尽量不要在HTML写行内style、JS代码，遵守<strong>结构和样式、行为分离</strong>的原则。</p>\n<h2 id=\"实用为王\"><a href=\"#%E5%AE%9E%E7%94%A8%E4%B8%BA%E7%8E%8B\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>实用为王</h2>\n<p>尽量遵循 HTML 标准和语义，但是不要以牺牲实用性为代价。任何时候都要尽量使用最少的标签并保持最小的复杂度。</p>\n<h2 id=\"属性顺序\"><a href=\"#%E5%B1%9E%E6%80%A7%E9%A1%BA%E5%BA%8F\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>属性顺序</h2>\n<div class=\"gatsby-highlight\" data-language=\"html\">\n      <pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>...<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>...<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">data-toggle</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>modal<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>#<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n\n  Demo link\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>form-control<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>...<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">alt</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>...<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></code></pre>\n      </div>\n<ul>\n<li>class</li>\n<li>id,name</li>\n<li>data-*</li>\n<li>src,for,type,href,value</li>\n<li>title,alt</li>\n<li>role,aria-*</li>\n</ul>\n<p><code class=\"language-text\">class</code>能更好地重用组件，所以打头阵；<code class=\"language-text\">id</code>更加特定和专属，尽量控制使用。</p>\n<h2 id=\"布尔属性\"><a href=\"#%E5%B8%83%E5%B0%94%E5%B1%9E%E6%80%A7\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>布尔属性</h2>\n<blockquote>\n<p>某一元素如果调用了布尔属性，则代表该值为真，否则为假。</p>\n</blockquote>\n<p>简言之：不要赋值。  </p>\n<div class=\"gatsby-highlight\" data-language=\"html\">\n      <pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">disabled</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>checkbox<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>1<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">checked</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>select</span><span class=\"token punctuation\">></span></span>\n\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>option</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>1<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">selected</span><span class=\"token punctuation\">></span></span>1<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>option</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>select</span><span class=\"token punctuation\">></span></span></code></pre>\n      </div>\n<h1 id=\"css\"><a href=\"#css\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CSS</h1>\n<h2 id=\"语法-1\"><a href=\"#%E8%AF%AD%E6%B3%95-1\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>语法</h2>\n<div class=\"gatsby-highlight\" data-language=\"html\">\n      <pre class=\"language-html\"><code class=\"language-html\">/* 不推荐 */\n\n.selector, .selector-secondary, .selector[type=text] {\n\n  padding:15px;\n\n  margin:0px 0px 15px;\n\n  background-color:rgba(0, 0, 0, 0.5);\n\n  box-shadow:0px 1px 2px #CCC,inset 0 1px 0 #FFFFFF\n\n}\n\n/* 推荐 */\n\n.selector,\n\n.selector-secondary,\n\n.selector[type=\"text\"] {\n\n  padding: 15px;\n\n  margin-bottom: 15px;\n\n  background-color: rgba(0,0,0,.5);\n\n  box-shadow: 0 1px 2px #ccc, inset 0 1px 0 #fff;\n\n}</code></pre>\n      </div>\n<ul>\n<li>多个选择器，请换行</li>\n<li>区块结束符<code class=\"language-text\">}</code>独占一行</li>\n<li>不要忘记最后一个声明语句的<code class=\"language-text\">;</code></li>\n<li>省略小数点前的<code class=\"language-text\">0</code>：<code class=\"language-text\">0.5</code>=><code class=\"language-text\">.5</code></li>\n<li>零值省略单位：<code class=\"language-text\">margin: 0px;</code>=><code class=\"language-text\">margin: 0</code></li>\n<li>只有一条声明可以写在一行</li>\n</ul>\n<h2 id=\"声明顺序\"><a href=\"#%E5%A3%B0%E6%98%8E%E9%A1%BA%E5%BA%8F\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>声明顺序</h2>\n<div class=\"gatsby-highlight\" data-language=\"css\">\n      <pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">.declaration-order</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token comment\">/* 定位 */</span>\n\n  <span class=\"token property\">position</span><span class=\"token punctuation\">:</span> absolute<span class=\"token punctuation\">;</span>\n\n  <span class=\"token property\">top</span><span class=\"token punctuation\">:</span> 0<span class=\"token punctuation\">;</span>\n\n  <span class=\"token property\">right</span><span class=\"token punctuation\">:</span> 0<span class=\"token punctuation\">;</span>\n\n  <span class=\"token property\">bottom</span><span class=\"token punctuation\">:</span> 0<span class=\"token punctuation\">;</span>\n\n  <span class=\"token property\">left</span><span class=\"token punctuation\">:</span> 0<span class=\"token punctuation\">;</span>\n\n  <span class=\"token property\">z-index</span><span class=\"token punctuation\">:</span> 100<span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">/* 盒模型 */</span>\n\n  <span class=\"token property\">display</span><span class=\"token punctuation\">:</span> block<span class=\"token punctuation\">;</span>\n\n  <span class=\"token property\">float</span><span class=\"token punctuation\">:</span> right<span class=\"token punctuation\">;</span>\n\n  <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 100px<span class=\"token punctuation\">;</span>\n\n  <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> 100px<span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">/* 排版 */</span>\n\n  <span class=\"token property\">font</span><span class=\"token punctuation\">:</span> normal 13px <span class=\"token string\">\"Helvetica Neue\"</span>, sans-serif<span class=\"token punctuation\">;</span>\n\n  <span class=\"token property\">line-height</span><span class=\"token punctuation\">:</span> 1.5<span class=\"token punctuation\">;</span>\n\n  <span class=\"token property\">color</span><span class=\"token punctuation\">:</span> #333<span class=\"token punctuation\">;</span>\n\n  <span class=\"token property\">text-align</span><span class=\"token punctuation\">:</span> center<span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">/* 视觉 */</span>\n\n  <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> #f5f5f5<span class=\"token punctuation\">;</span>\n\n  <span class=\"token property\">border</span><span class=\"token punctuation\">:</span> 1px solid #e5e5e5<span class=\"token punctuation\">;</span>\n\n  <span class=\"token property\">border-radius</span><span class=\"token punctuation\">:</span> 3px<span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">/* 其它 */</span>\n\n  <span class=\"token property\">opacity</span><span class=\"token punctuation\">:</span> 1<span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span></code></pre>\n      </div>\n<p>相关属性的声明按组以以下顺序排列：</p>\n<ol>\n<li>定位（Positioning）</li>\n<li>盒模型（Box model）</li>\n<li>排版（Typographic）</li>\n<li>视觉（Visual）</li>\n</ol>\n<p><strong>定位排首位是因为它可能会让元素脱离文档流并重写盒模型的相关样式</strong></p>\n<h2 id=\"禁止使用code-classlanguage-textimportcode\"><a href=\"#%E7%A6%81%E6%AD%A2%E4%BD%BF%E7%94%A8code-classlanguage-textimportcode\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>禁止使用<code class=\"language-text\">@import</code></h2>\n<p>原因：<a href=\"http://www.stevesouders.com/blog/2009/04/09/dont-use-import/\">参考此文</a></p>\n<h2 id=\"正确放置媒体查询语句\"><a href=\"#%E6%AD%A3%E7%A1%AE%E6%94%BE%E7%BD%AE%E5%AA%92%E4%BD%93%E6%9F%A5%E8%AF%A2%E8%AF%AD%E5%8F%A5\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>正确放置媒体查询语句</h2>\n<div class=\"gatsby-highlight\" data-language=\"css\">\n      <pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">.element</span> <span class=\"token punctuation\">{</span> ... <span class=\"token punctuation\">}</span>\n\n<span class=\"token selector\">.element-avatar</span> <span class=\"token punctuation\">{</span> ... <span class=\"token punctuation\">}</span>\n\n<span class=\"token selector\">.element-selected</span> <span class=\"token punctuation\">{</span> ... <span class=\"token punctuation\">}</span>\n\n<span class=\"token atrule\"><span class=\"token rule\">@media</span> <span class=\"token punctuation\">(</span><span class=\"token property\">min-width</span><span class=\"token punctuation\">:</span> 480px<span class=\"token punctuation\">)</span></span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token selector\">.element</span> <span class=\"token punctuation\">{</span> ...<span class=\"token punctuation\">}</span>\n\n  <span class=\"token selector\">.element-avatar</span> <span class=\"token punctuation\">{</span> ... <span class=\"token punctuation\">}</span>\n\n  <span class=\"token selector\">.element-selected</span> <span class=\"token punctuation\">{</span> ... <span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span></code></pre>\n      </div>\n<p>尽可能把媒体查询语句放在相关的规则集后面，不要单独存放到某个文件，也不要放到样式表最后。这样做是为了以后同步修改更方便，相信我，这样做能让后来维护代码的人少骂你几句。</p>\n<h2 id=\"简写虽好，但不要滥用\"><a href=\"#%E7%AE%80%E5%86%99%E8%99%BD%E5%A5%BD%EF%BC%8C%E4%BD%86%E4%B8%8D%E8%A6%81%E6%BB%A5%E7%94%A8\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>简写虽好，但不要滥用</h2>\n<div class=\"gatsby-highlight\" data-language=\"css\">\n      <pre class=\"language-css\"><code class=\"language-css\"><span class=\"token comment\">/* 不推荐 */</span>\n\n<span class=\"token selector\">.element</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token property\">margin</span><span class=\"token punctuation\">:</span> 0 0 10px<span class=\"token punctuation\">;</span>\n\n  <span class=\"token property\">background</span><span class=\"token punctuation\">:</span> red<span class=\"token punctuation\">;</span>\n\n  <span class=\"token property\">background</span><span class=\"token punctuation\">:</span> <span class=\"token url\">url(\"image.jpg\")</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token property\">border-radius</span><span class=\"token punctuation\">:</span> 3px 3px 0 0<span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/* 推荐 */</span>\n\n<span class=\"token selector\">.element</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token property\">margin-bottom</span><span class=\"token punctuation\">:</span> 10px<span class=\"token punctuation\">;</span>\n\n  <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> red<span class=\"token punctuation\">;</span>\n\n  <span class=\"token property\">background-image</span><span class=\"token punctuation\">:</span> <span class=\"token url\">url(\"image.jpg\")</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token property\">border-top-left-radius</span><span class=\"token punctuation\">:</span> 3px<span class=\"token punctuation\">;</span>\n\n  <span class=\"token property\">border-top-right-radius</span><span class=\"token punctuation\">:</span> 3px<span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span></code></pre>\n      </div>\n<p>一些属性可以合并简写，比如：</p>\n<ul>\n<li>padding</li>\n<li>margin</li>\n<li>font</li>\n<li>background</li>\n<li>border</li>\n<li>border-radius</li>\n</ul>\n<p>属性简写需要非常清楚属性值的正确顺序，而且在大多数情况下并不需要设置属性简写中包含的所有值，所以建议尽量分开声明会更加清晰。使用简写前，想一想有没有必要，<strong>少于三个</strong>合并属性建议不要简写。</p>\n<p><em><a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/Shorthand_properties\">这里</a>有一篇关于简写的好文章</em></p>\n<h2 id=\"选择器命名采用code-classlanguage-text-code分隔\"><a href=\"#%E9%80%89%E6%8B%A9%E5%99%A8%E5%91%BD%E5%90%8D%E9%87%87%E7%94%A8code-classlanguage-text-code%E5%88%86%E9%9A%94\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>选择器命名采用<code class=\"language-text\">-</code>分隔</h2>\n<div class=\"gatsby-highlight\" data-language=\"css\">\n      <pre class=\"language-css\"><code class=\"language-css\"><span class=\"token comment\">/* 不推荐 */</span>\n\n <span class=\"token selector\">.hotelTitle</span> <span class=\"token punctuation\">{</span>\n\n     <span class=\"token property\">font-weight</span><span class=\"token punctuation\">:</span> bold<span class=\"token punctuation\">;</span>\n\n <span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/* 推荐 */</span>\n\n <span class=\"token selector\">.hotel-title</span> <span class=\"token punctuation\">{</span>\n\n     <span class=\"token property\">font-weight</span><span class=\"token punctuation\">:</span> bold<span class=\"token punctuation\">;</span>\n\n <span class=\"token punctuation\">}</span></code></pre>\n      </div>\n<ul>\n<li>比使用驼峰更加清晰。</li>\n<li><strong>产品线-产品-模块-子模块</strong></li>\n</ul>\n<h1 id=\"javascript\"><a href=\"#javascript\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Javascript</h1>\n<ul>\n<li>JS 换行缩进：采用 4 空格</li>\n<li>结束行添加分号<code class=\"language-text\">;</code></li>\n<li>避免使用 eval()</li>\n<li>JS调试使用<code class=\"language-text\">console.log()</code>及<code class=\"language-text\">console.dir()</code>，避免使用<code class=\"language-text\">alert()</code>，线上版需要注释或删掉所有调试代码</li>\n</ul>\n<h2 id=\"引号\"><a href=\"#%E5%BC%95%E5%8F%B7\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>引号</h2>\n<p>最外层统一使用单引号：</p>\n<div class=\"gatsby-highlight\" data-language=\"js\">\n      <pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// 不推荐</span>\n\n<span class=\"token keyword\">var</span> x <span class=\"token operator\">=</span> <span class=\"token string\">\"test\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 推荐</span>\n\n<span class=\"token keyword\">var</span> y <span class=\"token operator\">=</span> <span class=\"token string\">'foo'</span><span class=\"token punctuation\">,</span>\n\n    z <span class=\"token operator\">=</span> <span class=\"token string\">'&lt;div id=\"test\">&lt;/div>'</span><span class=\"token punctuation\">;</span></code></pre>\n      </div>\n<h2 id=\"变量命名\"><a href=\"#%E5%8F%98%E9%87%8F%E5%91%BD%E5%90%8D\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>变量命名</h2>\n<div class=\"gatsby-highlight\" data-language=\"js\">\n      <pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> thisIsMyName<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">var</span> goodID<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">var</span> reportURL<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">var</span> AndroidVersion<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">var</span> iOSVersion<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">var</span> <span class=\"token constant\">MAX_COUNT</span> <span class=\"token operator\">=</span> <span class=\"token number\">10</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">Person</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name<span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// 不推荐</span>\n\n<span class=\"token keyword\">var</span> body <span class=\"token operator\">=</span> <span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">'body'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 推荐</span>\n\n<span class=\"token keyword\">var</span> $body <span class=\"token operator\">=</span> <span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">'body'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n      </div>\n<ul>\n<li>标准变量采用驼峰式命名</li>\n<li>常量全大写，用下划线连接</li>\n<li>特殊处理：<code class=\"language-text\">ID</code>,<code class=\"language-text\">URL</code>,<code class=\"language-text\">Android</code>,<code class=\"language-text\">iOS</code></li>\n<li>构造函数，大写第一个字母</li>\n<li>jQuery变量首字符为 <code class=\"language-text\">$</code>, 私有变量:首字符为<code class=\"language-text\">_</code></li>\n</ul>\n<h2 id=\"变量声明\"><a href=\"#%E5%8F%98%E9%87%8F%E5%A3%B0%E6%98%8E\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>变量声明</h2>\n<div class=\"gatsby-highlight\" data-language=\"js\">\n      <pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">doSomethingWithItems</span><span class=\"token punctuation\">(</span>items<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token comment\">// 使用一个var声明</span>\n\n    <span class=\"token keyword\">var</span> value <span class=\"token operator\">=</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span>\n\n        result <span class=\"token operator\">=</span> value <span class=\"token operator\">+</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span>\n\n        i<span class=\"token punctuation\">,</span>\n\n        len<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span>i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> len <span class=\"token operator\">=</span> items<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> len<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n        result <span class=\"token operator\">+=</span> <span class=\"token number\">10</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span></code></pre>\n      </div>\n<p>一个函数作用域中所有的变量声明尽量提到函数首部，用一个var声明，不允许出现两个连续的var声明。</p>\n<h1 id=\"smarty模板\"><a href=\"#smarty%E6%A8%A1%E6%9D%BF\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Smarty模板</h1>\n<h2 id=\"划清php与smarty的界限\"><a href=\"#%E5%88%92%E6%B8%85php%E4%B8%8Esmarty%E7%9A%84%E7%95%8C%E9%99%90\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>划清PHP与Smarty的界限</h2>\n<p>PHP只是负责输出数据，并保持干净。切勿将业务逻辑代码放入Smarty中。</p>\n<h2 id=\"组合大于继承\"><a href=\"#%E7%BB%84%E5%90%88%E5%A4%A7%E4%BA%8E%E7%BB%A7%E6%89%BF\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>组合大于继承</h2>\n<p>尽量不使用继承，即使使用，继承关系不要超过两层。</p>\n<h2 id=\"逻辑尽可能简洁，判断不要超过三层\"><a href=\"#%E9%80%BB%E8%BE%91%E5%B0%BD%E5%8F%AF%E8%83%BD%E7%AE%80%E6%B4%81%EF%BC%8C%E5%88%A4%E6%96%AD%E4%B8%8D%E8%A6%81%E8%B6%85%E8%BF%87%E4%B8%89%E5%B1%82\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>逻辑尽可能简洁，判断不要超过三层</h2>\n<p>Smarty模板只是负责展示数据，尽量不要掺入逻辑判断，但判断过多时，就应该思考是否应该把这部分判断逻辑放入PHP端？或者，产品的业务逻辑如此复杂，是否已经是走入了错误的方向？如果你有更好的解决方式，奔向PM理论一番吧，少年，如果能想到这一步，你已经在成长。</p>\n<p><a href=\"http://www.smarty.net/best_practices\">Smarty官方最佳实践</a></p>\n<h1 id=\"性能清单\"><a href=\"#%E6%80%A7%E8%83%BD%E6%B8%85%E5%8D%95\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>性能清单</h1>\n<h2 id=\"常规\"><a href=\"#%E5%B8%B8%E8%A7%84\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>常规</h2>\n<ul>\n<li>是否启用HTTP2？</li>\n<li><strong>静态文件是否使用CDN？独立域名？</strong></li>\n<li><strong>静态文件域名是否做到无Cookie？</strong></li>\n<li>DNS预取功能是否开启？</li>\n</ul>\n<h2 id=\"资源\"><a href=\"#%E8%B5%84%E6%BA%90\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>资源</h2>\n<ul>\n<li>JavaScript/CSS/HTML文件是否合并、压缩？</li>\n<li>是否存在行内样式和JS？</li>\n<li><strong>CSS有没有使用<code class=\"language-text\">@import</code>？</strong></li>\n<li>静态文本文件有没有开启Gzip？</li>\n<li><strong>是否做到科学使用图片格式？（PNG,JPG,GIF…适用场景及尺寸合适）</strong></li>\n<li>图片有没有压缩处理？</li>\n<li>图片资源有没有开启浏览器缓存？</li>\n<li>SVG文件有没有压缩处理？</li>\n<li>浏览器缓存是否做到高效利用？</li>\n<li><strong>对于非关键资源有没有做到异步或者延迟处理？</strong></li>\n</ul>\n<h2 id=\"度量标准\"><a href=\"#%E5%BA%A6%E9%87%8F%E6%A0%87%E5%87%86\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>度量标准</h2>\n<p>通常，页面的性能通过以下数据大体感知出：</p>\n<ul>\n<li>所有文件的数量</li>\n<li>所有文件的大小</li>\n<li>DomReady时间</li>\n<li>页面下载时间</li>\n</ul>\n<h2 id=\"渲染性能\"><a href=\"#%E6%B8%B2%E6%9F%93%E6%80%A7%E8%83%BD\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>渲染性能</h2>\n<ul>\n<li><strong>CSS在头部加载</strong></li>\n<li><strong>JS文件在文档底部加载</strong></li>\n<li><strong><code class=\"language-text\">script</code>标签开启<code class=\"language-text\">defer</code>特性</strong></li>\n<li><strong>假如JS文件在头部加载，放在CSS之后</strong></li>\n<li>60fps情况下页面依然可以滚动浏览</li>\n<li>禁用<code class=\"language-text\">document.write</code></li>\n<li>防止CSS 动画的滥用</li>\n</ul>\n<h1 id=\"硬件性能\"><a href=\"#%E7%A1%AC%E4%BB%B6%E6%80%A7%E8%83%BD\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>硬件性能</h1>\n<ul>\n<li>CPU使用率</li>\n<li>内存使用率</li>\n<li>GPU使用率</li>\n</ul>\n<h1 id=\"安全\"><a href=\"#%E5%AE%89%E5%85%A8\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>安全</h1>\n<ul>\n<li>全站HTTPS</li>\n<li>站外资源的引用开启HTTPS</li>\n<li>启用Robots.txt</li>\n<li><strong>XSS成为不可能</strong></li>\n<li>开启<code class=\"language-text\">Content-Security-Policy</code>，并且只允许特指的几个域名</li>\n</ul>\n<h1 id=\"其它\"><a href=\"#%E5%85%B6%E5%AE%83\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>其它</h1>\n<ul>\n<li>在<code class=\"language-text\">html</code>标签内正确设置语言</li>\n<li>指定<code class=\"language-text\">charset</code></li>\n<li>HTML通过验证</li>\n<li>指定404页面</li>\n<li>指定页面打印样式</li>\n</ul>\n<h1 id=\"上线检查清单\"><a href=\"#%E4%B8%8A%E7%BA%BF%E6%A3%80%E6%9F%A5%E6%B8%85%E5%8D%95\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>上线检查清单</h1>\n<ul>\n<li>设计稿高度还原（移动端：750）</li>\n<li>对业务的理解（有些问题不一定需要靠技术手段解决，锻炼伪需求的辨别能力）</li>\n<li>html标签的简洁性，语义性</li>\n<li>功能实现优先级：html>CSS>img&#x26;JS</li>\n<li>渐进增强，优雅降级（PC：>=IE9，Mobile：>=Android 4.0）</li>\n<li>交互是否完备</li>\n<li>模板和静态页的易用性（把交付，当做产品来做，换位思考，考虑后端开发的感受）e.g.链接的设置</li>\n<li>模块化（把代码，当做积木来做，为将来的维护少挖坑）</li>\n<li>广告区块有个占位就行，统一占位和样式</li>\n<li>readme.txt（命名命的好，代码结构清晰，不readme也行）</li>\n<li>知己知彼（smarty模板语言，php better）</li>\n<li>新技术的应用（语言、工具）</li>\n<li>雅虎军规</li>\n</ul>","frontmatter":{"title":"无规矩不成方圆--前端编码规范","date":"2017-03-03T09:31:37.000Z","category":"技术","tags":["前端","备忘","编码规范"],"cover":"https://zerosoul.github.io/2017/03/03/fe-code-style-guide/code.jpg"},"tableOfContents":"<ul>\n<li><a href=\"/posts/fe-code-style-guide/#%E5%86%99%E5%9C%A8%E5%89%8D%E9%9D%A2%E7%9A%84%E8%AF%9D\">写在前面的话</a></li>\n<li><a href=\"/posts/fe-code-style-guide/#%E9%80%9A%E5%88%99\">通则</a></li>\n<li>\n<p><a href=\"/posts/fe-code-style-guide/#html\">HTML</a></p>\n<ul>\n<li><a href=\"/posts/fe-code-style-guide/#%E6%96%87%E6%A1%A3%E9%AA%A8%E6%9E%B6\">文档骨架</a></li>\n<li><a href=\"/posts/fe-code-style-guide/#%E8%AF%AD%E6%B3%95\">语法</a></li>\n<li><a href=\"/posts/fe-code-style-guide/#%E5%BC%95%E7%94%A8css%E5%92%8Cjavascript%E6%96%87%E4%BB%B6\">引用CSS和JavaScript文件</a></li>\n<li><a href=\"/posts/fe-code-style-guide/#%E7%B2%BE%E7%AE%80%E6%A0%87%E7%AD%BE\">精简标签</a></li>\n<li><a href=\"/posts/fe-code-style-guide/#%E5%AE%9E%E7%94%A8%E4%B8%BA%E7%8E%8B\">实用为王</a></li>\n<li><a href=\"/posts/fe-code-style-guide/#%E5%B1%9E%E6%80%A7%E9%A1%BA%E5%BA%8F\">属性顺序</a></li>\n<li><a href=\"/posts/fe-code-style-guide/#%E5%B8%83%E5%B0%94%E5%B1%9E%E6%80%A7\">布尔属性</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"/posts/fe-code-style-guide/#css\">CSS</a></p>\n<ul>\n<li><a href=\"/posts/fe-code-style-guide/#%E8%AF%AD%E6%B3%95-1\">语法</a></li>\n<li><a href=\"/posts/fe-code-style-guide/#%E5%A3%B0%E6%98%8E%E9%A1%BA%E5%BA%8F\">声明顺序</a></li>\n<li><a href=\"/posts/fe-code-style-guide/#%E7%A6%81%E6%AD%A2%E4%BD%BF%E7%94%A8code-classlanguage-textimportcode\">禁止使用&#x3C;code class=\"language-text\">@import&#x3C;/code></a></li>\n<li><a href=\"/posts/fe-code-style-guide/#%E6%AD%A3%E7%A1%AE%E6%94%BE%E7%BD%AE%E5%AA%92%E4%BD%93%E6%9F%A5%E8%AF%A2%E8%AF%AD%E5%8F%A5\">正确放置媒体查询语句</a></li>\n<li><a href=\"/posts/fe-code-style-guide/#%E7%AE%80%E5%86%99%E8%99%BD%E5%A5%BD%EF%BC%8C%E4%BD%86%E4%B8%8D%E8%A6%81%E6%BB%A5%E7%94%A8\">简写虽好，但不要滥用</a></li>\n<li><a href=\"/posts/fe-code-style-guide/#%E9%80%89%E6%8B%A9%E5%99%A8%E5%91%BD%E5%90%8D%E9%87%87%E7%94%A8code-classlanguage-text-code%E5%88%86%E9%9A%94\">选择器命名采用&#x3C;code class=\"language-text\">-&#x3C;/code>分隔</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"/posts/fe-code-style-guide/#javascript\">Javascript</a></p>\n<ul>\n<li><a href=\"/posts/fe-code-style-guide/#%E5%BC%95%E5%8F%B7\">引号</a></li>\n<li><a href=\"/posts/fe-code-style-guide/#%E5%8F%98%E9%87%8F%E5%91%BD%E5%90%8D\">变量命名</a></li>\n<li><a href=\"/posts/fe-code-style-guide/#%E5%8F%98%E9%87%8F%E5%A3%B0%E6%98%8E\">变量声明</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"/posts/fe-code-style-guide/#smarty%E6%A8%A1%E6%9D%BF\">Smarty模板</a></p>\n<ul>\n<li><a href=\"/posts/fe-code-style-guide/#%E5%88%92%E6%B8%85php%E4%B8%8Esmarty%E7%9A%84%E7%95%8C%E9%99%90\">划清PHP与Smarty的界限</a></li>\n<li><a href=\"/posts/fe-code-style-guide/#%E7%BB%84%E5%90%88%E5%A4%A7%E4%BA%8E%E7%BB%A7%E6%89%BF\">组合大于继承</a></li>\n<li><a href=\"/posts/fe-code-style-guide/#%E9%80%BB%E8%BE%91%E5%B0%BD%E5%8F%AF%E8%83%BD%E7%AE%80%E6%B4%81%EF%BC%8C%E5%88%A4%E6%96%AD%E4%B8%8D%E8%A6%81%E8%B6%85%E8%BF%87%E4%B8%89%E5%B1%82\">逻辑尽可能简洁，判断不要超过三层</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"/posts/fe-code-style-guide/#%E6%80%A7%E8%83%BD%E6%B8%85%E5%8D%95\">性能清单</a></p>\n<ul>\n<li><a href=\"/posts/fe-code-style-guide/#%E5%B8%B8%E8%A7%84\">常规</a></li>\n<li><a href=\"/posts/fe-code-style-guide/#%E8%B5%84%E6%BA%90\">资源</a></li>\n<li><a href=\"/posts/fe-code-style-guide/#%E5%BA%A6%E9%87%8F%E6%A0%87%E5%87%86\">度量标准</a></li>\n<li><a href=\"/posts/fe-code-style-guide/#%E6%B8%B2%E6%9F%93%E6%80%A7%E8%83%BD\">渲染性能</a></li>\n</ul>\n</li>\n<li><a href=\"/posts/fe-code-style-guide/#%E7%A1%AC%E4%BB%B6%E6%80%A7%E8%83%BD\">硬件性能</a></li>\n<li><a href=\"/posts/fe-code-style-guide/#%E5%AE%89%E5%85%A8\">安全</a></li>\n<li><a href=\"/posts/fe-code-style-guide/#%E5%85%B6%E5%AE%83\">其它</a></li>\n<li><a href=\"/posts/fe-code-style-guide/#%E4%B8%8A%E7%BA%BF%E6%A3%80%E6%9F%A5%E6%B8%85%E5%8D%95\">上线检查清单</a></li>\n</ul>","excerpt":"代码是写给人读的，只是机器偶尔执行一下。 写在前面的话 规范的初衷是为了代码的可维护性，让多人写出的代码像出自同一人之手 该规范具有演化性，会随着实际情况做出相应的调整。开源地址： fe.code.guide…"}},{"node":{"fields":{"slug":"/posts/the-lean-startup"},"html":"<h1 id=\"序\"><a href=\"#%E5%BA%8F\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>序</h1>\n<p>创业的第一阶段是把想法变成产品。这时开发的产品是精简的原型，投入最少的金钱和精力开发出体现核心价值的产品。此时创业者们率领精干的成员，用类似特种部队的组织方式，在有限的资源和时间窗口内用很短的时间做出产品，并快速投入市场，通过不断的小规模实验，获得顾客反馈，进而不断迭代，让产品得到市场验证。</p>\n<p>创业的第二阶段，新创企业要对正确的产品形态进行重点投入，做好做细，做“最了解用户的人”，做到极致。这个阶段，必须用最小的成本、在最短时间里找到最有价值的认知。</p>\n<p>创业的第三阶段，成功者往往伴随着爆发式的增长，全面的扩张。企业开始与传统的、陈旧的市场势力展开阵地战。这一过程中，创业企业的力量之源正来自此前积累的对用户的深入理解和对市场的快速反应，即“爱与速度”。能到达第三个阶段的创业企业，大都把“对用户有爱、对产品有爱”作为一种信仰。他们不能容忍产品有缺点，不能容忍产品的用户体验不好，不能容忍BUG，跟0.1秒的延迟较劲，跟0.1M的大小较真……</p>\n<h1 id=\"愿景：经证实的认知（validated-learning）\"><a href=\"#%E6%84%BF%E6%99%AF%EF%BC%9A%E7%BB%8F%E8%AF%81%E5%AE%9E%E7%9A%84%E8%AE%A4%E7%9F%A5%EF%BC%88validated-learning%EF%BC%89\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>愿景：经证实的认知（Validated Learning）</h1>\n<h2 id=\"开端\"><a href=\"#%E5%BC%80%E7%AB%AF\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>开端</h2>\n<p>创业即管理</p>\n<h2 id=\"定义\"><a href=\"#%E5%AE%9A%E4%B9%89\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>定义</h2>\n<p>新创企业是一个由人组成的机构，在极端不确定的情况下，开发新产品或新服务。</p>\n<p>新创企业运用了各种各样的创新：崭新的科学发现，重新开发现有技术的新用途，发展新的业务模式、释放潜在价值，抑或是仅仅把产品或服务带到新的市场，或带给以往服务力度不够的顾客。凡此种种，创新都是企业成功的核心所在。</p>\n<h2 id=\"学习\"><a href=\"#%E5%AD%A6%E4%B9%A0\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>学习</h2>\n<p>为了要实现愿景，我们必须明确我们的哪些策略是可行的，哪些是过激的。我们必须了解顾客真正需要的是什么，而不是他们自己说要什么，或者我们认为他们应该要什么。我们必须认清自己是否朝着可持续企业之路发展成长。</p>\n<p>公关上的热闹会褪去，胜出的是业务的根本特质。要是我们把宝贵的资源浪费在追求戏剧效果而不是争取实质进展上，这才是大麻烦。</p>\n<h2 id=\"实验\"><a href=\"#%E5%AE%9E%E9%AA%8C\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>实验</h2>\n<p>如果你无法失败，就学不到东西。</p>\n<p>胸怀大志，从小处做起。</p>\n<h1 id=\"驾驭：开发-测量-认知（build-measure-learn），反馈循环\"><a href=\"#%E9%A9%BE%E9%A9%AD%EF%BC%9A%E5%BC%80%E5%8F%91-%E6%B5%8B%E9%87%8F-%E8%AE%A4%E7%9F%A5%EF%BC%88build-measure-learn%EF%BC%89%EF%BC%8C%E5%8F%8D%E9%A6%88%E5%BE%AA%E7%8E%AF\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>驾驭：开发-测量-认知（Build-Measure-Learn），反馈循环</h1>\n<p><img src=\"/images/steps.jpg\" alt=\"steps\"></p>\n<p>从最初的信念飞跃开始，运用最小化可行产品来验证，使用创新核算和可执行衡量指标评估其结果，并且作出转型或坚持的决定。</p>\n<h2 id=\"衡量\"><a href=\"#%E8%A1%A1%E9%87%8F\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>衡量</h2>\n<p>我们在好莱坞或书本杂志的传奇世界中看到的创业家成功故事，总是从一个模子里刻出来的。首先，大胆的主人公突然顿悟，想出一个绝妙的点子。接着，我们了解了他们的个性和品格、他们如何尽享天时地利，以及如何跨出惊人一步开创了企业。</p>\n<p>然后出现了电影蒙太奇。这一段常常很短，也就是几分钟的图像或旁白，说明时间流逝。我们看到，主人公建立团队，在实验室里工作，在白板上奋笔疾书，完成销售，或猛力敲击键盘什么的。在蒙太奇的结尾处，创业者已经取得成功。接下来的故事变得更有趣：他们如何分享成功果实，谁上了杂志封面，谁告了谁，以及对未来的影响。</p>\n<p>不幸的是，决定新创企业成功的真正工作发生在蒙太奇之中。但它实在太过乏味，因而没有在故事中出现。创业活动中只有5%用于构想大创意、商业模式、进行书面策划，以及分配胜利果实。剩余的95%都是用创新核算来衡量的艰苦工作：诸如决定产品优先排序、确定瞄准或倾听哪些顾客，以及有勇气把伟大的理想投入不断的测试和反馈中去。</p>\n<h2 id=\"转型还是坚持\"><a href=\"#%E8%BD%AC%E5%9E%8B%E8%BF%98%E6%98%AF%E5%9D%9A%E6%8C%81\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>转型还是坚持</h2>\n<h3 id=\"放大转型\"><a href=\"#%E6%94%BE%E5%A4%A7%E8%BD%AC%E5%9E%8B\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>放大转型</h3>\n<p>之前被视为产品中单独的一个功能特性，成为产品的全部。</p>\n<h3 id=\"缩小转型\"><a href=\"#%E7%BC%A9%E5%B0%8F%E8%BD%AC%E5%9E%8B\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>缩小转型</h3>\n<p>单独的一个功能不足以支持整个产品。这类转型就是把原来的整个产品转化为一个更大型产品中的一项单独的功能特性。</p>\n<h3 id=\"客户细分市场转型\"><a href=\"#%E5%AE%A2%E6%88%B7%E7%BB%86%E5%88%86%E5%B8%82%E5%9C%BA%E8%BD%AC%E5%9E%8B\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>客户细分市场转型</h3>\n<p>产品的前提假设得到部分证实，解决了相关问题，但针对的是与原本预期不同的顾客。</p>\n<h3 id=\"客户需求转型\"><a href=\"#%E5%AE%A2%E6%88%B7%E9%9C%80%E6%B1%82%E8%BD%AC%E5%9E%8B\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>客户需求转型</h3>\n<p>这种转型也是基于产品的前提假设得到部分证实的情况；目标客户有一个需要解决的问题，只不过它不是我们事先预计的。</p>\n<h3 id=\"平台转型\"><a href=\"#%E5%B9%B3%E5%8F%B0%E8%BD%AC%E5%9E%8B\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>平台转型</h3>\n<p>平台转型指的是从应用产品转为平台产品，或反方向的转化。</p>\n<h3 id=\"商业架构转型\"><a href=\"#%E5%95%86%E4%B8%9A%E6%9E%B6%E6%9E%84%E8%BD%AC%E5%9E%8B\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>商业架构转型</h3>\n<p>这个转型的概念借用了杰弗里·摩尔（Geoffrey Moore）的理论。他观察到公司一般会在两种主要的商业架构中选其一：高利润低产量（复杂系统）模式，或低利润高产量（规模运营）模式。前者经常和企业对企业（B2B）或企业销售流程相关，而后者则与消费类产品相关（但也有一些明显的例外情况）。</p>\n<h3 id=\"价值获取转型\"><a href=\"#%E4%BB%B7%E5%80%BC%E8%8E%B7%E5%8F%96%E8%BD%AC%E5%9E%8B\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>价值获取转型</h3>\n<p>有很多方法来获取公司创造的价值。这些方法通常被称为货币化模式或收入模式。但是这类术语的局限很大。货币化概念的潜在含义在于，它是产品的一种独立“功能”，可以被任意添加或去除。在现实中，获取价值是产品前提假设中的固有部分。通常，公司获取价值方式的转变，会对业务的其他部分、产品和市场营销战略造成深远的影响。</p>\n<h3 id=\"增长引擎转型\"><a href=\"#%E5%A2%9E%E9%95%BF%E5%BC%95%E6%93%8E%E8%BD%AC%E5%9E%8B\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>增长引擎转型</h3>\n<p>带动新创企业成长的增长引擎主要有三种：病毒式、黏着式和付费式。</p>\n<h3 id=\"渠道转型\"><a href=\"#%E6%B8%A0%E9%81%93%E8%BD%AC%E5%9E%8B\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>渠道转型</h3>\n<p>渠道转型认为，可以通过不同的渠道实现相同的基本解决方案，而且效率更高。只要公司放弃了过去复杂的销售流程，转向针对终端顾客“直接销售”，那么渠道转型就发生了。</p>\n<h3 id=\"技术转型\"><a href=\"#%E6%8A%80%E6%9C%AF%E8%BD%AC%E5%9E%8B\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>技术转型</h3>\n<p>成熟企业极擅长这类转型，因为很多东西并没有改变：顾客细分市场相同，顾客的问题相同，价值获取模式相同，渠道合作方也是相同的。唯一的问题是，新技术是否能比已有技术提供更优越的价格和产品性能。</p>\n<h1 id=\"加速\"><a href=\"#%E5%8A%A0%E9%80%9F\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>加速</h1>\n<p>批量生产，人才成长，适应发展速度，营造创新氛围。</p>","frontmatter":{"title":"阅读笔记《精益创业：新创企业的成长思维》","date":"2017-02-24T14:55:08.000Z","category":"阅读笔记","tags":["互联网","创业","管理","阅读"],"cover":"/images/lean.startup.png"},"tableOfContents":"<ul>\n<li><a href=\"/posts/the-lean-startup/#%E5%BA%8F\">序</a></li>\n<li>\n<p><a href=\"/posts/the-lean-startup/#%E6%84%BF%E6%99%AF%EF%BC%9A%E7%BB%8F%E8%AF%81%E5%AE%9E%E7%9A%84%E8%AE%A4%E7%9F%A5%EF%BC%88validated-learning%EF%BC%89\">愿景：经证实的认知（Validated Learning）</a></p>\n<ul>\n<li><a href=\"/posts/the-lean-startup/#%E5%BC%80%E7%AB%AF\">开端</a></li>\n<li><a href=\"/posts/the-lean-startup/#%E5%AE%9A%E4%B9%89\">定义</a></li>\n<li><a href=\"/posts/the-lean-startup/#%E5%AD%A6%E4%B9%A0\">学习</a></li>\n<li><a href=\"/posts/the-lean-startup/#%E5%AE%9E%E9%AA%8C\">实验</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"/posts/the-lean-startup/#%E9%A9%BE%E9%A9%AD%EF%BC%9A%E5%BC%80%E5%8F%91-%E6%B5%8B%E9%87%8F-%E8%AE%A4%E7%9F%A5%EF%BC%88build-measure-learn%EF%BC%89%EF%BC%8C%E5%8F%8D%E9%A6%88%E5%BE%AA%E7%8E%AF\">驾驭：开发-测量-认知（Build-Measure-Learn），反馈循环</a></p>\n<ul>\n<li><a href=\"/posts/the-lean-startup/#%E8%A1%A1%E9%87%8F\">衡量</a></li>\n<li>\n<p><a href=\"/posts/the-lean-startup/#%E8%BD%AC%E5%9E%8B%E8%BF%98%E6%98%AF%E5%9D%9A%E6%8C%81\">转型还是坚持</a></p>\n<ul>\n<li><a href=\"/posts/the-lean-startup/#%E6%94%BE%E5%A4%A7%E8%BD%AC%E5%9E%8B\">放大转型</a></li>\n<li><a href=\"/posts/the-lean-startup/#%E7%BC%A9%E5%B0%8F%E8%BD%AC%E5%9E%8B\">缩小转型</a></li>\n<li><a href=\"/posts/the-lean-startup/#%E5%AE%A2%E6%88%B7%E7%BB%86%E5%88%86%E5%B8%82%E5%9C%BA%E8%BD%AC%E5%9E%8B\">客户细分市场转型</a></li>\n<li><a href=\"/posts/the-lean-startup/#%E5%AE%A2%E6%88%B7%E9%9C%80%E6%B1%82%E8%BD%AC%E5%9E%8B\">客户需求转型</a></li>\n<li><a href=\"/posts/the-lean-startup/#%E5%B9%B3%E5%8F%B0%E8%BD%AC%E5%9E%8B\">平台转型</a></li>\n<li><a href=\"/posts/the-lean-startup/#%E5%95%86%E4%B8%9A%E6%9E%B6%E6%9E%84%E8%BD%AC%E5%9E%8B\">商业架构转型</a></li>\n<li><a href=\"/posts/the-lean-startup/#%E4%BB%B7%E5%80%BC%E8%8E%B7%E5%8F%96%E8%BD%AC%E5%9E%8B\">价值获取转型</a></li>\n<li><a href=\"/posts/the-lean-startup/#%E5%A2%9E%E9%95%BF%E5%BC%95%E6%93%8E%E8%BD%AC%E5%9E%8B\">增长引擎转型</a></li>\n<li><a href=\"/posts/the-lean-startup/#%E6%B8%A0%E9%81%93%E8%BD%AC%E5%9E%8B\">渠道转型</a></li>\n<li><a href=\"/posts/the-lean-startup/#%E6%8A%80%E6%9C%AF%E8%BD%AC%E5%9E%8B\">技术转型</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><a href=\"/posts/the-lean-startup/#%E5%8A%A0%E9%80%9F\">加速</a></li>\n</ul>","excerpt":"…"}},{"node":{"fields":{"slug":"/posts/the-secrets-of-silicon-valley"},"html":"<p><img src=\"/images/silicon.valley.png\" alt=\"硅谷\"></p>\n<h1 id=\"读后感\"><a href=\"#%E8%AF%BB%E5%90%8E%E6%84%9F\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>读后感</h1>\n<p>《硅谷之谜》是一本颠覆人们对信息时代的认识、对创新和创业的理解的好书。作者吴军通过介绍硅谷成功的秘诀，揭示了信息时代的特点和方法论。近年来，吴军从技术和管理人员变成了投资人，他对IT领域，尤其是对科技创新因而有了更深入的了解。他根据这些年在硅谷所获得的第一手资料，结合自己的思考，回答了长期以来令大家深感困惑的一个不解之谜，那就是——为什么硅谷在全世界其他地区难以复制？</p>\n<p>在《硅谷之谜》中，吴军站在一个更高的层次，仔细分析了硅谷的起源和发展，对硅谷的创新力进行了深刻剖析，把硅谷的经验提升到了理论高度，并且解释了为什么只有硅谷真正做到了宽容叛逆、宽容失败、多元文化和拒绝平庸。这些特点造就了硅谷几十年的长盛不衰。</p>\n<h1 id=\"摘录\"><a href=\"#%E6%91%98%E5%BD%95\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>摘录</h1>\n<ul>\n<li>\n<p>硅谷代表的是后工业时代——它的做法其实是对工业时代价值观的一种否定。</p>\n</li>\n<li>\n<p>在硅谷3.0时代，创业不再是一件难事，创业者们只需要做好两件事即可：第一，想出真正有创新（而不是抄袭）的点子，并拥有过硬的技术；第二，以最快的速度去实现它。</p>\n</li>\n<li>\n<p>N+1型的叛逆：即站在巨人的肩膀，做得更近一步，带来技术进步，而非简单的抄袭。</p>\n</li>\n<li>\n<p>从某种意义上来讲，硅谷只是由美国为全世界那些想创业、想从科技信息产业中淘金的人提供一个居住、工作和生活的场所，从领土的主权上看硅谷属于美国，而在其他方面（尤其经济和文化）属于全世界。</p>\n</li>\n<li>\n<p>硅谷的独特之处：</p>\n<ul>\n<li>叛逆和对叛逆的宽容</li>\n<li>多元文化</li>\n<li>拒绝平庸</li>\n</ul>\n</li>\n<li>\n<p>科学是一个方法，一个过程，而非一个结论。一个结论是否正确，不能看它是由谁说出来的，而是要看它是怎么得到的。</p>\n</li>\n<li>\n<p>布林和他的同事在考虑什么事情该做，什么事情不该做时，通常只考虑两个因素，即是否能帮助全世界的人，以及是否具有革命性的突破。</p>\n</li>\n<li>\n<p>牛顿找到了开启工业革命大门的钥匙，而瓦特拿着这把钥匙，开启了工业革命的大门。</p>\n</li>\n<li>\n<p>工业时代的科学基础：</p>\n<ul>\n<li>牛顿和机械思维</li>\n<li>泰勒管理理论</li>\n<li>现代工业企业管理制度（资本，生产资料，生产关系，分配制度【零和博弈】，专利制度）</li>\n</ul>\n</li>\n<li>\n<p>信息时代的科学基础：</p>\n<ul>\n<li>维纳和控制论</li>\n<li>香农和信息论</li>\n<li>系统论</li>\n</ul>\n</li>\n<li>\n<p>在大工业时代，效率来自事先的规划和不断重复的操作；而在信息时代，效率来自沟通的带宽（扁平式管理）和共同遵守的协议（契约精神）。</p>\n</li>\n<li>\n<p>硅谷有幸诞生在三论提出之后，采用了一种全新的方法论来指导发展，这是硅谷成功的根本原因。</p>\n</li>\n</ul>\n<h1 id=\"工程师的五个等级：\"><a href=\"#%E5%B7%A5%E7%A8%8B%E5%B8%88%E7%9A%84%E4%BA%94%E4%B8%AA%E7%AD%89%E7%BA%A7%EF%BC%9A\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>工程师的五个等级：</h1>\n<p><img src=\"/images/five.class.engineer.png\" alt=\"工程师的五个等级\"></p>\n<h2 id=\"第五等的工程师\"><a href=\"#%E7%AC%AC%E4%BA%94%E7%AD%89%E7%9A%84%E5%B7%A5%E7%A8%8B%E5%B8%88\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>第五等的工程师</h2>\n<p>是我们在前面提到的能够独立设计和实现一项功能的人。这是对工程师的基本要求，如果一个人只是懂一点工程实现的手段，需要别人告诉他怎么做，那最多算是助理工程师或者技工，不在我们讨论的工程师之列。</p>\n<h2 id=\"第四等的工程师\"><a href=\"#%E7%AC%AC%E5%9B%9B%E7%AD%89%E7%9A%84%E5%B7%A5%E7%A8%8B%E5%B8%88\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>第四等的工程师</h2>\n<p>第四等的工程师就需要有点产品头脑了，也就是说他们在做一件事之前，要知道所做出来的东西是否有用、易用，是否便于维护，是否性能稳定，等等。除了要具备产品设计方面的基本知识，还要具有一定的领导才能，能在整个产品的生命周期从头到尾将一个产品负责到底。这在很多硅谷的公司里，基本上是一个高级工程师所应有的基本素质。对大部分工程师来讲，这些素质不是一个工学院就能培养出来的，而是需要在工业界实际锻炼三四年甚至更长的时间。当然，个别天赋很好的年轻人在学校里就具备了这种素质，但这是可遇不可求的。</p>\n<h2 id=\"第三等的工程师\"><a href=\"#%E7%AC%AC%E4%B8%89%E7%AD%89%E7%9A%84%E5%B7%A5%E7%A8%8B%E5%B8%88\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>第三等的工程师</h2>\n<p>第三等的工程师可以做出行业里最好的产品。他们与第四等工程师有着质的差别，这不仅反映在技术水平、对市场的了解、对用户心理的了解以及组织能力等诸方面，而且也反映在悟性的差异上。当然，这种悟性很多是后天培养出来的，但这就需要更长的时间了。有些人从工作一开始，可能需要十年八年，经过多次失败，不断总结，终于在某个时间点豁然开朗。而另一些人可能非常幸运，在一开始就有幸和最优秀的人一起工作，加上善于学习，五六年下来就能达到第三等的水平。在硅谷，有极少数工程师只花了五六年时间就达到了这个水平。但是，即使一个人再聪明，基础再好，也需要在工程上花足够的时间才能达到这个水平，一个年轻人工作了四五年就开始做行政管理工作，基本上就和这个水平无缘了。</p>\n<h2 id=\"第二等的工程师\"><a href=\"#%E7%AC%AC%E4%BA%8C%E7%AD%89%E7%9A%84%E5%B7%A5%E7%A8%8B%E5%B8%88\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>第二等的工程师</h2>\n<p>第二等的工程师是那些可以给世界带来惊喜的人，比如实现第一台实用化个人电脑的沃兹尼亚克、DSL之父约翰·西奥菲注7、iPhone和GoogleGlass的总设计师，以及前面提到的鲁宾、狄恩和戈玛瓦特等。他们与第三四五等工程师的差别在于其工作的原创性以及对世界的影响力。当然，他们的工作不是科学研究，这一点和科学家毕竟不同注。</p>\n<h2 id=\"第一等的工程师\"><a href=\"#%E7%AC%AC%E4%B8%80%E7%AD%89%E7%9A%84%E5%B7%A5%E7%A8%8B%E5%B8%88\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>第一等的工程师</h2>\n<p>第一等的工程师是开创一个全新行业的人，历史上有爱迪生、特斯拉、福特，二战后有保时捷（FerdinandPorsche，1875—1951）博士、本田宗一郎（1906—1991）和硅谷的诺伊斯等人。这些工程师不仅在技术和产品等各个方向上与第二等的工程师有了质的差别，而且在经验和管理上也是好手，他们通常也是企业家，并通过自己的产品改变了世界。这一类人常常是可遇而不可求的，正如朗道列出的第一等物理学家只有个位数一样，第一等的工程师也是如此。朗道认为每一等物理学家之间的贡献相差十倍，每一等工程师的差距也是这么大。当然，很多企业家都希望能遇到一些第二等，甚至第一等的工程师，但是这需要一个由工程师构建的完整金字塔：要想出几个第一等的工程师，就需要有足够数量的第二等工程师作为基础；同样，产生第二等工程师要靠大量的第三等工程师作为基础。在一个产业里，不可能指望在一大堆第五等工程师的基础上，突然冒出一两个第一或者第二等的工程师的。甚至有时，即使高薪聘请来一个第二等的工程师，如果没有第三、第四等的工程师与之配合，他也很难直接依靠第五等的人做出一流产品。</p>\n<h2 id=\"硅谷的工程师文化\"><a href=\"#%E7%A1%85%E8%B0%B7%E7%9A%84%E5%B7%A5%E7%A8%8B%E5%B8%88%E6%96%87%E5%8C%96\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>硅谷的工程师文化</h2>\n<p>在硅谷，人们能够有幸接触到第二等工程师，这些人有时决定了一个公司产品所能达到的高度。而在公司里，真正干活的主力是第三、第四等工程师，这一类人比较多。而在中国的IT企业里，大家喜欢当官，因此在第五等工程师之上，会出现断层，从而影响产品开发的质量和原创性。</p>\n<p>硅谷工程师文化的第三个特点是全社会对工程师的认可。这种认可不仅包括对工程师的尊重，以及给予他们较高的社会地位，还包括允许不同等级的工程师在收入上有巨大差异。既然每一等工程师的贡献可以相差十倍，为什么他们的收入不能够相差十倍？当然很多人会反对这种收入差距过大的做法，比如欧洲的社会党人和美国的工会。但是客观规律不以人的意志为转移，如果拉大收入差距能够最大程度地发展生产力，而平均主义不能，那么采用第一种分配方式的地区无疑会获得更快的发展，硅谷则是这样的地区。</p>\n<p>在硅谷很多公司内部，不同层级、不同贡献的工程师之间，工资和奖金的差异其实不大，但是期权起到了调节他们收入的主要作用。这使得第二等工程师的收入真的可以比第三等工程师多出一个数量级，而第三等和第四等之间，收入可能也有数量级之差。很多企业请我介绍一些Google的工程师，而且张口就要最好的，但我明确表示那些最好的工程师所要的薪酬包大部分公司可能都付不起，因为在大部分企业的想象中，不同的工程师之间收入差距在两三倍就算是很多了，而在硅谷的明星企业，这种差距是数量级的。在金字塔尖的那些工程师的收入非常高，甚至高过高层管理人员，再加上社会对他们的认可，转行政管理的欲望并不强烈。在硅谷的公司里，工程师们有专门的上升通道，这才保证了硅谷的工程师文化得以很好的维持。</p>\n<p>世界上很多国家和地区对工程师本身还是很尊重和重视的，比如在法国要取得工程师的资格难度很大，需要在大学先读预科，然后才能进入工学院获得工程学位，并成为工程师。但是法国的工程师在收入上没有很大的差异，第四等和第三等的工程师数量很多，但缺乏更高级别的工程师，因为大家努力向上走的意愿并不强烈。毕竟，成为一个优秀的工程师需要经过很多年的努力。这也导致了欧洲很多国家的创新力不足。</p>","frontmatter":{"title":"阅读笔记《硅谷之谜》","date":"2016-12-19T01:35:08.000Z","category":"阅读笔记","tags":["硅谷","吴军","互联网","阅读"],"cover":"/images/see.jpg"},"tableOfContents":"<ul>\n<li><a href=\"/posts/the-secrets-of-silicon-valley/#%E8%AF%BB%E5%90%8E%E6%84%9F\">读后感</a></li>\n<li><a href=\"/posts/the-secrets-of-silicon-valley/#%E6%91%98%E5%BD%95\">摘录</a></li>\n<li>\n<p><a href=\"/posts/the-secrets-of-silicon-valley/#%E5%B7%A5%E7%A8%8B%E5%B8%88%E7%9A%84%E4%BA%94%E4%B8%AA%E7%AD%89%E7%BA%A7%EF%BC%9A\">工程师的五个等级：</a></p>\n<ul>\n<li><a href=\"/posts/the-secrets-of-silicon-valley/#%E7%AC%AC%E4%BA%94%E7%AD%89%E7%9A%84%E5%B7%A5%E7%A8%8B%E5%B8%88\">第五等的工程师</a></li>\n<li><a href=\"/posts/the-secrets-of-silicon-valley/#%E7%AC%AC%E5%9B%9B%E7%AD%89%E7%9A%84%E5%B7%A5%E7%A8%8B%E5%B8%88\">第四等的工程师</a></li>\n<li><a href=\"/posts/the-secrets-of-silicon-valley/#%E7%AC%AC%E4%B8%89%E7%AD%89%E7%9A%84%E5%B7%A5%E7%A8%8B%E5%B8%88\">第三等的工程师</a></li>\n<li><a href=\"/posts/the-secrets-of-silicon-valley/#%E7%AC%AC%E4%BA%8C%E7%AD%89%E7%9A%84%E5%B7%A5%E7%A8%8B%E5%B8%88\">第二等的工程师</a></li>\n<li><a href=\"/posts/the-secrets-of-silicon-valley/#%E7%AC%AC%E4%B8%80%E7%AD%89%E7%9A%84%E5%B7%A5%E7%A8%8B%E5%B8%88\">第一等的工程师</a></li>\n<li><a href=\"/posts/the-secrets-of-silicon-valley/#%E7%A1%85%E8%B0%B7%E7%9A%84%E5%B7%A5%E7%A8%8B%E5%B8%88%E6%96%87%E5%8C%96\">硅谷的工程师文化</a></li>\n</ul>\n</li>\n</ul>","excerpt":"读后感 《硅谷之谜》是一本颠覆人们对信息时代的认识、对创新和创业的理解的好书。作者吴军通过介绍硅谷成功的秘诀，揭示了信息时代的特点和方法论。近年来，吴军从技术和管理人员变成了投资人，他对IT…"}},{"node":{"fields":{"slug":"/posts/array-filter-map-reduce-in-js"},"html":"<h1 id=\"写在前面的话\"><a href=\"#%E5%86%99%E5%9C%A8%E5%89%8D%E9%9D%A2%E7%9A%84%E8%AF%9D\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>写在前面的话</h1>\n<p>前几天<a href=\"/array-filter-trick\">写了篇文章</a>科普了下Javascript中<code class=\"language-text\">Array.filter()</code>的妙用，后来无意间发现了<a href=\"http://atendesigngroup.com/blog/array-map-filter-and-reduce-js\">一篇好文章</a>，一次性科普了三个API：<code class=\"language-text\">filter</code>、<code class=\"language-text\">map</code>和<code class=\"language-text\">reduce</code>，生动形象，尤其是配图，显然是用了心思。下面是译文：</p>\n<h1 id=\"译文\"><a href=\"#%E8%AF%91%E6%96%87\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>译文</h1>\n<p><img src=\"https://zerosoul.github.io/2016/12/06/array-filter-map-reduce-in-js/array-1.png\" alt=\"array top image\"></p>\n<p>最近，一直在为一个客户做一个视觉化数据的项目，从服务端API拉取数据回来然后转换出视觉效果，自然少不了大量的数据操作，为此我一再使用Javascript中的Array 三个API：<code class=\"language-text\">filter</code>、<code class=\"language-text\">map</code>和<code class=\"language-text\">reduce</code>。</p>\n<p><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map\">Map</a>、<a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter\">Filter</a>和<a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/reduce\">Reduce</a>常常被用于对一个数组做一些操作，进而转换成某个新的东西（数据类型不一定还是数组哦~）。下面是我对这三个API的直观认识：</p>\n<h1 id=\"map\"><a href=\"#map\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Map</h1>\n<p><img src=\"https://zerosoul.github.io/2016/12/06/array-filter-map-reduce-in-js/array-map.png\" alt=\"array-map\"><br>\n你想将一个数组中的每一项做个转换，结果生成了一个新数组，并且新数组的长度和原数组一致。</p>\n<h1 id=\"filter\"><a href=\"#filter\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Filter</h1>\n<p><img src=\"https://zerosoul.github.io/2016/12/06/array-filter-map-reduce-in-js/array-filter.png\" alt=\"array-filter\"><br>\n你想将一个数组做一个过滤，按照某规则提取出一些特定的项来。结果也生成了一个新数组，但新数组的长度小于或等于原数组。</p>\n<h1 id=\"reduce\"><a href=\"#reduce\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Reduce</h1>\n<p><img src=\"https://zerosoul.github.io/2016/12/06/array-filter-map-reduce-in-js/array-reduce.png\" alt=\"array-reduce\"><br>\n你想通过遍历一个数组的每一项来计算出一个新东西，最后生成的结果可以是任何类型的变量：一个新数组，一个新对象，一个新布尔值…</p>\n<p><code class=\"language-text\">filter</code>、<code class=\"language-text\">map</code>和<code class=\"language-text\">reduce</code>共同点就是并不会对原数组做任何改动，结果都是生成一个新变量。让我们来看一些例子：</p>\n<h1 id=\"arraymap\"><a href=\"#arraymap\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Array.map()</h1>\n<p>现在我们有一个对象列表，其中每个对象代表的是一种变形金刚（译注：看来这位歪果仁是个变形金刚粉丝）：  </p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">var</span> transformers <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n\n  <span class=\"token punctuation\">{</span>\n\n    name<span class=\"token punctuation\">:</span> <span class=\"token string\">'Optimus Prime'</span><span class=\"token punctuation\">,</span>\n\n    form<span class=\"token punctuation\">:</span> <span class=\"token string\">'Freightliner Truck'</span><span class=\"token punctuation\">,</span>\n\n    team<span class=\"token punctuation\">:</span> <span class=\"token string\">'Autobot'</span>\n\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token punctuation\">{</span>\n\n    name<span class=\"token punctuation\">:</span> <span class=\"token string\">'Megatron'</span><span class=\"token punctuation\">,</span>\n\n    form<span class=\"token punctuation\">:</span> <span class=\"token string\">'Gun'</span><span class=\"token punctuation\">,</span>\n\n    team<span class=\"token punctuation\">:</span> <span class=\"token string\">'Decepticon'</span>\n\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token punctuation\">{</span>\n\n    name<span class=\"token punctuation\">:</span> <span class=\"token string\">'Bumblebee'</span><span class=\"token punctuation\">,</span>\n\n    form<span class=\"token punctuation\">:</span> <span class=\"token string\">'VW Beetle'</span><span class=\"token punctuation\">,</span>\n\n    team<span class=\"token punctuation\">:</span> <span class=\"token string\">'Autobot'</span>\n\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token punctuation\">{</span>\n\n    name<span class=\"token punctuation\">:</span> <span class=\"token string\">'Soundwave'</span><span class=\"token punctuation\">,</span>\n\n    form<span class=\"token punctuation\">:</span> <span class=\"token string\">'Walkman'</span><span class=\"token punctuation\">,</span>\n\n    team<span class=\"token punctuation\">:</span> <span class=\"token string\">'Decepticon'</span>\n\n  <span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code></pre>\n      </div>\n<p>那么，问题来了，如果想得到一个包含所有变形（form）的列表该怎么做呢？<code class=\"language-text\">Array.map()</code>让一切变得简单。它的基本使用语法是这样的：  </p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\">Array<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token function\">callback</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n      </div>\n<p>当然，还有种更复杂点的语法场景，只不过不常用到：  </p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\">Array<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token function\">callback</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span> index<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> array<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span> thisArg<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n      </div>\n<p><code class=\"language-text\">callback</code>会遍历数组的每个元素，在其中返回的每一个数值将会组成新数组。<code class=\"language-text\">callback</code>有多种书写方式：<br>\n命名函数：  </p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">getForm</span><span class=\"token punctuation\">(</span>transformer<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token keyword\">return</span> transformer<span class=\"token punctuation\">.</span>form<span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">var</span> robotsInDisguise <span class=\"token operator\">=</span> transformers<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>getForm<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/* robosInDisguise === ['Freightliner Truck', 'Gun', 'VW Beetle', 'Walkman'] */</span></code></pre>\n      </div>\n<p>匿名函数：  </p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\">robotsInDisguise <span class=\"token operator\">=</span> transformers<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span>transformer<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token keyword\">return</span> transformer<span class=\"token punctuation\">.</span>form<span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n      </div>\n<p>箭头函数：  </p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\">robotsInDisguise <span class=\"token operator\">=</span> transformers<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>transformer <span class=\"token operator\">=></span> transformer<span class=\"token punctuation\">.</span>form<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n      </div>\n<p>ES2015的箭头函数和<code class=\"language-text\">Array.map()</code>搭配使用简直不能更爽了！</p>\n<h1 id=\"arrayfilter\"><a href=\"#arrayfilter\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Array.filter()</h1>\n<p>语法：  </p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\">Array<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token function\">callback</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n      </div>\n<p><code class=\"language-text\">callback</code>将数组元素当参数传入，并返回一个布尔值。当返回值为真时，该元素被加入新数组中，反之则被过滤掉。<br>\n现在我们把这些变形金刚过滤出<strong>汽车人</strong>(Autobots)</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">isAutobot</span><span class=\"token punctuation\">(</span>transformer<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token keyword\">return</span> transformer<span class=\"token punctuation\">.</span>team <span class=\"token operator\">===</span> ‘Autobot’<span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">var</span> autobots <span class=\"token operator\">=</span> transformers<span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span>isAutobot<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/**\n\nautobots ==  [\n\n  {\n\n    name: 'Optimus Prime',\n\n    form: 'Freightliner Truck',\n\n    team: 'Autobot'\n\n  },\n\n  {\n\n    name: 'Bumblebee',\n\n    form: 'VW Beetle',\n\n    team: 'Autobot'\n\n  }\n\n]\n\n*/</span></code></pre>\n      </div>\n<h1 id=\"arrayreduce\"><a href=\"#arrayreduce\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Array.reduce()</h1>\n<p><code class=\"language-text\">Array.reduce()</code>是通过遍历每个数组元素对其做运算，因此，也是三个API之间最富有技巧的，其使用语法也略显复杂：  </p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\">Array<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function\">reduce</span><span class=\"token punctuation\">(</span><span class=\"token function\">callback</span><span class=\"token punctuation\">(</span>previousValue<span class=\"token punctuation\">,</span> currentValue<span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span> index<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> array<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> initialValue<span class=\"token punctuation\">)</span></code></pre>\n      </div>\n<p>谨记一条：我们是将数组元素通过遍历减少到一个值。比如现在有一组<strong>可组合变形金刚</strong>（译者注：我也不知道什么鬼，该怎么翻译，原词：Construction Transformers），它们能够组合成更大的变形金刚，我们可以通过代码来做出这样的组合：</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">var</span> constructicons <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n\n  <span class=\"token punctuation\">{</span>\n\n    name<span class=\"token punctuation\">:</span> <span class=\"token string\">'Scrapper'</span><span class=\"token punctuation\">,</span>\n\n    form<span class=\"token punctuation\">:</span> <span class=\"token string\">'Freightliner Truck'</span><span class=\"token punctuation\">,</span>\n\n    team<span class=\"token punctuation\">:</span> <span class=\"token string\">'Decepticon'</span><span class=\"token punctuation\">,</span>\n\n    bodyPart<span class=\"token punctuation\">:</span> <span class=\"token string\">'rightLeg'</span>\n\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token punctuation\">{</span>\n\n    name<span class=\"token punctuation\">:</span> <span class=\"token string\">'Hook'</span><span class=\"token punctuation\">,</span>\n\n    form<span class=\"token punctuation\">:</span> <span class=\"token string\">'Mobile Crane'</span><span class=\"token punctuation\">,</span>\n\n    team<span class=\"token punctuation\">:</span> <span class=\"token string\">'Decepticon'</span><span class=\"token punctuation\">,</span>\n\n    bodyPart<span class=\"token punctuation\">:</span> <span class=\"token string\">'upperTorso'</span>\n\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token punctuation\">{</span>\n\n    name<span class=\"token punctuation\">:</span> <span class=\"token string\">'Bonecrusher'</span><span class=\"token punctuation\">,</span>\n\n    form<span class=\"token punctuation\">:</span> <span class=\"token string\">'Bulldozer'</span><span class=\"token punctuation\">,</span>\n\n    team<span class=\"token punctuation\">:</span> <span class=\"token string\">'Decepticon'</span><span class=\"token punctuation\">,</span>\n\n    bodyPart<span class=\"token punctuation\">:</span> <span class=\"token string\">'leftArm'</span>\n\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token punctuation\">{</span>\n\n    name<span class=\"token punctuation\">:</span> <span class=\"token string\">'Scavenger'</span><span class=\"token punctuation\">,</span>\n\n    form<span class=\"token punctuation\">:</span> <span class=\"token string\">'Excavator'</span><span class=\"token punctuation\">,</span>\n\n    team<span class=\"token punctuation\">:</span> <span class=\"token string\">'Decepticon'</span><span class=\"token punctuation\">,</span>\n\n    bodyPart<span class=\"token punctuation\">:</span> <span class=\"token string\">'rightArm'</span>\n\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token punctuation\">{</span>\n\n    name<span class=\"token punctuation\">:</span> <span class=\"token string\">'Mixmaster'</span><span class=\"token punctuation\">,</span>\n\n    form<span class=\"token punctuation\">:</span> <span class=\"token string\">'Concrete Mixer'</span><span class=\"token punctuation\">,</span>\n\n    team<span class=\"token punctuation\">:</span> <span class=\"token string\">'Decepticon'</span><span class=\"token punctuation\">,</span>\n\n    bodyPart<span class=\"token punctuation\">:</span> <span class=\"token string\">'leftLeg'</span>\n\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token punctuation\">{</span>\n\n    name<span class=\"token punctuation\">:</span> <span class=\"token string\">'Long Haul'</span><span class=\"token punctuation\">,</span>\n\n    form<span class=\"token punctuation\">:</span> <span class=\"token string\">'Dump Truck'</span><span class=\"token punctuation\">,</span>\n\n    team<span class=\"token punctuation\">:</span> <span class=\"token string\">'Decepticon'</span><span class=\"token punctuation\">,</span>\n\n    bodyPart<span class=\"token punctuation\">:</span> <span class=\"token string\">'lowerTorso'</span>\n\n  <span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code></pre>\n      </div>\n<p>Reduce的<code class=\"language-text\">callback</code>需要至少两个参数。第一个是从上次遍历中返回的一个值，第二个是当前数组遍历到的一个值，返回值又将当做第一个参数被传入到下一次遍历。</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">assemble</span><span class=\"token punctuation\">(</span>combiner<span class=\"token punctuation\">,</span> transformer<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token comment\">//每次遍历都会将当前的变形金刚（transformer）的名字加入到组合器（combiner）的form中去。</span>\n\n  combiner<span class=\"token punctuation\">.</span>form<span class=\"token punctuation\">[</span>transformer<span class=\"token punctuation\">.</span>bodyPart<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> transformer<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> combiner<span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span></code></pre>\n      </div>\n<p>这样，我们可以在调用reduce的时候，将<code class=\"language-text\">assemble</code>当做第一个参数传入，第二个参数是用来初次调用时的初始数据。接下来的例子便是我们提供一个仅仅有名字（name）和派别（team）的变形金刚，通过reduce中的<code class=\"language-text\">assemble</code>我们来组合成一个强大的变形金刚吧！</p>\n<p><img src=\"https://zerosoul.github.io/2016/12/06/array-filter-map-reduce-in-js/transform.gif\" alt=\"transforming\"></p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">var</span> devastator <span class=\"token operator\">=</span> constructicons<span class=\"token punctuation\">.</span><span class=\"token function\">reduce</span><span class=\"token punctuation\">(</span>assemble<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n\n  name<span class=\"token punctuation\">:</span> ‘Devastator’<span class=\"token punctuation\">,</span>\n\n  team<span class=\"token punctuation\">:</span> ‘Decepticon’<span class=\"token punctuation\">,</span>\n\n  form<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/*\ndevastator == {\n\n  name: ‘Devastator’,\n\n  team: ‘Decepticon’,\n\n  form: {\n\n    leftArm: \"Bonecrusher\"\n\n    leftLeg: \"Mixmaster\"\n\n    lowerTorso: \"Long Haul\"\n\n    rightArm: \"Scavenger\"\n\n    rightLeg: \"Scrapper\"\n\n    upperTorso: \"Hook\"\n\n  }\n\n}\n\n*/</span></code></pre>\n      </div>\n<p>这些三个基本API一旦组合起来使用，也是很强大的。在此只是根据自己的使用经验抛砖引玉，想进一步了解的同学可以移步万能的<a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array\">MDN有关Array API的文档</a>。</p>","frontmatter":{"title":"Javascript Array中的filter、map和reduce","date":"2016-12-06T09:31:37.000Z","category":"它山之石","tags":["译文","技术","javascript","array"],"cover":"https://zerosoul.github.io/2016/12/06/array-filter-map-reduce-in-js/array-1.png"},"tableOfContents":"<ul>\n<li><a href=\"/posts/array-filter-map-reduce-in-js/#%E5%86%99%E5%9C%A8%E5%89%8D%E9%9D%A2%E7%9A%84%E8%AF%9D\">写在前面的话</a></li>\n<li><a href=\"/posts/array-filter-map-reduce-in-js/#%E8%AF%91%E6%96%87\">译文</a></li>\n<li><a href=\"/posts/array-filter-map-reduce-in-js/#map\">Map</a></li>\n<li><a href=\"/posts/array-filter-map-reduce-in-js/#filter\">Filter</a></li>\n<li><a href=\"/posts/array-filter-map-reduce-in-js/#reduce\">Reduce</a></li>\n<li><a href=\"/posts/array-filter-map-reduce-in-js/#arraymap\">Array.map()</a></li>\n<li><a href=\"/posts/array-filter-map-reduce-in-js/#arrayfilter\">Array.filter()</a></li>\n<li><a href=\"/posts/array-filter-map-reduce-in-js/#arrayreduce\">Array.reduce()</a></li>\n</ul>","excerpt":"写在前面的话 前几天 写了篇文章 科普了下Javascript中 的妙用，后来无意间发现了 一篇好文章 ，一次性科普了三个API： 、 和 ，生动形象，尤其是配图，显然是用了心思。下面是译文： 译文 最近，一直在为一个客户做一个视觉化数据的项目，从服务端API…"}},{"node":{"fields":{"slug":"/posts/array-filter-trick"},"html":"<h1 id=\"filter简述\"><a href=\"#filter%E7%AE%80%E8%BF%B0\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>filter简述</h1>\n<p><code class=\"language-text\">filter</code>是Javascript中Array常用的操作，它用于把Array的某些元素过滤掉，然后返回剩下的元素。</p>\n<p>和<a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map\"><code class=\"language-text\">map</code></a>类似，Array的<code class=\"language-text\">filter</code>也接收一个函数。但是和map不同的是，<code class=\"language-text\">filter</code>把传入的函数依次作用于每个元素，然后根据返回值是<code class=\"language-text\">true</code>还是<code class=\"language-text\">false</code>决定保留还是丢弃该元素。</p>\n<p>例如，在一个Array中，删掉偶数，只保留奇数，可以这么写：  </p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">var</span> arr <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6</span><span class=\"token punctuation\">,</span> <span class=\"token number\">9</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token number\">15</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">var</span> r <span class=\"token operator\">=</span> arr<span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">return</span> x <span class=\"token operator\">%</span> <span class=\"token number\">2</span> <span class=\"token operator\">!==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nr<span class=\"token punctuation\">;</span> <span class=\"token comment\">// [1, 5, 9, 15]</span></code></pre>\n      </div>\n<p>把一个Array中的空字符串删掉，可以这么写：  </p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">var</span> arr <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'A'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'B'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> undefined<span class=\"token punctuation\">,</span> <span class=\"token string\">'C'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">var</span> r <span class=\"token operator\">=</span> arr<span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">return</span> s <span class=\"token operator\">&amp;&amp;</span> s<span class=\"token punctuation\">.</span><span class=\"token function\">trim</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 注：IE9(不包含IE9)以下的版本没有trim()方法</span>\n\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\narr<span class=\"token punctuation\">;</span> <span class=\"token comment\">// ['A', 'B', 'C']</span></code></pre>\n      </div>\n<p>可见用<code class=\"language-text\">filter</code>这个高阶函数，关键在于正确实现一个“筛选”函数。</p>\n<h1 id=\"回调函数\"><a href=\"#%E5%9B%9E%E8%B0%83%E5%87%BD%E6%95%B0\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>回调函数</h1>\n<p><code class=\"language-text\">filter</code>接收的回调函数，其实可以有多个参数。通常我们仅使用第一个参数，表示Array的某个元素。回调函数还可以接收另外两个参数，表示元素的位置和数组本身：  </p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">var</span> arr <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'A'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'B'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'C'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">var</span> r <span class=\"token operator\">=</span> arr<span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>element<span class=\"token punctuation\">,</span> index<span class=\"token punctuation\">,</span> self<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>element<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 依次打印'A', 'B', 'C'</span>\n\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>index<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 依次打印0, 1, 2</span>\n\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// self就是变量arr</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n      </div>\n<p>利用<code class=\"language-text\">filter</code>，可以巧妙地去除Array的重复元素：  </p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">var</span> r<span class=\"token punctuation\">,</span>\n\n    arr <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'apple'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'strawberry'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'banana'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'pear'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'apple'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'orange'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'orange'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'strawberry'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\nr <span class=\"token operator\">=</span> arr<span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>element<span class=\"token punctuation\">,</span> index<span class=\"token punctuation\">,</span> self<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">return</span> self<span class=\"token punctuation\">.</span><span class=\"token function\">indexOf</span><span class=\"token punctuation\">(</span>element<span class=\"token punctuation\">)</span> <span class=\"token operator\">===</span> index<span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>r<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n      </div>\n<p>去除重复元素依靠的是<code class=\"language-text\">indexOf</code>总是返回第一个元素的位置，后续的重复元素位置与<code class=\"language-text\">indexOf</code>返回的位置不相等，因此被<code class=\"language-text\">filter</code>滤掉了。</p>","frontmatter":{"title":"Javascript中Array.filter()的妙用","date":"2016-11-29T09:31:37.000Z","category":"技术","tags":["javascript","array","filter"],"cover":null},"tableOfContents":"<ul>\n<li><a href=\"/posts/array-filter-trick/#filter%E7%AE%80%E8%BF%B0\">filter简述</a></li>\n<li><a href=\"/posts/array-filter-trick/#%E5%9B%9E%E8%B0%83%E5%87%BD%E6%95%B0\">回调函数</a></li>\n</ul>","excerpt":"filter简述 是Javascript中Array常用的操作，它用于把Array的某些元素过滤掉，然后返回剩下的元素。 和 类似，Array的 也接收一个函数。但是和map不同的是， 把传入的函数依次作用于每个元素，然后根据返回值是 还是 决定保留还是丢弃该元素。 例如，在一个Array…"}},{"node":{"fields":{"slug":"/posts/20-humanity-witness"},"html":"<h1 id=\"奥古斯特·桑德（1876-1964）\"><a href=\"#%E5%A5%A5%E5%8F%A4%E6%96%AF%E7%89%B9%C2%B7%E6%A1%91%E5%BE%B7%EF%BC%881876-1964%EF%BC%89\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>奥古斯特·桑德（1876-1964）</h1>\n<p>人像摄影家，时代脸孔的留影者，拍摄了大量日耳曼民族众生相。</p>\n<p><img src=\"/images/20witness/%E5%A4%B1%E4%B8%9A%E8%80%85.jpg\" alt=\"失业者\"></p>\n<p><img src=\"/images/20witness/%E9%9D%A2%E5%8C%85%E5%B8%88%E5%82%85.jpg\" alt=\"面包师傅\"></p>\n<h1 id=\"雅克-亨利·拉蒂格（1894-1986）\"><a href=\"#%E9%9B%85%E5%85%8B-%E4%BA%A8%E5%88%A9%C2%B7%E6%8B%89%E8%92%82%E6%A0%BC%EF%BC%881894-1986%EF%BC%89\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>雅克-亨利·拉蒂格（1894-1986）</h1>\n<p>用爱来拍照，用拍照来写日记，永远7岁的摄影大师。</p>\n<p><img src=\"/images/20witness/%E9%98%BF%E5%8D%A1%E5%B8%8C%E5%B0%94%E5%A4%A7%E9%81%93%E4%B8%8A.jpg\" alt=\"阿卡希尔大道上\"></p>\n<h1 id=\"安德烈·科特兹（1894-1985）\"><a href=\"#%E5%AE%89%E5%BE%B7%E7%83%88%C2%B7%E7%A7%91%E7%89%B9%E5%85%B9%EF%BC%881894-1985%EF%BC%89\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>安德烈·科特兹（1894-1985）</h1>\n<p>众流归宗的元祖，深刻影响了布列松的拍摄技巧，被布列松来信称“真正的老师”。</p>\n<p><img src=\"/images/20witness/%E5%B0%8F%E7%8B%97.jpg\" alt=\"小狗\"></p>\n<h1 id=\"罗曼·维希尼克（1897-1990）\"><a href=\"#%E7%BD%97%E6%9B%BC%C2%B7%E7%BB%B4%E5%B8%8C%E5%B0%BC%E5%85%8B%EF%BC%881897-1990%EF%BC%89\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>罗曼·维希尼克（1897-1990）</h1>\n<p>世界顶尖的显微摄影专家，后来跟拍犹太人日常产生了大量经典作品，并以此闻名。</p>\n<h1 id=\"布拉塞（1899-1984）\"><a href=\"#%E5%B8%83%E6%8B%89%E5%A1%9E%EF%BC%881899-1984%EF%BC%89\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>布拉塞（1899-1984）</h1>\n<p>半路出家，拍摄夜之巴黎而闻名，享有“夜间摄影鼻祖”美誉</p>\n<h1 id=\"维吉（1899-1968）\"><a href=\"#%E7%BB%B4%E5%90%89%EF%BC%881899-1968%EF%BC%89\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>维吉（1899-1968）</h1>\n<p>街头摄影师，城市夜游者。布拉塞一直采用自然光，而维吉清一色用闪光灯照明。</p>\n<p><img src=\"/images/20witness/%E6%AD%BB%E5%B0%B8%E4%B8%8E%E5%B7%A6%E8%BD%AE%E6%89%8B%E6%9E%AA.jpg\" alt=\"死尸与左轮手枪\"></p>\n<p><img src=\"/images/20witness/%E8%94%AC%E8%8F%9C%E8%B4%A9%E5%AD%90.jpeg\" alt=\"蔬菜贩子\"></p>\n<h1 id=\"安塞尔·亚当斯（1902-1984）\"><a href=\"#%E5%AE%89%E5%A1%9E%E5%B0%94%C2%B7%E4%BA%9A%E5%BD%93%E6%96%AF%EF%BC%881902-1984%EF%BC%89\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>安塞尔·亚当斯（1902-1984）</h1>\n<p>风光大师，完全摒弃摄影的记录功能，使摄影成为“纯粹的技术运作，担任美感的表达工具”，以拍摄美国山水著称。</p>\n<p><img src=\"/images/20witness/%E5%A8%81%E5%BB%89%E6%A3%AE%E5%B1%B1.jpg\" alt=\"威廉森山\"></p>\n<h1 id=\"曼纽尔·阿尔瓦雷斯·布拉沃（1902-2002）\"><a href=\"#%E6%9B%BC%E7%BA%BD%E5%B0%94%C2%B7%E9%98%BF%E5%B0%94%E7%93%A6%E9%9B%B7%E6%96%AF%C2%B7%E5%B8%83%E6%8B%89%E6%B2%83%EF%BC%881902-2002%EF%BC%89\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>曼纽尔·阿尔瓦雷斯·布拉沃（1902-2002）</h1>\n<p>墨西哥摄影家</p>\n<h1 id=\"比尔·勃兰特（1904-1983）\"><a href=\"#%E6%AF%94%E5%B0%94%C2%B7%E5%8B%83%E5%85%B0%E7%89%B9%EF%BC%881904-1983%EF%BC%89\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>比尔·勃兰特（1904-1983）</h1>\n<blockquote>\n<p>摄影家要具有婴儿或初入未知国境的旅行者那样的眼光</p>\n</blockquote>\n<p>片子呈现高度反差效果：灰色调子极少，黑白分明。</p>\n<h1 id=\"亨利·卡蒂埃-布列松（1908-2004）\"><a href=\"#%E4%BA%A8%E5%88%A9%C2%B7%E5%8D%A1%E8%92%82%E5%9F%83-%E5%B8%83%E5%88%97%E6%9D%BE%EF%BC%881908-2004%EF%BC%89\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>亨利·卡蒂埃-布列松（1908-2004）</h1>\n<p>摄影这一门，进去是ABC，出来时是HCB。创造出“决定性瞬间”，并不是留住“事物做好的一面”，而是“借由最好的一刹那，来使事件产生全新的意义与境界”，这是他最迷人的地方。</p>\n<p>柯特兹的等是让现实世界的情感更丰富，而布列松等的是怎么使现实世界更接近梦境。</p>\n<p><img src=\"/images/20witness/%E5%B7%B4%E9%BB%8E%E6%85%95%E8%B4%B9%E5%A1%94%E8%A1%97.jpg\" alt=\"巴黎慕费塔街\"></p>\n<h1 id=\"罗伯特·卡帕（1913-1954）\"><a href=\"#%E7%BD%97%E4%BC%AF%E7%89%B9%C2%B7%E5%8D%A1%E5%B8%95%EF%BC%881913-1954%EF%BC%89\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>罗伯特·卡帕（1913-1954）</h1>\n<blockquote>\n<p>如果你的照片拍的不够好，那是因为离炮火不够近。</p>\n</blockquote>\n<p>著名的战地记者，创办了最具影响力的摄影组织：马格南。（马格南：一种两夸脱装的大桶香槟酒，为好友们庆祝生还的聚会上经常喝的）</p>\n<p><img src=\"/images/20witness/%E4%B8%AD%E5%BC%B9%E4%BA%86%EF%BC%88%E8%A5%BF%E7%8F%AD%E7%89%99%E5%89%8D%E7%BA%BF%EF%BC%89.jpg\" alt=\"中弹了（西班牙前线）\"></p>\n<p><img src=\"/images/20witness/%E8%B6%8A%E5%8D%97%E6%88%98%E4%BA%89.jpg\" alt=\"越南战争\"></p>\n<h1 id=\"尤金·史密斯（1918-1978）\"><a href=\"#%E5%B0%A4%E9%87%91%C2%B7%E5%8F%B2%E5%AF%86%E6%96%AF%EF%BC%881918-1978%EF%BC%89\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>尤金·史密斯（1918-1978）</h1>\n<p>理想的浪漫主义者，一辈子都在干新闻记者，替Newsweek、Time、Life拍照。他只拍人，只拍受苦难的人，只拍勇于向命运挑战的人，只拍为别人而付出的人，只拍需要大家关心的人。曾因“水俣专集”引起全世界对污染公害的重视，成为了日本民间英雄。</p>\n<p><img src=\"/images/20witness/%E6%99%BA%E5%AD%90%E5%85%A5%E6%B5%B4.jpeg\" alt=\"智子入浴\"></p>\n<h1 id=\"黛安娜·阿勃丝（1923-1971）\"><a href=\"#%E9%BB%9B%E5%AE%89%E5%A8%9C%C2%B7%E9%98%BF%E5%8B%83%E4%B8%9D%EF%BC%881923-1971%EF%BC%89\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>黛安娜·阿勃丝（1923-1971）</h1>\n<p>拍摄常态中的畸形，畸形中的常态。后来染上严重的周期性忧郁症，又有长期性的肝炎，最后自杀来寻求解脱。</p>\n<p><img src=\"/images/20witness/%E5%93%AD%E6%B3%A3%E7%9A%84%E5%B0%8F%E5%AD%A9.jpg\" alt=\"哭泣的小孩\"></p>\n<p><img src=\"/images/20witness/%E5%8F%8C%E8%83%9E%E8%83%8E.jpg\" alt=\"双胞胎\"></p>\n<h1 id=\"罗伯特·弗兰克（1924-）\"><a href=\"#%E7%BD%97%E4%BC%AF%E7%89%B9%C2%B7%E5%BC%97%E5%85%B0%E5%85%8B%EF%BC%881924-%EF%BC%89\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>罗伯特·弗兰克（1924-）</h1>\n<p>他反对布列松的“决定性时刻”哲学，认为“摄影不该记录无所谓的刹那，摄影不必要摄取情绪最高涨的瞬间”，而采用十分不经意的手法去拍照，开创了即兴摄影的新领域。著有《美国人》。</p>\n<p><img src=\"/images/20witness/%E7%BE%8E%E5%9B%BD%E4%BA%BA.jpg\" alt=\"美国人\"></p>\n<h1 id=\"威廉·克莱因（1928-）\"><a href=\"#%E5%A8%81%E5%BB%89%C2%B7%E5%85%8B%E8%8E%B1%E5%9B%A0%EF%BC%881928-%EF%BC%89\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>威廉·克莱因（1928-）</h1>\n<p>街头摄影，行为怪异，表现极端，说辞故弄玄虚，照片却又很强烈。</p>\n<p><img src=\"/images/20witness/%E6%9E%AA.jpeg\" alt=\"枪\"></p>","frontmatter":{"title":"阅读笔记《20位人性见证者：当代摄影大师》","date":"2016-11-28T09:31:37.000Z","category":"阅读笔记","tags":["读书笔记","摄影","阅读"],"cover":"/images/20witness/小狗.jpg"},"tableOfContents":"<ul>\n<li><a href=\"/posts/20-humanity-witness/#%E5%A5%A5%E5%8F%A4%E6%96%AF%E7%89%B9%C2%B7%E6%A1%91%E5%BE%B7%EF%BC%881876-1964%EF%BC%89\">奥古斯特·桑德（1876-1964）</a></li>\n<li><a href=\"/posts/20-humanity-witness/#%E9%9B%85%E5%85%8B-%E4%BA%A8%E5%88%A9%C2%B7%E6%8B%89%E8%92%82%E6%A0%BC%EF%BC%881894-1986%EF%BC%89\">雅克-亨利·拉蒂格（1894-1986）</a></li>\n<li><a href=\"/posts/20-humanity-witness/#%E5%AE%89%E5%BE%B7%E7%83%88%C2%B7%E7%A7%91%E7%89%B9%E5%85%B9%EF%BC%881894-1985%EF%BC%89\">安德烈·科特兹（1894-1985）</a></li>\n<li><a href=\"/posts/20-humanity-witness/#%E7%BD%97%E6%9B%BC%C2%B7%E7%BB%B4%E5%B8%8C%E5%B0%BC%E5%85%8B%EF%BC%881897-1990%EF%BC%89\">罗曼·维希尼克（1897-1990）</a></li>\n<li><a href=\"/posts/20-humanity-witness/#%E5%B8%83%E6%8B%89%E5%A1%9E%EF%BC%881899-1984%EF%BC%89\">布拉塞（1899-1984）</a></li>\n<li><a href=\"/posts/20-humanity-witness/#%E7%BB%B4%E5%90%89%EF%BC%881899-1968%EF%BC%89\">维吉（1899-1968）</a></li>\n<li><a href=\"/posts/20-humanity-witness/#%E5%AE%89%E5%A1%9E%E5%B0%94%C2%B7%E4%BA%9A%E5%BD%93%E6%96%AF%EF%BC%881902-1984%EF%BC%89\">安塞尔·亚当斯（1902-1984）</a></li>\n<li><a href=\"/posts/20-humanity-witness/#%E6%9B%BC%E7%BA%BD%E5%B0%94%C2%B7%E9%98%BF%E5%B0%94%E7%93%A6%E9%9B%B7%E6%96%AF%C2%B7%E5%B8%83%E6%8B%89%E6%B2%83%EF%BC%881902-2002%EF%BC%89\">曼纽尔·阿尔瓦雷斯·布拉沃（1902-2002）</a></li>\n<li><a href=\"/posts/20-humanity-witness/#%E6%AF%94%E5%B0%94%C2%B7%E5%8B%83%E5%85%B0%E7%89%B9%EF%BC%881904-1983%EF%BC%89\">比尔·勃兰特（1904-1983）</a></li>\n<li><a href=\"/posts/20-humanity-witness/#%E4%BA%A8%E5%88%A9%C2%B7%E5%8D%A1%E8%92%82%E5%9F%83-%E5%B8%83%E5%88%97%E6%9D%BE%EF%BC%881908-2004%EF%BC%89\">亨利·卡蒂埃-布列松（1908-2004）</a></li>\n<li><a href=\"/posts/20-humanity-witness/#%E7%BD%97%E4%BC%AF%E7%89%B9%C2%B7%E5%8D%A1%E5%B8%95%EF%BC%881913-1954%EF%BC%89\">罗伯特·卡帕（1913-1954）</a></li>\n<li><a href=\"/posts/20-humanity-witness/#%E5%B0%A4%E9%87%91%C2%B7%E5%8F%B2%E5%AF%86%E6%96%AF%EF%BC%881918-1978%EF%BC%89\">尤金·史密斯（1918-1978）</a></li>\n<li><a href=\"/posts/20-humanity-witness/#%E9%BB%9B%E5%AE%89%E5%A8%9C%C2%B7%E9%98%BF%E5%8B%83%E4%B8%9D%EF%BC%881923-1971%EF%BC%89\">黛安娜·阿勃丝（1923-1971）</a></li>\n<li><a href=\"/posts/20-humanity-witness/#%E7%BD%97%E4%BC%AF%E7%89%B9%C2%B7%E5%BC%97%E5%85%B0%E5%85%8B%EF%BC%881924-%EF%BC%89\">罗伯特·弗兰克（1924-）</a></li>\n<li><a href=\"/posts/20-humanity-witness/#%E5%A8%81%E5%BB%89%C2%B7%E5%85%8B%E8%8E%B1%E5%9B%A0%EF%BC%881928-%EF%BC%89\">威廉·克莱因（1928-）</a></li>\n</ul>","excerpt":"奥古斯特·桑德（1876-1964） 人像摄影家，时代脸孔的留影者，拍摄了大量日耳曼民族众生相。 雅克-亨利·拉蒂格（1894-1986） 用爱来拍照，用拍照来写日记，永远7岁的摄影大师。 安德烈·科特兹（1894-198…"}},{"node":{"fields":{"slug":"/posts/html-5-memo"},"html":"<p><img src=\"https://zerosoul.github.io/2016/11/15/h5-memo/html5.jpg\" alt=\"html5\"><br>\n把平时开发工作中遇到的一些问题写下来，权当备忘录。</p>\n<h1 id=\"有关meta\"><a href=\"#%E6%9C%89%E5%85%B3meta\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>有关Meta</h1>\n<h2 id=\"基本meta\"><a href=\"#%E5%9F%BA%E6%9C%ACmeta\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>基本Meta</h2>\n<div class=\"gatsby-highlight\" data-language=\"html\">\n      <pre class=\"language-html\"><code class=\"language-html\"><span class=\"token comment\">&lt;!-- 设置缩放 --></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>viewport<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">content</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>width=device-width, initial-scale=1, user-scalable=no, minimal-ui<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n\n<span class=\"token comment\">&lt;!-- 可隐藏地址栏，仅针对IOS的Safari（注：IOS7.0版本以后，safari上已看不到效果） --></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>apple-mobile-web-app-capable<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">content</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>yes<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n\n<span class=\"token comment\">&lt;!-- 仅针对IOS的Safari顶端状态条的样式（可选default/black/black-translucent ） --></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>apple-mobile-web-app-status-bar-style<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">content</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>black<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n\n<span class=\"token comment\">&lt;!-- IOS中禁用将数字识别为电话号码/忽略Android平台中对邮箱地址的识别 --></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>format-detection<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">content</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>telephone=no, email=no<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></code></pre>\n      </div>\n<h2 id=\"搜索引擎meta\"><a href=\"#%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8Emeta\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>搜索引擎Meta</h2>\n<div class=\"gatsby-highlight\" data-language=\"html\">\n      <pre class=\"language-html\"><code class=\"language-html\"><span class=\"token comment\">&lt;!-- 搜索引擎索引方式：通常有如下几种取值：none，noindex，nofollow，all，index和follow。--></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>robots<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">content</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>index,follow<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n\n<span class=\"token comment\">&lt;!--\n\n    all：文件将被检索，且页面上的链接可以被查询；\n\n    none：文件将不被检索，且页面上的链接不可以被查询；\n\n    index：文件将被检索；\n\n    follow：页面上的链接可以被查询；\n\n    noindex：文件将不被检索；\n\n    nofollow：页面上的链接不可以被查询。\n\n --></span></code></pre>\n      </div>\n<h2 id=\"页面缓存设置meta\"><a href=\"#%E9%A1%B5%E9%9D%A2%E7%BC%93%E5%AD%98%E8%AE%BE%E7%BD%AEmeta\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>页面缓存设置Meta</h2>\n<div class=\"gatsby-highlight\" data-language=\"html\">\n      <pre class=\"language-html\"><code class=\"language-html\"><span class=\"token comment\">&lt;!-- 清除缓存 --></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">http-equiv</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>pragma<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">content</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>no-cache<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">http-equiv</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>cache-control<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">content</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>no-cache<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">http-equiv</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>expires<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">content</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>0<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></code></pre>\n      </div>\n<h1 id=\"常见问题\"><a href=\"#%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>常见问题</h1>\n<h2 id=\"移动端字体设置\"><a href=\"#%E7%A7%BB%E5%8A%A8%E7%AB%AF%E5%AD%97%E4%BD%93%E8%AE%BE%E7%BD%AE\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>移动端字体设置</h2>\n<div class=\"gatsby-highlight\" data-language=\"css\">\n      <pre class=\"language-css\"><code class=\"language-css\"><span class=\"token comment\">/*中英字体名对照表\n\n宋体      SimSun\n\n黑体      SimHei\n\n微信雅黑   Microsoft Yahei\n\n微软正黑体 Microsoft JhengHei\n\n新宋体    NSimSun\n\n新细明体  MingLiU\n\n细明体    MingLiU\n\n标楷体    DFKai-SB\n\n仿宋     FangSong\n\n楷体     KaiTi\n\n仿宋\\_GB2312  FangSong\\_GB2312\n\n楷体\\_GB2312  KaiTi\\_GB2312  \n\n说明：中文字体多数使用宋雅黑，英文用Helvetica\n\n*/</span>\n\n<span class=\"token selector\">body</span> <span class=\"token punctuation\">{</span> <span class=\"token property\">font-family</span><span class=\"token punctuation\">:</span> Microsoft Yahei,SimSun,Helvetica<span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span></code></pre>\n      </div>\n<h2 id=\"打电话发短信写邮件\"><a href=\"#%E6%89%93%E7%94%B5%E8%AF%9D%E5%8F%91%E7%9F%AD%E4%BF%A1%E5%86%99%E9%82%AE%E4%BB%B6\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>打电话发短信写邮件</h2>\n<div class=\"gatsby-highlight\" data-language=\"html\">\n      <pre class=\"language-html\"><code class=\"language-html\">// 打电话\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>tel:010-88888<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>打电话给:010-88888<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span>\n\n//  发短信\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>sms:88888<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>发短信给: 88888<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span>\n\n// 写邮件\n\n//注：在添加这些功能时，第一个功能以\"?\"开头，后面的以\"&amp;\"开头\n\n//1.普通邮件\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>mailto:haha@wtf.com<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>快来点我啊，给你发种子。<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span>\n\n//2.收件地址后添加?cc=开头，可添加抄送地址（Android存在兼容问题）\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>mailto:haha@wtf.com?cc=666@wtf.com<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>快来点我啊，给你发种子。<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span>\n\n//3.跟着抄送地址后，写上&amp;bcc=,可添加密件抄送地址（Android存在兼容问题）\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>mailto:haha@wtf.com?cc=666@wtf.com&amp;bcc=384900096@wtf.com<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>快来点我啊，给你发种子。<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span>\n\n//4.包含多个收件人、抄送、密件抄送人，用分号(;)隔开多个邮件人的地址\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>mailto:haha@wtf.com;384900096@wtf.com<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>快来点我啊，给你发种子。<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span>\n\n//5.包含主题，用?subject=\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>mailto:haha@wtf.com?subject=邮件主题<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>快来点我啊，给你发种子。<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span>\n\n//6.包含内容，用?body=;如内容包含文本，使用%0A给文本换行 \n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>mailto:haha@wtf.com?body=邮件主题内容%0A我是第二行内容%0A你没有猜错，这是我是第三行。<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>快来点我啊，给你发种子。<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span>\n\n//7.内容包含链接，含http(s)://等的文本自动转化为链接\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>mailto:haha@wtf.com?body=http://www.wtf.com<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>快来点我啊，给你发种子。<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span>\n\n//8.内容包含图片（PC不支持）\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>mailto:haha@wtf.com?body=&lt;img src=<span class=\"token punctuation\">'</span>images/torrent.jpg<span class=\"token punctuation\">'</span> /><span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>快来点我啊，给你发种子。<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span>\n\n//9.完整示例\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>mailto:haha@wtf.com;384900096@wtf.com?cc=666@wtf.com&amp;bcc=993233461@wtf.com&amp;subject=[邮主题\\]&amp;body=我是第一行内容%0A%0Ahttp://www.baidu.com%0A%0A&lt;img src=<span class=\"token punctuation\">'</span>images/1.jpg<span class=\"token punctuation\">'</span> /><span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>快来点我啊，给你发种子。<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span></code></pre>\n      </div>\n<h2 id=\"touch事件\"><a href=\"#touch%E4%BA%8B%E4%BB%B6\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>touch事件</h2>\n<p>事件响应顺序：<code class=\"language-text\">ontouchstart</code> > <code class=\"language-text\">ontouchmove</code> > <code class=\"language-text\">ontouchend</code> > <code class=\"language-text\">onclick</code></p>\n<ul>\n<li><code class=\"language-text\">touchstart</code>——当手指触碰屏幕时候发生</li>\n<li><code class=\"language-text\">touchmove</code>——当手指在屏幕上滑动时连续触发。</li>\n<li>通常在滑屏页面，会调用<code class=\"language-text\">event</code>的<code class=\"language-text\">preventDefault()</code>可以阻止默认情况的发生：阻止页面滚动</li>\n<li><code class=\"language-text\">touchend</code>——当手指离开屏幕时触发</li>\n<li><code class=\"language-text\">touchcancel</code>——系统停止跟踪触摸时候会触发。例如在触摸过程中突然页面<code class=\"language-text\">alert()</code>，此时会触发该事件，这个事件比较少用。</li>\n</ul>\n<p>TouchEvent说明：</p>\n<ul>\n<li>touches：屏幕上所有手指的信息</li>\n<li>targetTouches：手指在目标区域的手指信息</li>\n<li>changedTouches：最近一次触发该事件的手指信息</li>\n<li>touchend时，touches与targetTouches信息会被删除，changedTouches保存的最后一次的信息，用于计算手指信息</li>\n</ul>\n<p>参数信息(changedTouches[0])</p>\n<ul>\n<li>clientX、clientY在显示区的坐标</li>\n<li>target：当前元素</li>\n</ul>\n<h2 id=\"科普：移动端click事件200-300ms的延时响应\"><a href=\"#%E7%A7%91%E6%99%AE%EF%BC%9A%E7%A7%BB%E5%8A%A8%E7%AB%AFclick%E4%BA%8B%E4%BB%B6200-300ms%E7%9A%84%E5%BB%B6%E6%97%B6%E5%93%8D%E5%BA%94\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>科普：移动端click事件200-300ms的延时响应</h2>\n<p>以下是历史原因：</p>\n<blockquote>\n<p>2007年苹果发布首款iphone上IOS系统搭载的safari为了将适用于PC端上大屏幕的网页能比较好的展示在手机端上，使用了双击缩放(double tap to zoom)的方案，比如你在手机上用浏览器打开一个PC上的网页，你可能在看到页面内容虽然可以撑满整个屏幕，但是字体、图片都很小看不清，此时可以快速双击屏幕上的某一部分，你就能看清该部分放大后的内容，再次双击后能回到原始状态。<br>\n双击缩放是指用手指在屏幕上快速点击两次，iOS 自带的 Safari 浏览器会将网页缩放至原始比例。<br>\n原因就出在浏览器需要如何判断快速点击上，当用户在屏幕上单击某一个元素时候，例如跳转链接<code class=\"language-<a href=\"#\"\">&lt;/a</code>，此处浏览器会先捕获该次单击，但浏览器不能决定用户是单纯要点击链接还是要双击该部分区域进行缩放操作，所以，捕获第一次单击后，浏览器会先Hold一段时间t，如果在t时间区间里用户未进行下一次点击，则浏览器会做单击跳转链接的处理，如果t时间里用户进行了第二次单击操作，则浏览器会禁止跳转，转而进行对该部分区域页面的缩放操作。那么这个时间区间t有多少呢？在IOS safari下，大概为300毫秒。这就是延迟的由来。</p>\n</blockquote>\n<p>造成的后果用户纯粹单击页面，页面需要过一段时间才响应，给用户慢体验感觉，对于web开发者来说是，页面js捕获click事件的回调函数处理，需要300ms后才生效，也就间接导致影响其他业务逻辑的处理。</p>\n<p>解决方案：</p>\n<ul>\n<li><a href=\"https://github.com/ftlabs/fastclick\">fastclick</a></li>\n<li>zepto的<a href=\"https://github.com/madrobby/zepto/blob/master/src/touch.js#files\">touch模块</a></li>\n</ul>\n<h2 id=\"点击元素产生背景或边框问题\"><a href=\"#%E7%82%B9%E5%87%BB%E5%85%83%E7%B4%A0%E4%BA%A7%E7%94%9F%E8%83%8C%E6%99%AF%E6%88%96%E8%BE%B9%E6%A1%86%E9%97%AE%E9%A2%98\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>点击元素产生背景或边框问题</h2>\n<div class=\"gatsby-highlight\" data-language=\"css\">\n      <pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">a,button,input,textarea</span> <span class=\"token punctuation\">{</span> \n\n    <span class=\"token property\">-webkit-tap-highlight-color</span><span class=\"token punctuation\">:</span> <span class=\"token function\">rgba</span><span class=\"token punctuation\">(</span>0,0,0,0<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \n\n    <span class=\"token property\">-webkit-user-modify</span><span class=\"token punctuation\">:</span>read-write-plaintext-only<span class=\"token punctuation\">;</span> //-webkit-user-modify有个副作用，就是输入法不再能够输入多个字符\n\n<span class=\"token punctuation\">}</span>   </code></pre>\n      </div>\n<p>/<em>也可以...，简单粗暴</em>/</p>\n<p>* { -webkit-tap-highlight-color: rgba(0,0,0,0); }</p>\n<h2 id=\"字体单位font-size选择px还是rem\"><a href=\"#%E5%AD%97%E4%BD%93%E5%8D%95%E4%BD%8Dfont-size%E9%80%89%E6%8B%A9px%E8%BF%98%E6%98%AFrem\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>字体单位font-size选择px还是rem</h2>\n<div class=\"gatsby-highlight\" data-language=\"css\">\n      <pre class=\"language-css\"><code class=\"language-css\"> <span class=\"token comment\">/*如需适配多种移动设备，建议使用rem。以下为参考值：*/</span>\n\n<span class=\"token selector\">html</span> <span class=\"token punctuation\">{</span> <span class=\"token property\">font-size</span><span class=\"token punctuation\">:</span> 62.5%<span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span>   <span class=\"token comment\">/*10÷16 = 62.5%\\*/</span></code></pre>\n      </div>\n<p>/*设置12px字体。</p>\n<p>注：在rem前要加上对应的px值，解决不支持rem的浏览器的兼容问题，做到优雅降级*/</p>\n<p>body { font-size:12px; font-size:1.2rem; }</p>\n<h2 id=\"其它一些实用css技巧\"><a href=\"#%E5%85%B6%E5%AE%83%E4%B8%80%E4%BA%9B%E5%AE%9E%E7%94%A8css%E6%8A%80%E5%B7%A7\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>其它一些实用CSS技巧</h2>\n<div class=\"gatsby-highlight\" data-language=\"css\">\n      <pre class=\"language-css\"><code class=\"language-css\"><span class=\"token comment\">/*禁止长按链接与图片弹出菜单*/</span>\n\n<span class=\"token selector\">a,img</span> <span class=\"token punctuation\">{</span> <span class=\"token property\">-webkit-touch-callout</span><span class=\"token punctuation\">:</span> none <span class=\"token punctuation\">}</span>    \n\n<span class=\"token comment\">/*禁止ios和android用户选中文字*/</span>\n\n<span class=\"token selector\">html,body</span> <span class=\"token punctuation\">{</span><span class=\"token property\">-webkit-user-select</span><span class=\"token punctuation\">:</span>none<span class=\"token punctuation\">;</span> <span class=\"token property\">user-select</span><span class=\"token punctuation\">:</span> none<span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/*改变输入框placeholder的颜色值*/</span>\n\n<span class=\"token selector\">::-webkit-input-placeholder</span> <span class=\"token punctuation\">{</span> <span class=\"token comment\">/* WebKit browsers */</span>\n\n<span class=\"token property\">color</span><span class=\"token punctuation\">:</span> #999<span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span>\n\n<span class=\"token selector\">:-moz-placeholder</span> <span class=\"token punctuation\">{</span> <span class=\"token comment\">/* Mozilla Firefox 4 to 18 */</span>\n\n<span class=\"token property\">color</span><span class=\"token punctuation\">:</span> #999<span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span>\n\n<span class=\"token selector\">::-moz-placeholder</span> <span class=\"token punctuation\">{</span> <span class=\"token comment\">/* Mozilla Firefox 19+ */</span>\n\n<span class=\"token property\">color</span><span class=\"token punctuation\">:</span> #999<span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span>\n\n<span class=\"token selector\">:-ms-input-placeholder</span> <span class=\"token punctuation\">{</span> <span class=\"token comment\">/* Internet Explorer 10+ */</span>\n\n<span class=\"token property\">color</span><span class=\"token punctuation\">:</span> #999<span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span>\n\n<span class=\"token selector\">input:focus::-webkit-input-placeholder</span><span class=\"token punctuation\">{</span> <span class=\"token property\">color</span><span class=\"token punctuation\">:</span>#999<span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/*android上去掉语音输入按钮\\*/</span>\n\n<span class=\"token selector\">input::-webkit-input-speech-button</span> <span class=\"token punctuation\">{</span><span class=\"token property\">display</span><span class=\"token punctuation\">:</span> none<span class=\"token punctuation\">}</span></code></pre>\n      </div>\n<h2 id=\"禁用input在ios下，输入英文首字母的默认大写\"><a href=\"#%E7%A6%81%E7%94%A8input%E5%9C%A8ios%E4%B8%8B%EF%BC%8C%E8%BE%93%E5%85%A5%E8%8B%B1%E6%96%87%E9%A6%96%E5%AD%97%E6%AF%8D%E7%9A%84%E9%BB%98%E8%AE%A4%E5%A4%A7%E5%86%99\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>禁用input在ios下，输入英文首字母的默认大写</h2>\n<div class=\"gatsby-highlight\" data-language=\"html\">\n      <pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">autocapitalize</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>off<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">autocorrect</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>off<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></code></pre>\n      </div>\n<h2 id=\"屏幕旋转的事件和样式\"><a href=\"#%E5%B1%8F%E5%B9%95%E6%97%8B%E8%BD%AC%E7%9A%84%E4%BA%8B%E4%BB%B6%E5%92%8C%E6%A0%B7%E5%BC%8F\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>屏幕旋转的事件和样式</h2>\n<p>JS处理： </p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">orientInit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">var</span> orientChk <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span>documentElement<span class=\"token punctuation\">.</span>clientWidth <span class=\"token operator\">></span> document<span class=\"token punctuation\">.</span>documentElement<span class=\"token punctuation\">.</span>clientHeight<span class=\"token operator\">?</span><span class=\"token string\">'landscape'</span><span class=\"token punctuation\">:</span><span class=\"token string\">'portrait'</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>orientChk <span class=\"token operator\">==</span><span class=\"token string\">'lapdscape'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\n        <span class=\"token comment\">//横屏下需要执行代码</span>\n\n    <span class=\"token punctuation\">}</span><span class=\"token keyword\">else</span><span class=\"token punctuation\">{</span>\n\n        <span class=\"token comment\">//竖屏下需要执行代码</span>\n\n    <span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">orientInit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nwindow<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'onorientationchange'</span> <span class=\"token keyword\">in</span> window<span class=\"token operator\">?</span><span class=\"token string\">'orientationchange'</span><span class=\"token punctuation\">:</span><span class=\"token string\">'resize'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\n    <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span>orientInit<span class=\"token punctuation\">,</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span></code></pre>\n      </div>\n<p>CSS处理：  </p>\n<div class=\"gatsby-highlight\" data-language=\"css\">\n      <pre class=\"language-css\"><code class=\"language-css\"><span class=\"token comment\">/*竖屏时样式*/</span>\n\n<span class=\"token atrule\"><span class=\"token rule\">@media</span> all and <span class=\"token punctuation\">(</span><span class=\"token property\">orientation</span><span class=\"token punctuation\">:</span>portrait<span class=\"token punctuation\">)</span></span><span class=\"token punctuation\">{</span>   <span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/*横屏时样式*/</span>\n\n<span class=\"token atrule\"><span class=\"token rule\">@media</span> all and <span class=\"token punctuation\">(</span><span class=\"token property\">orientation</span><span class=\"token punctuation\">:</span>landscape<span class=\"token punctuation\">)</span></span><span class=\"token punctuation\">{</span>   <span class=\"token punctuation\">}</span></code></pre>\n      </div>\n<h2 id=\"播放视频不全屏\"><a href=\"#%E6%92%AD%E6%94%BE%E8%A7%86%E9%A2%91%E4%B8%8D%E5%85%A8%E5%B1%8F\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>播放视频不全屏</h2>\n<div class=\"gatsby-highlight\" data-language=\"html\">\n      <pre class=\"language-html\"><code class=\"language-html\"><span class=\"token comment\">&lt;!--\n\n1.ios7+支持自动播放\n\n2.支持Airplay的设备（如：音箱、Apple TV)播放\n\nx-webkit-airplay=\"true\" \n\n3.播放视频不全屏\n\nwebkit-playsinline=\"true\" \n\n--></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>video</span> <span class=\"token attr-name\">x-webkit-airplay</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">webkit-playsinline</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">preload</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>auto<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">autoplay</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>http://<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>video</span><span class=\"token punctuation\">></span></span></code></pre>\n      </div>\n<h2 id=\"消除transition闪屏\"><a href=\"#%E6%B6%88%E9%99%A4transition%E9%97%AA%E5%B1%8F\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>消除transition闪屏</h2>\n<div class=\"gatsby-highlight\" data-language=\"css\">\n      <pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">.css</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token property\">-webkit-transform-style</span><span class=\"token punctuation\">:</span> preserve-3d<span class=\"token punctuation\">;</span>\n\n    <span class=\"token property\">-webkit-backface-visibility</span><span class=\"token punctuation\">:</span> hidden<span class=\"token punctuation\">;</span>\n\n    <span class=\"token property\">-webkit-perspective</span><span class=\"token punctuation\">:</span> 1000<span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span></code></pre>\n      </div>","frontmatter":{"title":"移动端HTML5页面开发备忘录","date":"2016-11-15T09:31:37.000Z","category":"技术","tags":["技术","备忘","前端"],"cover":"https://zerosoul.github.io/2016/11/15/h5-memo/html5.jpg"},"tableOfContents":"<ul>\n<li>\n<p><a href=\"/posts/html-5-memo/#%E6%9C%89%E5%85%B3meta\">有关Meta</a></p>\n<ul>\n<li><a href=\"/posts/html-5-memo/#%E5%9F%BA%E6%9C%ACmeta\">基本Meta</a></li>\n<li><a href=\"/posts/html-5-memo/#%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8Emeta\">搜索引擎Meta</a></li>\n<li><a href=\"/posts/html-5-memo/#%E9%A1%B5%E9%9D%A2%E7%BC%93%E5%AD%98%E8%AE%BE%E7%BD%AEmeta\">页面缓存设置Meta</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"/posts/html-5-memo/#%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98\">常见问题</a></p>\n<ul>\n<li><a href=\"/posts/html-5-memo/#%E7%A7%BB%E5%8A%A8%E7%AB%AF%E5%AD%97%E4%BD%93%E8%AE%BE%E7%BD%AE\">移动端字体设置</a></li>\n<li><a href=\"/posts/html-5-memo/#%E6%89%93%E7%94%B5%E8%AF%9D%E5%8F%91%E7%9F%AD%E4%BF%A1%E5%86%99%E9%82%AE%E4%BB%B6\">打电话发短信写邮件</a></li>\n<li><a href=\"/posts/html-5-memo/#touch%E4%BA%8B%E4%BB%B6\">touch事件</a></li>\n<li><a href=\"/posts/html-5-memo/#%E7%A7%91%E6%99%AE%EF%BC%9A%E7%A7%BB%E5%8A%A8%E7%AB%AFclick%E4%BA%8B%E4%BB%B6200-300ms%E7%9A%84%E5%BB%B6%E6%97%B6%E5%93%8D%E5%BA%94\">科普：移动端click事件200-300ms的延时响应</a></li>\n<li><a href=\"/posts/html-5-memo/#%E7%82%B9%E5%87%BB%E5%85%83%E7%B4%A0%E4%BA%A7%E7%94%9F%E8%83%8C%E6%99%AF%E6%88%96%E8%BE%B9%E6%A1%86%E9%97%AE%E9%A2%98\">点击元素产生背景或边框问题</a></li>\n<li><a href=\"/posts/html-5-memo/#%E5%AD%97%E4%BD%93%E5%8D%95%E4%BD%8Dfont-size%E9%80%89%E6%8B%A9px%E8%BF%98%E6%98%AFrem\">字体单位font-size选择px还是rem</a></li>\n<li><a href=\"/posts/html-5-memo/#%E5%85%B6%E5%AE%83%E4%B8%80%E4%BA%9B%E5%AE%9E%E7%94%A8css%E6%8A%80%E5%B7%A7\">其它一些实用CSS技巧</a></li>\n<li><a href=\"/posts/html-5-memo/#%E7%A6%81%E7%94%A8input%E5%9C%A8ios%E4%B8%8B%EF%BC%8C%E8%BE%93%E5%85%A5%E8%8B%B1%E6%96%87%E9%A6%96%E5%AD%97%E6%AF%8D%E7%9A%84%E9%BB%98%E8%AE%A4%E5%A4%A7%E5%86%99\">禁用input在ios下，输入英文首字母的默认大写</a></li>\n<li><a href=\"/posts/html-5-memo/#%E5%B1%8F%E5%B9%95%E6%97%8B%E8%BD%AC%E7%9A%84%E4%BA%8B%E4%BB%B6%E5%92%8C%E6%A0%B7%E5%BC%8F\">屏幕旋转的事件和样式</a></li>\n<li><a href=\"/posts/html-5-memo/#%E6%92%AD%E6%94%BE%E8%A7%86%E9%A2%91%E4%B8%8D%E5%85%A8%E5%B1%8F\">播放视频不全屏</a></li>\n<li><a href=\"/posts/html-5-memo/#%E6%B6%88%E9%99%A4transition%E9%97%AA%E5%B1%8F\">消除transition闪屏</a></li>\n</ul>\n</li>\n</ul>","excerpt":"把平时开发工作中遇到的一些问题写下来，权当备忘录。 有关Meta 基本Meta 搜索引擎Meta 页面缓存设置Meta 常见问题 移动端字体设置 打电话发短信写邮件 touch…"}},{"node":{"fields":{"slug":"/posts/running-life"},"html":"<p><img src=\"https://zerosoul.github.io/2016/06/22/running-life/cscs.jpg\" alt=\"村上春树\"></p>\n<h1 id=\"前言\"><a href=\"#%E5%89%8D%E8%A8%80\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>前言</h1>\n<p>去年开始跑步，现在隔三差五地跑5公里，基本养成了习惯。城市的喧嚣让人无法沉静，跑步让我恢复孤独与平静，虽然看过村上春树的《当我跑步时我谈些什么》，再读到下面文章的时候还是特别有感触，与你共勉。</p>\n<h1 id=\"原文\"><a href=\"#%E5%8E%9F%E6%96%87\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>原文</h1>\n<p>我33岁那年秋天决定以写小说为生。为了保持健康，我开始跑步，每天凌晨4点起床，写作4小时，跑10公里。</p>\n<p>我是那种容易发胖的体质。我妻子却无论怎么吃也胖不起来。这让我时常陷入沉思：“<strong>人生真是不公平啊！一些人无需认真就能得到的东西，另一些人却需要付出很多才能换来。</strong>”<br>\n不过转念一想，那些不费吹灰之力就能保持苗条的人，不会像我这样重视饮食和运动，也许老化得更快。什么才是公平，还得从长计议。</p>\n<p>几年之后，我终于步入小说家的行列，还成功减掉了多余的体重并戒掉了烟瘾。说起坚持跑步，总有人向我表示钦佩：“你真是意志超人啊！”说老实话，我觉得跑步这东西和意志没多大关联。能坚持跑步，恐怕还是因为这项运动合乎我的要求：不需要伙伴或对手，也不需要特别的器械和场所。人生本来如此：喜欢的事自然可以坚持，不喜欢的怎么也长久不了。</p>\n<p>在这期间，我坚持每年都参加一次马拉松比赛，不过100公里长的“超级马拉松”只跑过一次。那次经历真是终身难忘。</p>\n<p>那是1996年6月23日，我报名参加了在日本北海道佐吕间湖畔举行的超级马拉松大赛，全程100公里。清晨5点，我踌躇满志地站在了起跑线上。比赛的前半段是从起点到55公里休息站间的路程。没什么好说的，我只是安静地向前跑、跑、跑，感觉和每周例行的锻炼一样。到达55公里休息站后，我换了身干净衣服，吃了些妻子准备的点心。这时我发现双脚有些肿胀，于是赶紧换上一双大半号的跑鞋，又继续上路了。<br>\n从55公里到75公里的路程变得极其痛苦。此时的我心里念叨着向前冲，但身子却不听使唤。我拼命摆动手臂，觉得自己像块在绞肉机里艰难移动的牛肉，累的几乎要瘫倒在地。一会功夫，就有选手接二连三超过了我。最让人心焦的是，一位70多岁的老奶奶超过我时大喊：“坚持下去！”</p>\n<p>“怎么办？还有一半路，如何挺过去？”这时，我想起一本书上介绍的窍门。于是我开始默念：“<strong>我不是人！我是一架机器。我没有感觉。我只会前进！</strong>”这句咒语反复在脑子里转圈。我不再看远方，只把目标放在前面3米远处。天空和风、草地、观众、喝彩声、现实、过去——所有这些都被我排除在外。</p>\n<p>神奇的是，不知从哪一秒开始，我浑身的痛楚突然消失。整个人仿佛进入自动运行状态。我开始不断超越他人。接近最后一段赛程时，已经将200多人甩在身后。</p>\n<p>下午4点42分，我终于到达终点，成绩是11小时42分。这次经历让我意识到：终点线只是一个记号而已，其实并没有什么意义，关键是这一路你是如何跑的。人生也是如此。</p>\n<p>当时的我只有30多岁，但也不能称为“小伙子”了。这是耶稣死去的年龄。在这个年纪，我正式站在文学的起跑线上——虽然已不再年轻。</p>","frontmatter":{"title":"村上春树：人生马拉松","date":"2016-06-22T09:31:37.000Z","category":"阅读笔记","tags":["跑步","村上春树","成长"],"cover":"https://zerosoul.github.io/2016/06/22/running-life/cscs.jpg"},"tableOfContents":"<ul>\n<li><a href=\"/posts/running-life/#%E5%89%8D%E8%A8%80\">前言</a></li>\n<li><a href=\"/posts/running-life/#%E5%8E%9F%E6%96%87\">原文</a></li>\n</ul>","excerpt":"前言 去年开始跑步，现在隔三差五地跑5公里，基本养成了习惯。城市的喧嚣让人无法沉静，跑步让我恢复孤独与平静，虽然看过村上春树的《当我跑步时我谈些什么》，再读到下面文章的时候还是特别有感触，与你共勉。 原文 我33岁那年秋天决定以写小说为生。为了保持健康，我开始跑步，每天凌晨4点起床，写作…"}},{"node":{"fields":{"slug":"/posts/zero-to-one"},"html":"<p><img src=\"https://zerosoul.github.io/2016/05/22/zero-to-one/paypal_team.jpg\" alt=\"paypal team\"></p>\n<h1 id=\"前言\"><a href=\"#%E5%89%8D%E8%A8%80\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>前言</h1>\n<p>我的生活里充满了套路：</p>\n<ul>\n<li>凌晨四点总会醒来，然后撒泡尿继续睡觉；</li>\n<li>每天早上必须洗澡，不然一天浑身难受；</li>\n<li>出门经常性不锁门，只是随手一带；</li>\n<li>自行车从来不上锁，即使是放在了地铁口；</li>\n<li>随身现金从来没超过200，能支付宝就微信；</li>\n<li>跑完步一定要发朋友圈，不然就觉得白跑了；</li>\n</ul>\n<p>读书也是，一般会避开畅销书，挑选豆瓣评分较高的经典书，也会从一本书开始了解到作者，进而选读他的其他作品，还会无意间听到一个牛人，知道他写过某本书，然后买来开始拜读。好吧，绕了一大圈子，终于开始进入主题了，今天要记录的就是我读书套路的最后一种：彼得蒂尔写的《从0到1》。</p>\n<p>这是本畅销书，和其他大多数畅销书类似，没有提出任何新知，一直在强调的是在我们中学课本上就在强调的创新，新瓶装旧酒，<strong>有用的废话</strong>大集合。但是仍然值得一读，因为它确实有料。我们可以先从说一说彼得蒂尔开始…</p>\n<h1 id=\"其人其事\"><a href=\"#%E5%85%B6%E4%BA%BA%E5%85%B6%E4%BA%8B\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>其人其事</h1>\n<p>彼得蒂尔毕业于斯坦福法学院，1996年成立Thiel Capital，2002年改名为Clarium Capital，公司拥有的资产达55亿美元。他于1998年与他人共同创立了PayPal，2002年以15亿美元的价格售出，个人获利6千万美元。他还是Facebook的首个外部投资者。他打造了多家异军突起的公司，《从0到1》展现了他到底是如何做到的。所以，当一个有冒险精神的人写书了，务必要读一读。</p>\n<p>尼采曾在精神错乱前写道：“个人发生精神错乱很少见，但对群体、政党、国家、时代而言，精神错乱很普遍。”如果你能识别出那些不切实际你的大众观点，你就能看到隐藏在这些观点背后的反主流事实。《从0到1》就是能让我们识别出“反主流事实”的一本书。</p>\n<h1 id=\"其书珠玑\"><a href=\"#%E5%85%B6%E4%B9%A6%E7%8F%A0%E7%8E%91\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>其书珠玑</h1>\n<p>从零到一，或者说从无到有，意味着企业要善于创造和创新，通过技术专利、网络效应、规模经济、品牌等形成壁垒，从而实现质的垂直性层级跨越，由此开辟一个只属于自己的蓝海市场而成为这个市场的唯一，这样的垄断足可以让企业安享丰厚利润。</p>\n<p>当代企业的经营境界有三层：企业只是制造满足市场需求的产品，只要有原型，工业流水线可以让产品大量复制生产出来，是为第一层；企业创造了良好的基因组织，因而可以与时俱进地不断进化，实现纵向的传承，其最好的产品便是企业自身，是为第二层；企业创造了社会基因或者思想基因，可以跨界影响到整个行业乃至社会，实现横向传承，是为第三层。</p>\n<p>今天的“最佳方法”可能会把我们引入死胡同，而最佳途径是未经尝试的新路径。科技是神奇的，它能事半功倍，将我们的基础能力提升到一个新的高度。成功人士总能在意想不到的地方发现价值，他们遵循的是基本原则，而非秘籍。</p>\n<p>在什么重要问题上，你与其他人有不同看法？</p>\n<p>大部分人认为世界的未来由全球化决定，但事实是——科技更有影响力。没有科技创新，也许中国能源产量在未来20年会加倍，但造成的污染也会加倍。如果印度亿万家庭也都像现在的美国家庭那样生活——只用现代工具，结果也将是对环境造成毁灭性的破坏。如果全世界都用同一种旧方法创造财富，那么创造的不是财富，而是灾难。在资源稀缺的今天，丢掉科技创新的全球化不会长久。</p>\n<p>在功能极端失调的组织中，要想获得晋升机会，告诉别人你在工作比挽起袖子做事更重要。</p>\n<p>最反主流的行动不是抵制潮流，而是在潮流中不丢弃自己的独立思考。</p>\n<p>多家航空公司之间存在竞争，但是谷歌却只有一家。经济学家用两个简单模型解释了这两种现象：一是完全竞争，二是垄断。所以，如果你想创造并获得持久的价值，不要只是跟风建立一个没有特色的企业。</p>\n<p>非垄断者通过把他们的市场定义成各种更小市场的交集来夸大自己的独特性；相反，垄断者通过描述若干大市场的并集来伪装他们的垄断性。</p>\n<p>成功企业的特性————即使严守道德，也不会影响公司发展。垄断者除了想着赚钱外还有余力想着其他事情，而非垄断者就不行。在完全竞争中，企业着眼于短期利益，不可能对未来进行长期规划。要想将企业从每日的生存竞赛中解脱出来，唯一方法就是：获取垄断利益。</p>\n<p>托尔斯泰在《安娜卡列尼娜》中以下面这段文字开头：“幸福的家庭总是相似的，不幸的家庭各有各的不幸。”而在商业中，情形恰恰相反。企业成功的原因各不同：每个垄断企业都是靠解决一个独一无二的问题获得垄断地位，而企业失败的原因却相同：它们都无法逃脱竞争。</p>\n<p>竞争是一场高成本的买卖。竞争使我们过分重视过去的机会，一味重复过去的模式。竞争意味着大家都没有利润，产品没有实质差异，而且还要挣扎求生。创造性垄断就是新产品既让大众受益，又可以给创造者带来长期利润。</p>\n<p>胜利肯定比失败好，但如果这场战役不值得打，那每个参与者就都是输家。有时你不得不投入战斗。需要的时候，你不仅要战斗，还必须得赢，没有中间选择：要么和风细雨润物无声，要么暴风骤雨速战速决。</p>\n<p>一个企业的今天价值是它以后创造利润的总和。科技公司通常是开始几年亏损。因为创造有价值的东西需要时间，所以收益延迟。</p>\n<p>垄断企业的特点：</p>\n<ul>\n<li>专利技术</li>\n<li>网络效应</li>\n<li>规模经济</li>\n<li>品牌优势</li>\n</ul>\n<p>建立垄断企业的方法：</p>\n<ul>\n<li>占领小市场</li>\n<li>扩大规模</li>\n<li>破坏性创新</li>\n</ul>\n<p>初创企业是你可以明确掌握尽最大努力的机会。你不只拥有自己生命的代理权，还拥有这世界上某个重要角落的代理权。而这一切都要从抵制不公平的概率主宰开始，因为你并不是一张概率决定命运的彩票。</p>\n<h1 id=\"再说一句\"><a href=\"#%E5%86%8D%E8%AF%B4%E4%B8%80%E5%8F%A5\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>再说一句</h1>\n<p>从0到1，知易行难，但是做一个改变世界的逆行者，是我能想象到的世界上最酷的事情，彼得蒂尔做到了，而且不止一次！</p>","frontmatter":{"title":"阅读笔记《从0到1》","date":"2016-06-18T09:31:37.000Z","category":"阅读笔记","tags":["社科","互联网","创业","阅读"],"cover":"https://zerosoul.github.io/2016/05/22/zero-to-one/paypal_team.jpg"},"tableOfContents":"<ul>\n<li><a href=\"/posts/zero-to-one/#%E5%89%8D%E8%A8%80\">前言</a></li>\n<li><a href=\"/posts/zero-to-one/#%E5%85%B6%E4%BA%BA%E5%85%B6%E4%BA%8B\">其人其事</a></li>\n<li><a href=\"/posts/zero-to-one/#%E5%85%B6%E4%B9%A6%E7%8F%A0%E7%8E%91\">其书珠玑</a></li>\n<li><a href=\"/posts/zero-to-one/#%E5%86%8D%E8%AF%B4%E4%B8%80%E5%8F%A5\">再说一句</a></li>\n</ul>","excerpt":"前言 我的生活里充满了套路： 凌晨四点总会醒来，然后撒泡尿继续睡觉； 每天早上必须洗澡，不然一天浑身难受； 出门经常性不锁门，只是随手一带； 自行车从来不上锁，即使是放在了地铁口； 随身现金从来没超过20…"}},{"node":{"fields":{"slug":"/posts/take-parents-to-beijing"},"html":"<p><img src=\"/images/parents.jpg\" alt=\"parents\"></p>\n<h1 id=\"引子\"><a href=\"#%E5%BC%95%E5%AD%90\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>引子</h1>\n<p>去年夏天把父母和奶奶接北京玩了几天，担心奶奶体力问题，还备用了轮椅。结果几天下来，老人家依然劲头十足，我却累蔫儿了。</p>\n<p>好吧，以上不是重点，重点是游玩期间我做了个视频，放在了<a href=\"https://vimeo.com/146186682\">网上</a>（可以直接跳到文章底部观看）。令我惊讶的是，半年多过去了，突然有歪果仁来了封邮件，问视频是怎么做的：<strong>How did you accomplish it?Amazing!</strong>。哎，这个没见过世面的歪果仁，<a href=\"https://vimeo.com/channels/staffpicks\">Vimeo</a>上的视频一个比一个精彩，如果排行的话，我只能垫底。不过这位歪果仁兄既然诚心诚意地发问，我也就很负责任地回复了：<strong>iPhone6 + iMovie + selfie stick</strong>。对，很简洁，很任性，很清真，我大概能猜到歪果仁看到后的表情：(╯‵□′)╯︵┻━┻。</p>\n<h1 id=\"视频\"><a href=\"#%E8%A7%86%E9%A2%91\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>视频</h1>\n<p>世界那么大 TA们想看看</p>\n<div>\n          <div\n            class=\"gatsby-resp-iframe-wrapper\"\n            style=\"padding-bottom: 56.25%; position: relative; height: 0; overflow: hidden;\"\n          >\n            <iframe src=\"https://player.vimeo.com/video/146186682?loop=1&amp;color=ffffff&amp;title=0&amp;byline=0&amp;portrait=0\" frameborder=\"0\" webkitallowfullscreen=\"\" mozallowfullscreen=\"\" allowfullscreen style=\"\n            position: absolute;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n          \"></iframe>\n          </div>\n          </div>\n<p><em>注：微信下视频加载不出来，请移步浏览器</em></p>\n<h1 id=\"工具\"><a href=\"#%E5%B7%A5%E5%85%B7\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>工具</h1>\n<p>其实不只歪果仁，有些国内的朋友也问过我几次同样的问题，那么有必要罗列下当初用到的工具，仅供参考。</p>\n<h1 id=\"硬件\"><a href=\"#%E7%A1%AC%E4%BB%B6\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>硬件</h1>\n<ul>\n<li>iPhone 6 64G：应该是刚买了没多久，就拿来录像了，效果挺好的。庆幸当初选择的是64G，否则后面内存就捉襟见肘了。</li>\n<li>iPad Air：主要用来编辑视频，使用自带的iMovie</li>\n<li>Macbook Pro：用来上传视频，好吧，有点打酱油的一个硬件</li>\n<li>自拍杆（带遥控）：淘宝了一个，链接点<a href=\"https://detail.tmall.com/item.htm?id=42154967278&#x26;spm=a1z09.2.0.0.lBofG8&#x26;_u=h4gsni3a18f\">这里</a>100元左右就能买个带遥控功能的，还有三脚架功能，好神奇。不过用过之后随即就打入冷宫了，后来送给了我哥。</li>\n</ul>\n<h1 id=\"软件\"><a href=\"#%E8%BD%AF%E4%BB%B6\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>软件</h1>\n<ul>\n<li>iMovie：苹果操作系统自带的视频编辑软件，功能足够，如果不太熟悉操作，可以移步<a href=\"http://www.apple.com/cn/ios/imovie/\">这里</a>先了解下。</li>\n<li><a href=\"https://vimeo.com\">Vimeo</a>：一个高清视频社区网站，我试过上传优酷，清晰度不好，又尝试秒拍，结果时长有限制。最后只好使用歪果仁的服务了，唯一担心的就是流畅性，试了试，还不错。</li>\n</ul>\n<h1 id=\"拍摄地点\"><a href=\"#%E6%8B%8D%E6%91%84%E5%9C%B0%E7%82%B9\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>拍摄地点</h1>\n<ul>\n<li>天安门广场</li>\n<li>故宫</li>\n<li>颐和园</li>\n<li>圆明园</li>\n<li>鸟巢&#x26;水立方</li>\n<li>地铁&#x26;住所&#x26;路上</li>\n</ul>\n<h1 id=\"最后再说一句\"><a href=\"#%E6%9C%80%E5%90%8E%E5%86%8D%E8%AF%B4%E4%B8%80%E5%8F%A5\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>最后再说一句</h1>\n<p>工具固然要有，但想法和执行更重要。That’s all!</p>","frontmatter":{"title":"世界那么大，TA们想看看","date":"2016-06-17T09:31:37.000Z","category":"技术","tags":["旅行","vimeo"],"cover":"/images/parents.jpg"},"tableOfContents":"<ul>\n<li><a href=\"/posts/take-parents-to-beijing/#%E5%BC%95%E5%AD%90\">引子</a></li>\n<li><a href=\"/posts/take-parents-to-beijing/#%E8%A7%86%E9%A2%91\">视频</a></li>\n<li><a href=\"/posts/take-parents-to-beijing/#%E5%B7%A5%E5%85%B7\">工具</a></li>\n<li><a href=\"/posts/take-parents-to-beijing/#%E7%A1%AC%E4%BB%B6\">硬件</a></li>\n<li><a href=\"/posts/take-parents-to-beijing/#%E8%BD%AF%E4%BB%B6\">软件</a></li>\n<li><a href=\"/posts/take-parents-to-beijing/#%E6%8B%8D%E6%91%84%E5%9C%B0%E7%82%B9\">拍摄地点</a></li>\n<li><a href=\"/posts/take-parents-to-beijing/#%E6%9C%80%E5%90%8E%E5%86%8D%E8%AF%B4%E4%B8%80%E5%8F%A5\">最后再说一句</a></li>\n</ul>","excerpt":"引子 去年夏天把父母和奶奶接北京玩了几天，担心奶奶体力问题，还备用了轮椅。结果几天下来，老人家依然劲头十足，我却累蔫儿了。 好吧，以上不是重点，重点是游玩期间我做了个视频，放在了 网上 （可以直接跳到文章底部观看）。令我惊讶的是，半年多过去了，突然有歪果仁来了封邮件，问视频是怎么做的： How…"}},{"node":{"fields":{"slug":"/posts/upgrade-hexo-to-3-2"},"html":"<p><img src=\"https://zerosoul.github.io/2016/06/15/upgrade-hexo-to-3-2/crazy.jpg\" alt=\"crazy\"></p>\n<h1 id=\"动机\"><a href=\"#%E5%8A%A8%E6%9C%BA\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>动机</h1>\n<p>好久没去<a href=\"https://hexo.io\">Hexo官网</a>逛逛了，陡然发现有<a href=\"https://hexo.io/news/2016/02/28/hexo-3-2-released/\">新版本</a>了，其重要的改进在于生成静态文件的速度，对于文章越写越多，生成时间越来越长的我，是个极大的诱惑。作为一个还停留在2.X版本的Hexo党，毅然决然地要尝一下鲜。</p>\n<h1 id=\"思路\"><a href=\"#%E6%80%9D%E8%B7%AF\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>思路</h1>\n<ol>\n<li>\n<p>先全局升级<code class=\"language-text\">hexo-cli</code>：</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\">\n      <pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> i hexo-cli -g</code></pre>\n      </div>\n<p>通过<code class=\"language-text\">hexo version</code>查看下版本：</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\">\n      <pre class=\"language-bash\"><code class=\"language-bash\">hexo: 3.2.0 //版本号已变\n\nhexo-cli: 1.0.2\n\nos: Darwin 15.5.0 darwin x64\n\nhttp_parser: 2.7.0\n\nnode: 6.2.1 \n\nv8: 5.0.71.52\n\nuv: 1.9.1\n\nzlib: 1.2.8\n\nares: 1.10.1-DEV\n\nicu: 57.1\n\nmodules: 48\n\nopenssl: 1.0.2h</code></pre>\n      </div>\n<p>注：我的node版本略高，不建议使用高版本，因为经常踩坑，5就足够了。当然，可以使用nvm工具来管理node版本。</p>\n</li>\n<li>\n<p>找个风水宝地，初始化一个新版本的hexo博客目录：</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\">\n      <pre class=\"language-bash\"><code class=\"language-bash\">hexo init new\\_blog <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">cd</span> new\\_blog <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">npm</span> i <span class=\"token operator\">&amp;&amp;</span> hexo s</code></pre>\n      </div>\n</li>\n<li>\n<p>访问下<code class=\"language-text\">http://localhost:4000</code>，确认下初始化成功了么。正常的话，看到的是默认主题的首页。</p>\n</li>\n<li>\n<p>把原博客目录<code class=\"language-text\">source</code>下的东西全部拷贝到新目录对应位置上。这是关键的一步，相当于迁移数据源。</p>\n</li>\n<li>\n<p>接下来，是容易踩坑的地方了，不要把原Hexo的配置文件<code class=\"language-text\">_config.yml</code>直接覆盖过来，因为新版本的Hexo有些插件不走配置文件了，容易出错。所以我在踩了这个坑之后，索性基于新<code class=\"language-text\">_config.yml</code>来更新对应值，至于插件的配置，全部放弃。</p>\n</li>\n<li>\n<p>接下来，是主题的更新，我使用的是<a href=\"http://theme-next.iissnan.com/\">Next</a>。发现这个也有新版本了，索性一起更新了。具体步骤请参照<a href=\"http://theme-next.iissnan.com/getting-started.html\">这里</a>。另，原有主题我更改了一些地方，又花了点时间把琐碎的增量更改也做了。</p>\n</li>\n<li>\n<p>接下来，<code class=\"language-text\">hexo g</code>一下，发现有报错，看了下报错信息和我使用<a href=\"https://github.com/gyk001/hexo-qiniu-sync\"><code class=\"language-text\">hexo-qiniu-sync</code></a>插件有关，于是把七牛插件给装上：<code class=\"language-text\">npm install hexo-qiniu-sync --save</code>。注意，别忘了更新<code class=\"language-text\">_config.yml</code>对应的配置，这个可以从原来的地方拷贝过来。</p>\n</li>\n<li>\n<p>另外，我还用到了两个插件<code class=\"language-text\">hexo-generator-sitemap</code>，<code class=\"language-text\">hexo-generator-feed</code>，一行代码搞定：</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\">\n      <pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> i hexo-generator-sitemap hexo-generator-feed --save</code></pre>\n      </div>\n</li>\n<li>\n<p>下面到了最坑的地方了，平时使用<code class=\"language-text\">hexo-browsersync</code>来边写边看效果，所以升级后自然也得想着它。装上这个插件在我的环境下会导致大部分页面白板，动画效果也没有了。查看了下生成的页面代码，底部有乱码。估计是我的node版本太高导致的，使用nvm降到5，问题依旧。然后去插件<a href=\"https://github.com/hexojs/hexo-browsersync\">Github地址</a>逛逛有没有遇到类似问题的同学，很遗憾，就四个提问题的，和我遇到的问题无关。转变思路，看看是不是版本依赖问题，<code class=\"language-text\">hexo-browsersync</code>最重要的依赖便是<code class=\"language-text\">browsersync</code>，将其升级到最新版本：修改该模块的<code class=\"language-text\">package.json</code>对应的<code class=\"language-text\">browsersync</code>版本号为<code class=\"language-text\">*</code>，然后<code class=\"language-text\">npm update --save</code>。接下来，试试问题有没有解决，果然！不出所料！这样做并没有什么卵用…o(╯□╰)o。<br>\n纠结到最后，还是暂时去掉了这一功能：<code class=\"language-text\">npm uninstall hexo-browsersync --save</code>。以后会看一下里面源码，看看到底哪儿的问题。而现在，我需要的就是一个可以写文章和发布的Hexo，虽然用起来不是很便捷，但这已足够了。</p>\n</li>\n<li>\n<p>最后：<code class=\"language-text\">npm i --save hexo-deployer-git</code>，配置下<code class=\"language-text\">_config.yml</code>对应的git选项。</p>\n</li>\n</ol>\n<h1 id=\"感想\"><a href=\"#%E6%84%9F%E6%83%B3\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>感想</h1>\n<p>断断续续折腾了两天，才升级成功。所以，如果有啥感想，那就是：<strong>没事别瞎TM升级！</strong>当然，如果一定要升级，最好做增量升级：另起炉灶，一项一项地加功能，这样好定位问题，也容易回滚。</p>","frontmatter":{"title":"Hexo升级之坑","date":"2016-06-15T09:31:37.000Z","category":"技术","tags":["hexo","备忘"],"cover":"https://zerosoul.github.io/2016/06/15/upgrade-hexo-to-3-2/crazy.jpg"},"tableOfContents":"<ul>\n<li><a href=\"/posts/upgrade-hexo-to-3-2/#%E5%8A%A8%E6%9C%BA\">动机</a></li>\n<li><a href=\"/posts/upgrade-hexo-to-3-2/#%E6%80%9D%E8%B7%AF\">思路</a></li>\n<li><a href=\"/posts/upgrade-hexo-to-3-2/#%E6%84%9F%E6%83%B3\">感想</a></li>\n</ul>","excerpt":"动机 好久没去 Hexo官网 逛逛了，陡然发现有 新版本 了，其重要的改进在于生成静态文件的速度，对于文章越写越多，生成时间越来越长的我，是个极大的诱惑。作为一个还停留在2.X版本的Hexo党，毅然决然地要尝一下鲜。 思路 先全局升级 ： 通过 查看下版本： 注：我的node…"}},{"node":{"fields":{"slug":"/posts/building-my-first-ios-app-with-react-native-part-two"},"html":"<p><img src=\"https://zerosoul.github.io/2016/06/07/building-my-first-ios-app-with-react-native-part-two/rn.png\" alt=\"React Native\"></p>\n<h1 id=\"再续前缘\"><a href=\"#%E5%86%8D%E7%BB%AD%E5%89%8D%E7%BC%98\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>再续前缘</h1>\n<p><a href=\"https://zerosoul.github.io/2016/06/05/building-my-first-ios-app-with-react-native-part-one/\">第一篇文章</a>，我们从零开始，一步一步走到最后，构建了一个似乎并没有卵用的APP。但是，我们做了大量的基础工作，不就是为了在接下来的继续更轻松自信些嘛！<br>\n<img src=\"https://zerosoul.github.io/2016/06/05/building-my-first-ios-app-with-react-native-part-two/zdw.jpg\" alt=\"wtf\"><br>\n其实，第一篇的信息量还是很大的，里面的每一个链接都是通往一个新知的大门，如果你觉得掌握得差不多了，那就开始新的旅（Che）程（Dan）吧！<br>\n<img src=\"https://zerosoul.github.io/2016/06/05/building-my-first-ios-app-with-react-native-part-two/haha.png\" alt=\"你懂的\"><br>\n第二篇文章也是分五小节叙述，每一节完成一个小功能，最终召唤出还算有点卵用的APP。</p>\n<h1 id=\"1召唤出壁纸和作者\"><a href=\"#1%E5%8F%AC%E5%94%A4%E5%87%BA%E5%A3%81%E7%BA%B8%E5%92%8C%E4%BD%9C%E8%80%85\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1.召唤出壁纸和作者</h1>\n<p>首先，我们先研究下数据，下面是从<a href=\"https://unsplash.it/list\">Unsplash</a>获取的一个数据实例：</p>\n<div class=\"gatsby-highlight\" data-language=\"js\">\n      <pre class=\"language-js\"><code class=\"language-js\"><span class=\"token punctuation\">{</span>\n\n    author<span class=\"token punctuation\">:</span><span class=\"token string\">\"Ben Moore\"</span>\n\n    author_url<span class=\"token punctuation\">:</span><span class=\"token string\">\"https://unsplash.com/@benmoore\"</span>\n\n    filename<span class=\"token punctuation\">:</span><span class=\"token string\">\"0102_pJILiyPdrXI.jpeg\"</span>\n\n    format<span class=\"token punctuation\">:</span><span class=\"token string\">\"jpeg\"</span>\n\n    height<span class=\"token punctuation\">:</span><span class=\"token number\">3240</span>\n\n    id<span class=\"token punctuation\">:</span><span class=\"token number\">102</span>\n\n    post_url<span class=\"token punctuation\">:</span><span class=\"token string\">\"https://unsplash.com/photos/pJILiyPdrXI\"</span>\n\n    width<span class=\"token punctuation\">:</span><span class=\"token number\">4320</span> \n\n<span class=\"token punctuation\">}</span></code></pre>\n      </div>\n<p>要想获取该实例的图片，在浏览器中输入以下格式的URL<code class=\"language-text\">http://unsplash.it/{width}/{height}?image={id}</code>，换算到该实例即：<a href=\"http://unsplash.it/4320/3240?image=102\"><code class=\"language-text\">http://unsplash.it/4320/3240?image=102</code></a>。这样，我们就能拿到一张壁纸的地址了。我们可以用<code class=\"language-text\">Image</code>组件中的<code class=\"language-text\">source</code>来把图片加载出来。</p>\n<p>但是，进一步想了想，这么大的图片会有一定的加载时间，最好能有个图片的加载进度什么的，让用户不再一脸懵逼地等着。一开始就做对，后面的修改成本会小很多，有两个组件的组合能够做到预期效果：</p>\n<p><a href=\"https://github.com/oblador/react-native-image-progress\"><strong>image-native-progress</strong></a>和<a href=\"https://github.com/oblador/react-native-progress\"><strong>react-native-progress</strong></a>。</p>\n<p>在项目根目录下运行命令：<code class=\"language-text\">npm i --save react-native-image-progress react-native-progress</code>，然后，我们在<strong>index.ios.js</strong>中引用：  </p>\n<div class=\"gatsby-highlight\" data-language=\"js\">\n      <pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> NetworkImage <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'react-native-image-progress'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">var</span> Progress <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'react-native-progress'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n      </div>\n<p>既然要做手机壁纸应用，那么就应该得到手机屏幕的长和宽：  </p>\n<div class=\"gatsby-highlight\" data-language=\"js\">\n      <pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> <span class=\"token punctuation\">{</span>width<span class=\"token punctuation\">,</span> height<span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span>Dimensions<span class=\"token punctuation\">.</span><span class=\"token keyword\">get</span><span class=\"token punctuation\">(</span>'window’<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n      </div>\n<p>哦对了，为了去掉烦人的<code class=\"language-text\">React.Dimensions</code>，可以在头部引入<code class=\"language-text\">Dimensions</code>组件：  </p>\n<div class=\"gatsby-highlight\" data-language=\"js\">\n      <pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span>\n\n  AppRegistry<span class=\"token punctuation\">,</span>\n\n  StyleSheet<span class=\"token punctuation\">,</span>\n\n  Text<span class=\"token punctuation\">,</span>\n\n  View<span class=\"token punctuation\">,</span>\n\n  ActivityIndicatorIOS<span class=\"token punctuation\">,</span>\n\n  <span class=\"token comment\">/***/</span>\n\n  Dimensions \n\n  <span class=\"token comment\">/***/</span>\n\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-native'</span><span class=\"token punctuation\">;</span></code></pre>\n      </div>\n<p>这样，我们就可以在<code class=\"language-text\">renderResults</code>中使用<code class=\"language-text\">NetworkImage</code>了：  </p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\">\n      <pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Swiper</span> <span class=\"token attr-name\">...</span> <span class=\"token punctuation\">></span></span>\n\n  <span class=\"token punctuation\">{</span>wallsJSON<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>wallpaper<span class=\"token punctuation\">,</span> index<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">return</span><span class=\"token punctuation\">(</span>\n\n    <span class=\"token comment\">/***/</span>\n\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>View</span> <span class=\"token attr-name\">key</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>index<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span>\n\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>NetworkImage</span>\n\n          <span class=\"token attr-name\">source</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>uri<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`https://unsplash.it/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>wallpaper<span class=\"token punctuation\">.</span>width<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>wallpaper<span class=\"token punctuation\">.</span>height<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">?image=</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>wallpaper<span class=\"token punctuation\">.</span>id<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">`</span></span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span>\n\n          <span class=\"token attr-name\">indicator</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>Progress<span class=\"token punctuation\">.</span>Circle<span class=\"token punctuation\">}</span></span>\n\n          <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>styles<span class=\"token punctuation\">.</span>wallpaperImage<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span>\n\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>NetworkImage</span><span class=\"token punctuation\">></span></span>\n\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>View</span><span class=\"token punctuation\">></span></span>\n\n    <span class=\"token comment\">/***/</span>\n\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \n\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>Swiper</span><span class=\"token punctuation\">></span></span></code></pre>\n      </div>\n<p><strong>注：此处<code class=\"language-text\">NetworkImage</code>的<code class=\"language-text\">uri</code>特性用到了ES6的模板字符串特性，懵逼的同学去<a href=\"https://zerosoul.github.io/2016/06/05/building-my-first-ios-app-with-react-native-part-one/#%E5%85%88%E8%B0%88%E8%B0%88%E9%9C%80%E6%B1%82\">上一篇文章</a>找链接复习一下哈。</strong></p>\n<p>再加个样式：  </p>\n<div class=\"gatsby-highlight\" data-language=\"js\">\n      <pre class=\"language-js\"><code class=\"language-js\">wallpaperImage<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n\n  flex<span class=\"token punctuation\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n\n  width<span class=\"token punctuation\">:</span> width<span class=\"token punctuation\">,</span>\n\n  height<span class=\"token punctuation\">:</span> height<span class=\"token punctuation\">,</span>\n\n  backgroundColor<span class=\"token punctuation\">:</span> ‘#<span class=\"token number\">000</span>’\n\n<span class=\"token punctuation\">}</span></code></pre>\n      </div>\n<p>保存然后刷新模拟器，不出意外的话…你将看到一堆报错的页面。<br>\n<img src=\"https://zerosoul.github.io/2016/06/05/building-my-first-ios-app-with-react-native-part-two/long.jpg\" alt=\"成龙\"><br>\n别慌，我们来研究下刚刚加的代码，注意到<code class=\"language-text\">indicator={Progress.Circle}</code>没有？在<code class=\"language-text\">react-native-progress</code>文档里有提到（别告诉我你没看<a href=\"https://github.com/oblador/react-native-progress\">文档</a>(╯‵□′)╯︵┻━┻），<code class=\"language-text\">Progress.Circle</code>需要<strong>ReactART</strong>：使用React来画矢量图的类库。我们不需要下载任何新东西，只需要通过Xcode将其引入到项目中。<br>\n很简单，只是有点繁琐：</p>\n<ol>\n<li>移步 <code class=\"language-text\">node_modules/react-native/Libraries/ART/</code><br>\n<img src=\"https://zerosoul.github.io/2016/06/05/building-my-first-ios-app-with-react-native-part-two/dir.png\" alt=\"art目录\"></li>\n<li>将<em>ART.xcodeproj</em>拖拽到Xcode的<em>PIW/Libraries</em>下<br>\n<img src=\"https://zerosoul.github.io/2016/06/05/building-my-first-ios-app-with-react-native-part-two/libs.png\" alt=\"libs\"></li>\n<li>定位到<em>Build Phases</em>，友情提示：它与<em>General</em>,<em>Capabilities</em>等同级。<br>\n<img src=\"https://zerosoul.github.io/2016/06/05/building-my-first-ios-app-with-react-native-part-two/buildphase.png\"></li>\n<li>将<em>ART.xcodeproj/Products</em>下的<em>libART.a</em>拖拽到<em>Build Phases</em>下的<em>Link Binary With Libraries</em>条目下：<br>\n<img src=\"https://zerosoul.github.io/2016/06/05/building-my-first-ios-app-with-react-native-part-two/linklib.png\"></li>\n</ol>\n<p>就这么简单，全是些拖拖拽拽的活儿。</p>\n<p>然后，刷新模拟器。酷！我们已经能够看到带加载进度的壁纸，并且能左右滑动浏览。有没有碰到心动的图片？载下来？莫慌，待会儿来满足你。现在，我们先修改下进度提示的样式，这个在<code class=\"language-text\">NetworkImage</code>下的<code class=\"language-text\">indicatorProps</code>可以设置：  </p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\">\n      <pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>NetworkImage</span>\n\n  <span class=\"token attr-name\">source</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>uri<span class=\"token punctuation\">:</span><span class=\"token template-string\"><span class=\"token string\">`https://unsplash.it/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>wallpaper<span class=\"token punctuation\">.</span>width<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>wallpaper<span class=\"token punctuation\">.</span>height<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">?image=</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>wallpaper<span class=\"token punctuation\">.</span>id<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">`</span></span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span>\n\n  <span class=\"token attr-name\">indicator</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>Progress<span class=\"token punctuation\">.</span>Circle<span class=\"token punctuation\">}</span></span>\n\n  <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>styles<span class=\"token punctuation\">.</span>wallpaperImage<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span>\n\n  <span class=\"token comment\">/***/</span>\n\n  indicatorProps<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>\n\n    color<span class=\"token punctuation\">:</span><span class=\"token string\">'rgba(255,255,255,0.8)'</span><span class=\"token punctuation\">,</span>\n\n    size<span class=\"token punctuation\">:</span><span class=\"token number\">50</span><span class=\"token punctuation\">,</span>\n\n    thickness<span class=\"token punctuation\">:</span><span class=\"token number\">4</span>\n\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">/***/</span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>NetworkImage</span><span class=\"token punctuation\">></span></span></code></pre>\n      </div>\n<p>修改后进度提示应该长这样：<br>\n<img src=\"https://zerosoul.github.io/2016/06/05/building-my-first-ios-app-with-react-native-part-two/indicator.png\" alt=\"indicator\"></p>\n<p>接下来，把图片的作者名字加上，我们要做尊重知识版权的好公民：  </p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\">\n      <pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>NetworkImage</span>\n\n<span class=\"token attr-name\">...</span>\n\n<span class=\"token punctuation\">></span></span>\n\n<span class=\"token comment\">/***/</span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Text</span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>styles<span class=\"token punctuation\">.</span>label<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span>Photo by<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>Text</span><span class=\"token punctuation\">></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Text</span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>styles<span class=\"token punctuation\">.</span>label\\_author\\_name<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>wallpaper<span class=\"token punctuation\">.</span>author<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>Text</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token comment\">/***/</span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>NetworkImage</span><span class=\"token punctuation\">></span></span></code></pre>\n      </div>\n<p>别忘了创建各自对应的样式对象：</p>\n<div class=\"gatsby-highlight\" data-language=\"css\">\n      <pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">label:</span><span class=\"token punctuation\">{</span>\n\n    <span class=\"token property\">position</span><span class=\"token punctuation\">:</span><span class=\"token string\">'absolute'</span>,\n\n    <span class=\"token property\">color</span><span class=\"token punctuation\">:</span><span class=\"token string\">'#fff'</span>,\n\n    <span class=\"token property\">fontSize</span><span class=\"token punctuation\">:</span>13,\n\n    <span class=\"token property\">backgroundColor</span><span class=\"token punctuation\">:</span><span class=\"token string\">'#000'</span>,\n\n    <span class=\"token property\">padding</span><span class=\"token punctuation\">:</span>5,\n\n    <span class=\"token property\">paddingLeft</span><span class=\"token punctuation\">:</span>8,\n\n    <span class=\"token property\">top</span><span class=\"token punctuation\">:</span>20,\n\n    <span class=\"token property\">left</span><span class=\"token punctuation\">:</span>20\n\n  <span class=\"token punctuation\">}</span><span class=\"token selector\">,\n\nlabel_author_name:</span><span class=\"token punctuation\">{</span>\n\n    <span class=\"token property\">position</span><span class=\"token punctuation\">:</span><span class=\"token string\">'absolute'</span>,\n\n    <span class=\"token property\">color</span><span class=\"token punctuation\">:</span><span class=\"token string\">'#fff'</span>,\n\n    <span class=\"token property\">fontSize</span><span class=\"token punctuation\">:</span>15,\n\n    <span class=\"token property\">backgroundColor</span><span class=\"token punctuation\">:</span><span class=\"token string\">'#000'</span>,\n\n    <span class=\"token property\">padding</span><span class=\"token punctuation\">:</span>5,\n\n    <span class=\"token property\">paddingLeft</span><span class=\"token punctuation\">:</span>8,\n\n    <span class=\"token property\">top</span><span class=\"token punctuation\">:</span>52,\n\n    <span class=\"token property\">left</span><span class=\"token punctuation\">:</span>20,\n\n    <span class=\"token property\">fontWeight</span><span class=\"token punctuation\">:</span><span class=\"token string\">'bold'</span>\n\n  <span class=\"token punctuation\">}</span></code></pre>\n      </div>\n<p>来来来，我们瞅瞅加了作者后的效果：<br>\n<img src=\"https://zerosoul.github.io/2016/06/05/building-my-first-ios-app-with-react-native-part-two/withauthor.png\"></p>\n<p>有木有瞬间感觉像那么回事儿了！<br>\n<img src=\"https://zerosoul.github.io/2016/06/05/building-my-first-ios-app-with-react-native-part-two/dese.png\"></p>\n<p>走到这儿，这一节算完事儿了，为了能下载壁纸，我们将在下一节做一些更加有技术含量的事儿。</p>\n<h1 id=\"2-捕捉双击操作double-taps\"><a href=\"#2-%E6%8D%95%E6%8D%89%E5%8F%8C%E5%87%BB%E6%93%8D%E4%BD%9Cdouble-taps\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. 捕捉双击操作(Double-Taps)</h1>\n<p>这一节我们要用到的是PanResponder，这个API能做一些很酷的事情，比如捕捉双击操作。</p>\n<p>其实，如果偷懒，完全可以在页面上放一个下载按钮，点击就下载，完活儿！但是，我们要做就做有逼格的事儿，双击图片下载就很符合这个档次，恩，撸起袖子干吧！</p>\n<p>在开始之前，最好阅读一遍<a href=\"https://facebook.github.io/react-native/docs/panresponder.html\">PanResponder API</a>文档，因为你不读一遍，也不知道这个文档其实也没啥卵用o(╯□╰)o。不过我们至少知道了PanResponder的基本用法，这就够了。</p>\n<p>废话少说，开始撸代码。首先，在构造函数里声明一个新对象：  </p>\n<div class=\"gatsby-highlight\" data-language=\"js\">\n      <pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>imagePanResponder <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre>\n      </div>\n<p>别忘了在顶部引入<code class=\"language-text\">PanResponder</code>的声明：  </p>\n<div class=\"gatsby-highlight\" data-language=\"js\">\n      <pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span>\n\n  AppRegistry<span class=\"token punctuation\">,</span>\n\n  StyleSheet<span class=\"token punctuation\">,</span>\n\n  Text<span class=\"token punctuation\">,</span>\n\n  View<span class=\"token punctuation\">,</span>\n\n  ActivityIndicatorIOS<span class=\"token punctuation\">,</span>\n\n  <span class=\"token comment\">/***/</span>\n\n  PanResponder\n\n  <span class=\"token comment\">/***/</span>\n\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-native'</span><span class=\"token punctuation\">;</span></code></pre>\n      </div>\n<p>接下来我们要做两件事：</p>\n<ul>\n<li>创建一个<code class=\"language-text\">PanResponder</code>并赋值<code class=\"language-text\">imagePanResponder</code></li>\n<li>将<code class=\"language-text\">imagePanResponder</code>关联到<code class=\"language-text\">&lt;NetworkImage&gt;</code>组件</li>\n</ul>\n<p>为了完成第一件事，需要新增一个生命周期函数:<code class=\"language-text\">componentWillMount</code>。这个函数只有在组件首次渲染时才会触发，所以非常适合用于初始化<code class=\"language-text\">PanResponder</code>：  </p>\n<div class=\"gatsby-highlight\" data-language=\"js\">\n      <pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">componentWillMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>imagePanResponder <span class=\"token operator\">=</span> PanResponder<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n\n      onStartShouldSetPanResponder<span class=\"token punctuation\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleStartShouldSetPanResponder<span class=\"token punctuation\">,</span>\n\n      onPanResponderGrant<span class=\"token punctuation\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handlePanResponderGrant<span class=\"token punctuation\">,</span>\n\n      onPanResponderRelease<span class=\"token punctuation\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handlePanResponderEnd<span class=\"token punctuation\">,</span>\n\n      onPanResponderTerminate<span class=\"token punctuation\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handlePanResponderEnd\n\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token punctuation\">}</span></code></pre>\n      </div>\n<p>初始化完了，就可以将这些事件关联到<code class=\"language-text\">NetworkImage</code>组件了：</p>\n<div class=\"gatsby-highlight\" data-language=\"js\">\n      <pre class=\"language-js\"><code class=\"language-js\"> <span class=\"token punctuation\">{</span><span class=\"token operator\">...</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>imagePanResponder<span class=\"token punctuation\">.</span>panHandlers<span class=\"token punctuation\">}</span><span class=\"token operator\">></span></code></pre>\n      </div>\n<p>注：<code class=\"language-text\">...</code>是ES6中的扩展运算符，如果懵逼，请移步<a href=\"https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Operators/Spread_operator\">这里</a>充电。</p>\n<p>一般来说，一个触摸事件有三个阶段：开始（start）、移动（move）、释放（release），一个组件能够通过声明响应特定的触摸事件。<code class=\"language-text\">PanResponder.create({...</code>下提到的第一个事件<code class=\"language-text\">onStartShouldSetPanResponder</code>，从英文名字的意思大概也能猜出，这是在请求是否能将<code class=\"language-text\">PanResponder</code>绑定在该组件上。紧跟其后是一个方法<code class=\"language-text\">this.handleOnStartShouldSetPanResponder</code>，用于响应该事件，若该方法返回<code class=\"language-text\">true</code>，则通过请求，然后才能谈下一步，<code class=\"language-text\">false</code>则相反。所以，你应该知道在此我们应该返回什么，认清你的阶级立场，同志，老大哥在看着你：  </p>\n<div class=\"gatsby-highlight\" data-language=\"js\">\n      <pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">handleStartShouldSetPanResponder</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">,</span> gestureState<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span></code></pre>\n      </div>\n<p>紧随其后的<code class=\"language-text\">onPanResponderGrant</code>是在一旦有了触摸时触发，在此我们先打印一个信息占个坑：  </p>\n<div class=\"gatsby-highlight\" data-language=\"js\">\n      <pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">handlePanResponderGrant</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"手指触摸到屏幕啦~~~\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token punctuation\">}</span></code></pre>\n      </div>\n<p>最后两个事件从字面上也都能自解释，在手指离开屏幕时，都能触发，在此我们还是先打印信息占个坑：  </p>\n<div class=\"gatsby-highlight\" data-language=\"js\">\n      <pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">handlePanResponderEnd</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"手指离开屏幕啦~~~\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token punctuation\">}</span></code></pre>\n      </div>\n<p>保存代码，壁纸一旦加载完毕，点击一下，应该会看到如下打印信息：<br>\n<img src=\"https://zerosoul.github.io/2016/06/05/building-my-first-ios-app-with-react-native-part-two/touched.png\"></p>\n<p>OK，基于这些认知，我们可以开始捕捉双击操作了。判断是否为双击操作的关键是需要知道上一操作的信息：触摸发生的<strong>坐标</strong>和<strong>时间戳</strong>。在构造函数新增对象<code class=\"language-text\">prevTouchInfo</code>用于保存触摸信息：  </p>\n<div class=\"gatsby-highlight\" data-language=\"js\">\n      <pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>prevTouchInfo <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token constant\">X</span><span class=\"token punctuation\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token constant\">Y</span><span class=\"token punctuation\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n\n  timeStamp<span class=\"token punctuation\">:</span> <span class=\"token number\">0</span>\n\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre>\n      </div>\n<p>然后，在<code class=\"language-text\">handlePanResponderGrant</code>更新这个对象(注意代码的次序)：</p>\n<div class=\"gatsby-highlight\" data-language=\"js\">\n      <pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">handlePanResponderGrant</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">,</span> gestureState<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n<span class=\"token comment\">/***/</span>\n\n  <span class=\"token keyword\">var</span> currentTouchTimeStamp <span class=\"token operator\">=</span> Date<span class=\"token punctuation\">.</span><span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">isDoubleTap</span><span class=\"token punctuation\">(</span>currentTouchTimeStamp<span class=\"token punctuation\">,</span> gestureState<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span> \n\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'双击操作'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>prevTouchInfo <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token constant\">X</span><span class=\"token punctuation\">:</span> gestureState<span class=\"token punctuation\">.</span>x0<span class=\"token punctuation\">,</span>\n\n    <span class=\"token constant\">Y</span><span class=\"token punctuation\">:</span> gestureState<span class=\"token punctuation\">.</span>y0<span class=\"token punctuation\">,</span>\n\n    timeStamp<span class=\"token punctuation\">:</span> currentTouchTimeStamp\n\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/***/</span>\n\n<span class=\"token punctuation\">}</span></code></pre>\n      </div>\n<p><code class=\"language-text\">handlePanResponderGrant</code>在每次单击时都会触发，但是有个地方需要特别注意：此处的<code class=\"language-text\">this</code>并不是指向<code class=\"language-text\">PIW</code>类，而是<code class=\"language-text\">PanResponder</code>，为了正确的引用，我们需要在构造函数使用<code class=\"language-text\">bind</code>重新定向一下。而如果我们一开始选用<code class=\"language-text\">React.createClass({ ... })</code>来创建组件，就不会存在这个问题，<strong>autobinding</strong>会帮我们搞定这个问题。也算有得有失吧:</p>\n<p>1</p>\n<p>this.handlePanResponderGrant = this.handlePanResponderGrant.bind(this);</p>\n<p><code class=\"language-text\">isDoubleTap</code>是我们预先埋好的坑，下面我们填上它：  </p>\n<div class=\"gatsby-highlight\" data-language=\"js\">\n      <pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">isDoubleTap</span><span class=\"token punctuation\">(</span>currentTouchTimeStamp<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>x0<span class=\"token punctuation\">,</span> y0<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token keyword\">var</span> <span class=\"token punctuation\">{</span><span class=\"token constant\">X</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">Y</span><span class=\"token punctuation\">,</span> timeStamp<span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>prevTouchInfo<span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">var</span> dt <span class=\"token operator\">=</span> currentTouchTimeStamp <span class=\"token operator\">-</span> timeStamp<span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>dt <span class=\"token operator\">&lt;</span> <span class=\"token constant\">DOUBLE</span>\\_TAP\\_DELAY <span class=\"token operator\">&amp;&amp;</span> Utils<span class=\"token punctuation\">.</span><span class=\"token function\">distance</span><span class=\"token punctuation\">(</span><span class=\"token constant\">X</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">Y</span><span class=\"token punctuation\">,</span> x0<span class=\"token punctuation\">,</span> y0<span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;</span> <span class=\"token constant\">DOUBLE</span>\\_TAP\\_RADIUS<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span></code></pre>\n      </div>\n<p>好吧，你可能会注意到了，坑里有坑：</p>\n<ul>\n<li>\n<p><code class=\"language-text\">DOUBLE_TAP_DELAY</code>和<code class=\"language-text\">DOUBLE_TAP_RADIUS</code>是我们定义的常量，需要在头部初始化一下:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\">\n      <pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token constant\">DOUBLE</span>\\_TAP\\_DELAY <span class=\"token operator\">=</span> <span class=\"token number\">400</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// milliseconds</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token constant\">DOUBLE</span>\\_TAP\\_RADIUS <span class=\"token operator\">=</span> <span class=\"token number\">20</span><span class=\"token punctuation\">;</span></code></pre>\n      </div>\n</li>\n<li>\n<p>新建一个模块<strong>utils.js</strong>，暴露出<code class=\"language-text\">distance</code>：</p>\n<div class=\"gatsby-highlight\" data-language=\"js\">\n      <pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">distance</span><span class=\"token punctuation\">(</span>x0<span class=\"token punctuation\">,</span> y0<span class=\"token punctuation\">,</span> x1<span class=\"token punctuation\">,</span> y1<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token keyword\">return</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">sqrt</span><span class=\"token punctuation\">(</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">pow</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span> x1 <span class=\"token operator\">-</span> x0 <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">pow</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span> y1 <span class=\"token operator\">-</span> y0 <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span></code></pre>\n      </div>\n</li>\n</ul>\n<p><code class=\"language-text\">distance</code>是用来计算两个坐标之间的直线距离，还记得中学的几何公式吗？<br>\n<img src=\"https://zerosoul.github.io/2016/06/05/building-my-first-ios-app-with-react-native-part-two/distance.png\" alt=\"distance\"></p>\n<p><code class=\"language-text\">handlePanResponderGrant</code>最后一步是更新<code class=\"language-text\">prevTouchInfo</code>。</p>\n<p>保存代码，等壁纸加载完毕，双击屏幕，如果不出意外的话，控制台里会输出:<strong>双击操作</strong>。</p>\n<h1 id=\"3将壁纸保存到本地相册\"><a href=\"#3%E5%B0%86%E5%A3%81%E7%BA%B8%E4%BF%9D%E5%AD%98%E5%88%B0%E6%9C%AC%E5%9C%B0%E7%9B%B8%E5%86%8C\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3.将壁纸保存到本地相册</h1>\n<p>现在我们能捕捉到双击的手势了，也就可以开始着手撸保存壁纸的代码了。首先，我们把console代码替换成一个调用的方法，先占坑。  </p>\n<div class=\"gatsby-highlight\" data-language=\"js\">\n      <pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span> <span class=\"token function\">isDoubleTap</span><span class=\"token punctuation\">(</span>currentTouchTimeStamp<span class=\"token punctuation\">,</span> gestureState<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">saveCurrentWallpaperToCameraRoll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n      </div>\n<p>一会儿我们再来实现<code class=\"language-text\">saveCurrentWallpaperToCameraRoll</code>，下面我们先来看另一个问题：壁纸有五张，如何定位当前的这一张？<br>\n我们可以通过从零开始的索引来定位当前图片，每滑动一次就加1或者减1:  </p>\n<div class=\"gatsby-highlight\" data-language=\"js\">\n      <pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>currentWallIndex <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span></code></pre>\n      </div>\n<p>还记得上一篇我们预留的一个坑位吗？<code class=\"language-text\">Swiper</code>里的<code class=\"language-text\">onMomentumScrollEnd</code>，在该方法里更新<code class=\"language-text\">currentWallIndex</code>：  </p>\n<div class=\"gatsby-highlight\" data-language=\"js\">\n      <pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">onMomentumScrollEnd</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">,</span> state<span class=\"token punctuation\">,</span> context<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>currentWallIndex <span class=\"token operator\">=</span> state<span class=\"token punctuation\">.</span>index<span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span></code></pre>\n      </div>\n<p>同样的，别忘了在<code class=\"language-text\">constructor</code>里绑定<code class=\"language-text\">this</code>:</p>\n<p>1</p>\n<p>this.onMomentumScrollEnd = this.onMomentumScrollEnd.bind(this);</p>\n<p>好了，我们开始为<code class=\"language-text\">saveCurrentWallpaperToCameraRoll</code>填坑了。为了能访问相册，需要先引入<code class=\"language-text\">Camera Roll</code>类库，还记得开头是怎么引入<code class=\"language-text\">ReactART</code>的吗？没错，照做一遍就可以：<code class=\"language-text\">node_modules/react-native/Libraries/CameraRoll</code><br>\n<img src=\"https://zerosoul.github.io/2016/06/05/building-my-first-ios-app-with-react-native-part-two/cameraroll.png\"></p>\n<p>然后就可以导入了：  </p>\n<div class=\"gatsby-highlight\" data-language=\"js\">\n      <pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span>\n\n  View<span class=\"token punctuation\">,</span>\n\n  Text<span class=\"token punctuation\">,</span>\n\n  StyleSheet<span class=\"token punctuation\">,</span>\n\n  Dimensions<span class=\"token punctuation\">,</span>\n\n  PanResponder<span class=\"token punctuation\">,</span>\n\n  <span class=\"token comment\">/***/</span>\n\n  CameraRoll<span class=\"token punctuation\">,</span> <span class=\"token comment\">// 访问相册</span>\n\n  AlertIOS <span class=\"token comment\">// iOS的弹出框</span>\n\n  <span class=\"token comment\">/***/</span>\n\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-native'</span><span class=\"token punctuation\">;</span></code></pre>\n      </div>\n<p>一旦壁纸保存到相册，我们需要给用户一个保存成功的提示，<code class=\"language-text\">AlertIOS</code>帮我们做到这一点。现在，我们可以着手实现<code class=\"language-text\">saveCurrentWallpaperToCameraRoll</code>：  </p>\n<div class=\"gatsby-highlight\" data-language=\"js\">\n      <pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">saveCurrentWallpaperToCameraRoll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token keyword\">var</span> <span class=\"token punctuation\">{</span>wallsJSON<span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">var</span> currentWall <span class=\"token operator\">=</span> wallsJSON<span class=\"token punctuation\">[</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>currentWallIndex<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">var</span> currentWallURL <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token string\">`http://unsplash.it/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>currentWall<span class=\"token punctuation\">.</span>width<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>currentWall<span class=\"token punctuation\">.</span>height<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">?image=</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>currentWall<span class=\"token punctuation\">.</span>id<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">`</span></span><span class=\"token punctuation\">;</span>\n\n  CameraRoll<span class=\"token punctuation\">.</span><span class=\"token function\">saveImageWithTag</span><span class=\"token punctuation\">(</span>currentWallURL<span class=\"token punctuation\">)</span>\n\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\n    AlertIOS<span class=\"token punctuation\">.</span><span class=\"token function\">alert</span><span class=\"token punctuation\">(</span>\n\n      <span class=\"token string\">'保存成功'</span><span class=\"token punctuation\">,</span>\n\n      <span class=\"token string\">'壁纸已保存到本地相册'</span><span class=\"token punctuation\">,</span>\n\n      <span class=\"token punctuation\">[</span>\n\n        <span class=\"token punctuation\">{</span>text<span class=\"token punctuation\">:</span> <span class=\"token string\">'好哒!'</span><span class=\"token punctuation\">,</span> onPress<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'OK Pressed!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n\n      <span class=\"token punctuation\">]</span>\n\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token punctuation\">.</span><span class=\"token keyword\">catch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span><span class=\"token punctuation\">{</span>\n\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Error saving to camera roll'</span><span class=\"token punctuation\">,</span> err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span></code></pre>\n      </div>\n<p>以上代码都能做到自解释，不懂的地方移步：<a href=\"https://facebook.github.io/react-native/docs/cameraroll.html\">CameraRoll</a>和<a href=\"https://facebook.github.io/react-native/docs/alertios.html\">AlertIOS</a>，你懂的。</p>\n<p>好啦，保存代码，去模拟器体验一下保存壁纸功能：（首次保存需要手动同意获取访问相册的权限）<br>\n<img src=\"https://zerosoul.github.io/2016/06/05/building-my-first-ios-app-with-react-native-part-two/saved.png\"><br>\n完美！额，等等，从双击到壁纸保存成功，好像有那么几秒的等待时间，用户可能会认为双击不成功，然后再双击一次，这不是我们的期望，下一节专门解决这个问题！</p>\n<h1 id=\"4创建一个等待组件：waitingjs\"><a href=\"#4%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%AD%89%E5%BE%85%E7%BB%84%E4%BB%B6%EF%BC%9Awaitingjs\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4.创建一个等待组件：Waiting.js</h1>\n<p>如果没记错的话，我们将创建第一个组件：Waiting.js。这个组件用于异步操作的等待时间，比如保存壁纸到相册的操作，就很有必要加一个等待提示，让用户知道APP在做什么。</p>\n<p>在项目根目录新建文件：<strong>Waiting.js</strong>：  </p>\n<div class=\"gatsby-highlight\" data-language=\"js\">\n      <pre class=\"language-js\"><code class=\"language-js\"><span class=\"token string\">'use strict'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span>\n\n  View<span class=\"token punctuation\">,</span>\n\n  Text<span class=\"token punctuation\">,</span>\n\n  Component<span class=\"token punctuation\">,</span>\n\n  ActivityIndicatorIOS<span class=\"token punctuation\">,</span>\n\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-native'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">default</span> Waiting <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \n\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">var</span> <span class=\"token punctuation\">{</span>width<span class=\"token punctuation\">,</span> height<span class=\"token punctuation\">,</span> isVisible<span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span> isVisible <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n      <span class=\"token keyword\">return</span><span class=\"token punctuation\">(</span>\n\n        <span class=\"token operator\">&lt;</span>View \n\n         style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>\n\n          flex<span class=\"token punctuation\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n\n          flexDirection<span class=\"token punctuation\">:</span> <span class=\"token string\">'row'</span><span class=\"token punctuation\">,</span>\n\n          justifyContent<span class=\"token punctuation\">:</span> <span class=\"token string\">'center'</span><span class=\"token punctuation\">,</span>\n\n          alignItems<span class=\"token punctuation\">:</span> <span class=\"token string\">'center'</span><span class=\"token punctuation\">,</span>\n\n          width<span class=\"token punctuation\">:</span> width<span class=\"token punctuation\">,</span>\n\n          height<span class=\"token punctuation\">:</span> height<span class=\"token punctuation\">,</span>\n\n          position<span class=\"token punctuation\">:</span> <span class=\"token string\">'absolute'</span><span class=\"token punctuation\">,</span>\n\n          top<span class=\"token punctuation\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n\n          left<span class=\"token punctuation\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n\n          backgroundColor<span class=\"token punctuation\">:</span> <span class=\"token string\">'rgba(0, 0, 0, 0.5)'</span>\n\n         <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n\n         <span class=\"token operator\">&lt;</span>ActivityIndicatorIOS\n\n            animating<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">}</span>\n\n            color<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">'#fff'</span><span class=\"token punctuation\">}</span>\n\n            size<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">'large'</span><span class=\"token punctuation\">}</span> \n\n            style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>margin<span class=\"token punctuation\">:</span> <span class=\"token number\">15</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n\n           <span class=\"token operator\">&lt;</span>Text style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>color<span class=\"token punctuation\">:</span>’#fff’<span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span>正在保存，请稍后<span class=\"token operator\">...</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Text<span class=\"token operator\">></span>\n\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>View<span class=\"token operator\">></span> \n\n      <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n\n      <span class=\"token keyword\">return</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&lt;</span>View<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>View<span class=\"token operator\">></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token punctuation\">}</span>\n\n  <span class=\"token punctuation\">}</span> \n\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> Waiting<span class=\"token punctuation\">;</span></code></pre>\n      </div>\n<p><code class=\"language-text\">render</code>第一行代码作用是从组件的<code class=\"language-text\">props</code>中获取相应的属性，其中<code class=\"language-text\">isVisible</code>用于判断是否显示该组件，使用该组件的格式：  </p>\n<p>1</p>\n<Waiting width={width} height={height} isVisible={isWaitingVisible}/>\n<p>在<strong>index.ios.js</strong>中引入<strong>Waiting.js</strong>  </p>\n<p>1</p>\n<p>var Waiting = require('./Waiting.js');</p>\n<p>为了能控制Waiting组件的显示与隐藏，需要在<strong>index.ios.js</strong>新增一个状态：  </p>\n<div class=\"gatsby-highlight\" data-language=\"js\">\n      <pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n\n  wallsJSON<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n\n  isLoading<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n\n<span class=\"token comment\">/***/</span>\n\n  isWaitngVisible<span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span> <span class=\"token comment\">// 默认不显示</span>\n\n<span class=\"token comment\">/***/</span>\n\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre>\n      </div>\n<p>现在，我们可以在<code class=\"language-text\">&lt;/Swiper</code>之后放入<code class=\"language-text\">&lt;Waiting&gt;</code>组件了，不过，直接这样做会导致报错，因为<a href=\"https://facebook.github.io/react/tips/maximum-number-of-jsx-root-nodes.html\">React不允许返回多个组件</a>。为了解决这个问题，我们需要用<code class=\"language-<view\">&lt;/View</code>再做一个简单的包裹：  </p>\n<div class=\"gatsby-highlight\" data-language=\"js\">\n      <pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">renderResults</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token keyword\">var</span> <span class=\"token punctuation\">{</span>wallsJSON<span class=\"token punctuation\">,</span> isWaitngVisible<span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n\n  <span class=\"token comment\">/***/</span>\n\n    <span class=\"token operator\">&lt;</span>View<span class=\"token operator\">></span>\n\n  <span class=\"token comment\">/***/</span>\n\n    <span class=\"token operator\">&lt;</span>Swiper\n\n      <span class=\"token operator\">...</span><span class=\"token operator\">></span>\n\n<span class=\"token punctuation\">.</span>\n\n<span class=\"token punctuation\">.</span>\n\n<span class=\"token punctuation\">.</span>\n\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Swiper<span class=\"token operator\">></span>\n\n  <span class=\"token comment\">/***/</span>\n\n    <span class=\"token operator\">&lt;</span>Waiting width<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>width<span class=\"token punctuation\">}</span> height<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>height<span class=\"token punctuation\">}</span> isVisible<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>isWaitngVisible<span class=\"token punctuation\">}</span><span class=\"token operator\">/</span><span class=\"token operator\">></span>\n\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>View<span class=\"token operator\">></span>\n\n  <span class=\"token comment\">/***/</span>\n\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span></code></pre>\n      </div>\n<p>既然有了<code class=\"language-text\">isWaitngVisible</code>状态，我们就应该想一想在哪些时机来改变它的状态：双击触发时置为<code class=\"language-text\">true</code>，保存成功时置为<code class=\"language-text\">false</code>，对应到代码就是：  </p>\n<div class=\"gatsby-highlight\" data-language=\"js\">\n      <pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">saveCurrentWallpaperToCameraRoll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n<span class=\"token comment\">/***/</span>\n\n  <span class=\"token comment\">// Waiting 组件显示</span>\n\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>isWaitingVisible<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/***/</span>\n\n  <span class=\"token keyword\">var</span> <span class=\"token punctuation\">{</span>wallsJSON<span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">var</span> currentWall <span class=\"token operator\">=</span> wallsJSON<span class=\"token punctuation\">[</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>currentWallIndex<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">var</span> currentWallURL <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token string\">`http://unsplash.it/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>currentWall<span class=\"token punctuation\">.</span>width<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>currentWall<span class=\"token punctuation\">.</span>height<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">?image=</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>currentWall<span class=\"token punctuation\">.</span>id<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">`</span></span><span class=\"token punctuation\">;</span>\n\n  CameraRoll<span class=\"token punctuation\">.</span><span class=\"token function\">saveImageWithTag</span><span class=\"token punctuation\">(</span>currentWallURL<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\n<span class=\"token comment\">/***/</span>\n\n    <span class=\"token comment\">// Waiting 组件隐藏</span>\n\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>isWaitingVisible<span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/***/</span>\n\n    AlertIOS<span class=\"token punctuation\">.</span><span class=\"token function\">alert</span><span class=\"token punctuation\">(</span>\n\n      <span class=\"token string\">'保存成功'</span><span class=\"token punctuation\">,</span>\n\n      <span class=\"token string\">'壁纸已保存到本地相册'</span><span class=\"token punctuation\">,</span>\n\n      <span class=\"token punctuation\">[</span>\n\n        <span class=\"token punctuation\">{</span>text<span class=\"token punctuation\">:</span> <span class=\"token string\">'好哒！'</span><span class=\"token punctuation\">,</span> onPress<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'OK Pressed!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n\n      <span class=\"token punctuation\">]</span>\n\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span><span class=\"token punctuation\">{</span>\n\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Error saving to camera roll'</span><span class=\"token punctuation\">,</span> err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span></code></pre>\n      </div>\n<p>模拟器刷新，双击壁纸，等待组件出现，稍后保存成功的弹窗出现，等待组件消失，完美！</p>\n<p>额，等等，真的很完美吗？有没有注意到保存完图片，屏幕跳到了第一张图片。这是因为我们在<code class=\"language-text\">saveWallpaperToCameraRoll</code>调用<code class=\"language-text\">this.setState()</code>，改变了<code class=\"language-text\">isWaitingVisible</code>的状态，触发了<code class=\"language-text\">render()</code>，从而<code class=\"language-text\">swiper</code>重新加载数据并从第一张图显示。</p>\n<p>为了解决这个bug，我们可以通过<code class=\"language-text\">Swiper</code>的<code class=\"language-text\">index</code>入手：  </p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\">\n      <pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Swiper</span> <span class=\"token attr-name\">...</span>\n\n        <span class=\"token attr-name\">index</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>currentWallIndex<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span></code></pre>\n      </div>\n<p>这样，就保证了每次重新渲染，都从保存的那张开始。<br>\n<img src=\"https://zerosoul.github.io/2016/06/05/building-my-first-ios-app-with-react-native-part-two/saving.png\" alt=\"saving\"><br>\n好了，写到这里，我们基本完工一个核心功能完备的小应用：</p>\n<ul>\n<li>能加载随机精美壁纸</li>\n<li>能浏览</li>\n<li>能保存</li>\n</ul>\n<p>如果对随机的五张壁纸无感，想换一批，怎么破？当然，我们可以放置一个按钮，点击便能更新随机的壁纸数据，可是…能不能做得酷一些呢？比如只需要摇一摇手机，便更新了一批壁纸！</p>\n<p>年轻人，下一节我们做这件酷酷的事儿…<br>\n<img src=\"https://zerosoul.github.io/2016/06/05/building-my-first-ios-app-with-react-native-part-two/maomi.jpg\"></p>\n<h1 id=\"5摇一摇动作（shake）和真机测试\"><a href=\"#5%E6%91%87%E4%B8%80%E6%91%87%E5%8A%A8%E4%BD%9C%EF%BC%88shake%EF%BC%89%E5%92%8C%E7%9C%9F%E6%9C%BA%E6%B5%8B%E8%AF%95\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5.摇一摇动作（Shake）和真机测试</h1>\n<p>为了使我们的APP能够捕捉到摇一摇的动作，需要新增一个模块：<a href=\"https://www.npmjs.com/package/react-native-shake-event-ios\">react-native-shake-event-ios</a>。项目根目录运行：<code class=\"language-text\">npm install --save react-native-shake-event-ios</code>。</p>\n<p>另外，我们还需要做的是链接相应的类库。如果没记错的话，这是第三次，也是最后一次做这样的操作，我就不多说了，应该熟练了，少年。温馨提示：<code class=\"language-text\">node_modules/react-native-shake-event-ios/</code>下的<code class=\"language-text\">RNShakeEvent.xcodeproj</code></p>\n<p>引用该类库：  </p>\n<p>1</p>\n<p>var ShakeEvent = require('react-native-shake-event-ios');</p>\n<p>我们在<code class=\"language-text\">componentWillMount</code>新增摇一摇的监听动作：  </p>\n<div class=\"gatsby-highlight\" data-language=\"js\">\n      <pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">componentWillMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token operator\">...</span>\n\n<span class=\"token comment\">/***/</span>\n\n  <span class=\"token comment\">// 摇一摇，更新数据</span>\n\n  ShakeEvent<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'shake'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">initialize</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">fetchWallsJSON</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/***/</span>\n\n<span class=\"token punctuation\">}</span></code></pre>\n      </div>\n<p><code class=\"language-text\">initialize</code>填坑，其实就是初始化各种状态：  </p>\n<div class=\"gatsby-highlight\" data-language=\"js\">\n      <pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">initialize</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n\n    wallsJSON<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n\n    isLoading<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n\n    isWaitingVisible<span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span>\n\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>currentWallIndex <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span></code></pre>\n      </div>\n<p>保存代码，接下来我们开始真机测试。当然，如果没有真机，也可以通过快捷键组合：<code class=\"language-text\">CMD + Ctrl + Z</code>模拟摇一摇操作。不过，我还是期望你有一部真机，因为…这样可以拿来装X啊，少年！</p>\n<p>真机测试意味着我们将脱离开发环境，像平时通过AppStore安装APP那样把我们的APP放到手机内。按照<a href=\"https://facebook.github.io/react-native/docs/running-on-device-ios.html#using-offline-bundle\">官方文档</a>来做，其实很简单：</p>\n<ol>\n<li>\n<p>找到<code class=\"language-text\">Xcode/PIW/PIW/AppDeletegate.m</code>，做以下操作：<br>\n<img src=\"https://zerosoul.github.io/2016/06/05/building-my-first-ios-app-with-react-native-part-two/uncomment.png\"></p>\n</li>\n<li>\n<p><code class=\"language-text\">Product → Scheme → Edit Scheme</code>或者直接快捷键：<code class=\"language-text\">CMD + Shift + ,</code>，划入的窗口中将<code class=\"language-text\">Build Configuration</code>从<code class=\"language-text\">debug</code>改为<code class=\"language-text\">Release</code>:<br>\n<img src=\"https://zerosoul.github.io/2016/06/05/building-my-first-ios-app-with-react-native-part-two/schema.png\"><br>\n这样做的目的是为了防止摇一摇弹出调试菜单。</p>\n</li>\n<li>\n<p>转向<code class=\"language-text\">Build Setting</code>，禁掉<code class=\"language-text\">Dead Code Stripping</code>，别问我这是为啥，我也不清楚，可能这就是人生，年轻人。<br>\n<img src=\"https://zerosoul.github.io/2016/06/05/building-my-first-ios-app-with-react-native-part-two/deadcode.png\"></p>\n</li>\n</ol>\n<p>联接你的iPhone到Mac上，选择真机运行：<br>\n<img src=\"https://zerosoul.github.io/2016/06/05/building-my-first-ios-app-with-react-native-part-two/runmyphone.png\"></p>\n<p>好啦，万事俱备，只欠一个点击。首次打包和安装会持续较长时间，请耐心等候。安装过程中甭管蹦出什么，选择<strong>相信</strong>就行。注意，如果想恢复到开发环境，把上面的步骤1和步骤2撤销就可以了。</p>\n<p>安装完毕，手机桌面上就应该多出一个巨丑的APP图标，没错，那就是这么长时间我们辛苦做出的APP，快快打开体验一番吧！</p>\n<p>最后，我们把图标也加上：</p>\n<ol>\n<li>下载<a href=\"http://7xo6wq.com1.z0.glb.clouddn.com/SplashWallIcons.zip\">图标文件</a>。当然，你也可以自己按照<a href=\"https://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/MobileHIG/IconMatrix.html\">苹果图标规定</a>来设计一套</li>\n<li>调转到Xcode<code class=\"language-text\">PIW/PIW/Images.xcassets</code>，选择AppIcon</li>\n<li>将图标文件按照规格拖拽到对应的框内，一个萝卜一个坑，so easy!<br>\n<img src=\"https://zerosoul.github.io/2016/06/05/building-my-first-ios-app-with-react-native-part-two/icons.png\"></li>\n</ol>\n<p>再次打包和运行，这次那个巨丑无比的图标应该不见了。</p>\n<p>卧槽，我们目前是不是可以说正式完成了一个APP版本的迭代？是的，我们做到了！</p>\n<h1 id=\"总结\"><a href=\"#%E6%80%BB%E7%BB%93\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>总结</h1>\n<p>又到了总结时间了，这一次我们都做了哪些事情呢：</p>\n<ul>\n<li><code class=\"language-text\">NetworkImage</code>组件让我们能够显示出带加载进度的图片</li>\n<li><code class=\"language-text\">PanResponder</code>API让我们能够捕捉到双击操作</li>\n<li><code class=\"language-text\">Camera Roll</code>让我们能够将壁纸保存到本地相册</li>\n<li><code class=\"language-text\">Waiting</code>是我们首个自定义的组件，让用户在保存壁纸的同时不再懵逼</li>\n<li><code class=\"language-text\">react-native-shake-event-ios</code>让我们能够检测到摇一摇操作，并在恰当的时机，更新随机数据</li>\n</ul>\n<p>目前为止，我们已经完成了一个功能较完备的APP，同时也学习了许多新知，没有过多地深入，但均给出了深入的入口，也就是文章中的链接。其实，这个APP还可以加入许多好玩的特性，比如：</p>\n<ul>\n<li>既然有双击操作，是不是可以考虑加一个单击操作：单击壁纸，隐藏顶部的两个小黑条和底部的分页，也就是全屏显示壁纸，看得更爽一些，再次单击，恢复隐藏的元素。</li>\n<li>有没有可能做一个设置壁纸前的预览功能呢？虽然可能从API上有所限制，但我们可以通过一些hack的方式来达到类似的目的，至于什么方式，发挥你的脑洞去试试吧。</li>\n<li>每次打开APP都要从第三方获取数据，对于在非WiFi环境，用户可能会有所顾虑，是不是应该做一个本地缓存第三方数据的功能，甚至图片？</li>\n<li>现在我们的代码组织并不很模块化，这一点可不可以做些优化？</li>\n<li>React Native 也可以做安卓开发，尝尝鲜？</li>\n</ul>\n<p>以上是我能想到的一些功能点和优化点，如果我们能一步一步走到现在，相信这些好玩的特性也不会那么难实现。或许，我还会写个番外篇，讲一讲如何继续迭代<strong>PIW</strong>。</p>\n<p>通过这个简单的APP，我们接触到了许多知识点，但React Native的学习远不止这些，一些高级话题我们还没涉猎，比如<code class=\"language-text\">Flux/Redux</code>。但万变不离阅读官方文档，加之实例练习，边学边总结，是我的节奏。Hey，man，你的节奏找到了吗？好了，我累了，打烊了…<br>\n<img src=\"https://zerosoul.github.io/2016/06/05/building-my-first-ios-app-with-react-native-part-two/tired.jpg\" alt=\"姚明\"><br>\n哦对了，最新代码放在了<a href=\"https://github.com/zerosoul/PIW\">Github上</a>，欢迎指正。</p>\n<h1 id=\"原文链接\"><a href=\"#%E5%8E%9F%E6%96%87%E9%93%BE%E6%8E%A5\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>原文链接</h1>\n<ul>\n<li><a href=\"https://www.smashingmagazine.com/2016/04/how-to-build-your-first-ios-app-with-javascript/#\">The Beauty Of React Native: Building Your First iOS App With JavaScript (Part 2)</a></li>\n</ul>","frontmatter":{"title":"React Native之美：构建我的第一个iOS APP（2）","date":"2016-06-07T09:31:37.000Z","category":"它山之石","tags":["react native","react","翻译"],"cover":null},"tableOfContents":"<ul>\n<li><a href=\"/posts/building-my-first-ios-app-with-react-native-part-two/#%E5%86%8D%E7%BB%AD%E5%89%8D%E7%BC%98\">再续前缘</a></li>\n<li><a href=\"/posts/building-my-first-ios-app-with-react-native-part-two/#1%E5%8F%AC%E5%94%A4%E5%87%BA%E5%A3%81%E7%BA%B8%E5%92%8C%E4%BD%9C%E8%80%85\">1.召唤出壁纸和作者</a></li>\n<li><a href=\"/posts/building-my-first-ios-app-with-react-native-part-two/#2-%E6%8D%95%E6%8D%89%E5%8F%8C%E5%87%BB%E6%93%8D%E4%BD%9Cdouble-taps\">2. 捕捉双击操作(Double-Taps)</a></li>\n<li><a href=\"/posts/building-my-first-ios-app-with-react-native-part-two/#3%E5%B0%86%E5%A3%81%E7%BA%B8%E4%BF%9D%E5%AD%98%E5%88%B0%E6%9C%AC%E5%9C%B0%E7%9B%B8%E5%86%8C\">3.将壁纸保存到本地相册</a></li>\n<li><a href=\"/posts/building-my-first-ios-app-with-react-native-part-two/#4%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%AD%89%E5%BE%85%E7%BB%84%E4%BB%B6%EF%BC%9Awaitingjs\">4.创建一个等待组件：Waiting.js</a></li>\n<li><a href=\"/posts/building-my-first-ios-app-with-react-native-part-two/#5%E6%91%87%E4%B8%80%E6%91%87%E5%8A%A8%E4%BD%9C%EF%BC%88shake%EF%BC%89%E5%92%8C%E7%9C%9F%E6%9C%BA%E6%B5%8B%E8%AF%95\">5.摇一摇动作（Shake）和真机测试</a></li>\n<li><a href=\"/posts/building-my-first-ios-app-with-react-native-part-two/#%E6%80%BB%E7%BB%93\">总结</a></li>\n<li><a href=\"/posts/building-my-first-ios-app-with-react-native-part-two/#%E5%8E%9F%E6%96%87%E9%93%BE%E6%8E%A5\">原文链接</a></li>\n</ul>","excerpt":"再续前缘 第一篇文章 ，我们从零开始，一步一步走到最后，构建了一个似乎并没有卵用的APP。但是，我们做了大量的基础工作，不就是为了在接下来的继续更轻松自信些嘛！ 其实，第一篇的信息量还是很大的，里面的每一个链接都是通往一个新知的大门，如果你觉得掌握得差不多了，那就开始新的旅（Che）程（Dan…"}},{"node":{"fields":{"slug":"/posts/building-my-first-ios-app-with-react-native-part-one"},"html":"<p><img src=\"https://zerosoul.github.io/2016/06/05/building-my-first-ios-app-with-react-native-part-one/rn.png\" alt=\"React Native\"></p>\n<h1 id=\"写在前面的话\"><a href=\"#%E5%86%99%E5%9C%A8%E5%89%8D%E9%9D%A2%E7%9A%84%E8%AF%9D\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>写在前面的话</h1>\n<p>严格来说这是一篇译文，但与一般的翻译有所不同，我会修正原文中一些小错误，也会指出没有提及的一些坑，还会基于原文的想法做一些扩展开发。所以，读的时候有些是原作者的话，有些是我的添油加醋，但整体绝对保证流畅。另，基于原文改动较多，也就懒得一一标注出来，或许显得有些不负责，但是…<br>\n<img src=\"https://zerosoul.github.io/2016/06/05/building-my-first-ios-app-with-react-native-part-one/ldwy.jpg\" alt=\"来打我呀\"><br>\n好了，下面开始进入正题：<br>\n<img src=\"https://zerosoul.github.io/2016/06/05/building-my-first-ios-app-with-react-native-part-one/zb.jpg\" alt=\"装逼\"></p>\n<h1 id=\"之前的困惑\"><a href=\"#%E4%B9%8B%E5%89%8D%E7%9A%84%E5%9B%B0%E6%83%91\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>之前的困惑</h1>\n<p>使用<code class=\"language-text\">Javascript</code>来构建移动应用已经不是什么新鲜事了。<a href=\"http://ionicframework.com/\">Ionic</a>和<a href=\"http://phonegap.com/\">Phonegap</a>已经做了大量的探索，建立了各自的开发生态圈，吸引了相当多的开发者，不得不说都获得了一定程度的成功。</p>\n<p>但是，尝试做了一些小Demo后，这些框架变得毫无吸引力，主要原因应该是<strong>很难做到原生体验</strong>。后来，转念一想，为啥不使用<code class=\"language-text\">Swift/Objective-C</code>或者<code class=\"language-text\">Java</code>构建原生app呢，诚然，这对于从前端开发转向app开发，需要学习的挺多，但这不正是一名现代Web开发者所擅长的吗：快速学习。那么，从哪儿开头呢？在Google过程中遇到了一篇文章：<a href=\"https://medium.com/ios-os-x-development/an-ios-developer-on-react-native-1f24786c29f0#.avhlz9qsr\">An iOS Developer on React Native</a>，其中一句话打动了我：</p>\n<blockquote>\n<p>Fast-forward a couple of months, and I’m confident enough to say I may never write an iOS app in Objective-C or Swift again.（快进几个月，我有足够的信心说：再也不会用Objective-C或者Swift来写iOS app了！）</p>\n</blockquote>\n<p>一切的遇见都不是偶然的。看来，官方语言也有不少坑，那为啥不选择<code class=\"language-text\">React Native</code>呢，更何况自己是前端工（Ban）程（Zhuan）师（De）。好吧，我承认绕了个不必要的圈子，但走一些弯路能看到更多的风景，不是吗？<br>\n<img src=\"https://zerosoul.github.io/2016/06/05/building-my-first-ios-app-with-react-native-part-one/ym.png\" alt=\"姚明\"><br>\n好的，下面先了解下需求。（难道不应该是先说一下<code class=\"language-text\">React Native</code>么 (╯‵□′)╯︵┻━┻）</p>\n<h1 id=\"先谈谈需求\"><a href=\"#%E5%85%88%E8%B0%88%E8%B0%88%E9%9C%80%E6%B1%82\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>先谈谈需求</h1>\n<p>很不幸，我从未在苹果商店找到过一个设置手机壁纸的完美APP。在Mac上，<a href=\"http://unsplash.com/\">Unsplash</a>承包了我的所有这方面的需求，很完美，然而在手机上…对不起，打开<code class=\"language-text\">Setting</code>，找到<code class=\"language-text\">Wallpaper</code>…。</p>\n<p>为何不试着做一个满足自己需求的APP呢？下面是我目前希望有的功能点：</p>\n<ul>\n<li>随机展示适合当做手机壁纸的图片</li>\n<li>可以滑动浏览</li>\n<li>可以保存到相册</li>\n<li>保存前可以预览设置后的效果</li>\n</ul>\n<p>虽然最后一项不知道能否做到，但至少可以开始撸其它功能点了。额，等等，开始之前，我觉得有必要提醒一下你应该知道的事情：</p>\n<ul>\n<li>Javascript</li>\n<li>一些<code class=\"language-text\">ES6</code>的特性：<a href=\"https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Classes\">类</a>，<a href=\"https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Functions/Arrow_functions\">箭头函数</a>,<a href=\"https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment\">解构</a>和<a href=\"https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/template_strings\">模板字符串</a></li>\n<li>Mac OS X 终端 （好吧，你应该有个Mac或者Macbook）</li>\n<li>CSS：flexbox (<a href=\"http://flexboxfroggy.com/\">这里</a>有个非常棒的flexbox游戏教程)</li>\n<li><a href=\"https://facebook.github.io/react/\">React</a>：React的一些基本概念需要知道，比如<code class=\"language-text\">JSX</code>、<code class=\"language-text\">state</code>和<code class=\"language-text\">prop</code>的区别、<code class=\"language-text\">Virtual DOM</code>。</li>\n</ul>\n<h1 id=\"再谈谈文章的规划\"><a href=\"#%E5%86%8D%E8%B0%88%E8%B0%88%E6%96%87%E7%AB%A0%E7%9A%84%E8%A7%84%E5%88%92\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>再谈谈文章的规划</h1>\n<p>由于涉及的知识点较多，<code class=\"language-text\">构建我的第一个iOS app</code>将分为两篇来完成。每一篇有<strong>五个章节</strong>，每个章节会推进一步，直至完成预期。文章略长，一旦开始，最好以章节为单位来进行。建议先收藏，回家坐在电脑前慢慢品。</p>\n<h2 id=\"1first-blood建一个空react-native项目\"><a href=\"#1first-blood%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%A9%BAreact-native%E9%A1%B9%E7%9B%AE\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1.First Blood:建一个空React Native项目</h2>\n<p>首先确认已安装：</p>\n<ul>\n<li><a href=\"https://developer.apple.com/xcode/\">XCode 7.0或更高版本</a></li>\n<li><a href=\"https://nodejs.org/en/\">Node</a></li>\n</ul>\n<p>然后，在终端输入：<code class=\"language-text\">npm install -g react-native-cli</code>，全局安装React Native。</p>\n<p>如果你觉得我说的不够详细，请移步<a href=\"https://facebook.github.io/react-native/docs/getting-started.html#content\">React Native的官方安装文档</a></p>\n<p>在你电脑找块风水宝地，用于初始化项目目录。在该文件夹下执行命令：<code class=\"language-text\">react-native init PIW</code>。<br>\n<img src=\"https://zerosoul.github.io/2016/06/05/building-my-first-ios-app-with-react-native-part-one/init.png\" alt=\"init\"><br>\n（<code class=\"language-text\">PIW</code>是<code class=\"language-text\">Pick Image as Wallpaper</code>的缩写，不要在意这个细节，我为了装X起的。另，鉴于网络因素，等待时间应该较长，此时可以去小个便，或者逗逗你的宠物。）</p>\n<p><code class=\"language-text\">init</code>后的项目目录：</p>\n<p><img src=\"https://zerosoul.github.io/2016/06/05/building-my-first-ios-app-with-react-native-part-one/dir.png\" alt=\"项目目录\"></p>\n<p>很显然，<code class=\"language-text\">index.android.js</code>和<code class=\"language-text\">index.ios.js</code>分别是安卓和苹果应用的入口执行文件，由于我们构建的是iOS APP，所以接下来只跟<code class=\"language-text\">index.ios.js</code>打交道。接下来，移步<code class=\"language-text\">ios</code>文件夹，并双击打开<code class=\"language-text\">PIW.xcodeproj</code>。（Xcode的工程文件）<br>\n<img src=\"https://zerosoul.github.io/2016/06/05/building-my-first-ios-app-with-react-native-part-one/xcode.png\" alt=\"第一眼看到的xcode项目页面\"><br>\n注意有个警告：<code class=\"language-text\">No matching provisioning profiles found.</code>。得想办法修复它。先改个名字，<strong>Bundle Identifier</strong>：<code class=\"language-text\">com.zerosoul.me.tutorial.PIW</code>怎么样？有木有感觉很高大上！只要遵循<a href=\"https://en.wikipedia.org/wiki/Reverse_domain_name_notation\">Reverse DNS Convention</a>，请随意。然后选择<strong>Team</strong>，没有则按照指示新建一个。最后，点击<strong>Fix Issue</strong>。</p>\n<p><strong>Deployment Info</strong>一栏需要改动些默认设置，让app不能横屏，并且隐藏顶部的状态栏，下图红框已标出：<br>\n<img src=\"https://zerosoul.github.io/2016/06/05/building-my-first-ios-app-with-react-native-part-one/deployinfo.png\" alt=\"deployment info\"></p>\n<p>好了，可以点击左上角的<strong>Run</strong>，看一看模拟器的效果了。中途应该会蹦出一个终端弹窗，不要慌，正常现象。<br>\n<img src=\"https://zerosoul.github.io/2016/06/05/building-my-first-ios-app-with-react-native-part-one/popup.png\" alt=\"terminal popup\"></p>\n<p>一旦Xcode构建完，在模拟器里你会看到这一幕：<br>\n<img src=\"https://zerosoul.github.io/2016/06/05/building-my-first-ios-app-with-react-native-part-one/welcome.jpg\" alt=\"welcome to React Native\"></p>\n<p><strong>注：此处有坑，如果你用真机模拟，会出现这么一幕：</strong><br>\n<img src=\"https://zerosoul.github.io/2016/06/05/building-my-first-ios-app-with-react-native-part-one/localhost.png\" alt=\"大红的懵逼\"><br>\n大红的懵逼！不过别慌，官方文档有对应的解决方法，移步<a href=\"https://facebook.github.io/react-native/docs/running-on-device-ios.html\">这里</a>可以找到解决方式。</p>\n<h2 id=\"2-从第三方获取壁纸数据\"><a href=\"#2-%E4%BB%8E%E7%AC%AC%E4%B8%89%E6%96%B9%E8%8E%B7%E5%8F%96%E5%A3%81%E7%BA%B8%E6%95%B0%E6%8D%AE\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. 从第三方获取壁纸数据</h2>\n<p>既然要做壁纸APP，大量适合做手机壁纸的图片从哪里来？还记得前面提到的Unsplash吗？一切的遇见都不是偶然，好心的歪果仁做了一个<a href=\"https://unsplash.it/\">Unsplash图片调用接口</a>，用于生成一些精美占位图，非常方便！</p>\n<h3 id=\"有关code-classlanguage-textes6code中类的解释\"><a href=\"#%E6%9C%89%E5%85%B3code-classlanguage-textes6code%E4%B8%AD%E7%B1%BB%E7%9A%84%E8%A7%A3%E9%87%8A\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>有关<code class=\"language-text\">ES6</code>中“类”的解释</h3>\n<p>你可能会注意到，有些React代码会出现<code class=\"language-text\">var PIW = React.createClass({ ... })</code>，有些会是<code class=\"language-text\">class PIW extends Component{ ... }</code>。呵呵，这是个历史遗留问题，用哪种风格是个人选择问题，不存在孰优孰劣，有选择恐惧症的同学可以看看<a href=\"https://reactjsnews.com/composing-components\">这篇文章</a>。</p>\n<p>此处，我选择<code class=\"language-text\">Recat.Component</code>风格，别问我为什么，就这么任性！<br>\n<img src=\"https://zerosoul.github.io/2016/06/05/building-my-first-ios-app-with-react-native-part-one/renxing.jpg\" alt=\"任性\"></p>\n<h3 id=\"开始做一些改动\"><a href=\"#%E5%BC%80%E5%A7%8B%E5%81%9A%E4%B8%80%E4%BA%9B%E6%94%B9%E5%8A%A8\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>开始做一些改动</h3>\n<p>在<code class=\"language-text\">PIW</code>类里面，第一件事情便是加个构造函数<code class=\"language-text\">constructor</code>，在此初始化两个State：<code class=\"language-text\">wallsJSON</code>和<code class=\"language-text\">isLoading</code>。<code class=\"language-text\">wallsJSON</code>用于存储从第三方接口获取的json数组数据，<code class=\"language-text\">isLoading</code>是个布尔变量，用于标识数据是否加载完毕。  </p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">PIW</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span><span class=\"token punctuation\">{</span>\n\n<span class=\"token comment\">/***/</span>\n\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n\n      wallsJSON<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n\n      isLoading<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span>\n\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/***/</span>\n\n<span class=\"token operator\">...</span>\n\n<span class=\"token punctuation\">}</span></code></pre>\n      </div>\n<p><strong>注：方便起见，涉及的代码改动，我用`/*</strong>/<code class=\"language-text\">隔离标识出，下同。** 既然有存放数据的变量了，就得有给之赋值的函数，好吧，在</code>constructor<code class=\"language-text\">下面加一个占位函数</code>fetchWallsJSON`:  </p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function\">fetchWallsJSON</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>‘壁纸数据从这里加载<span class=\"token operator\">...</span>’<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span></code></pre>\n      </div>\n<p>从业务逻辑来讲，组件一旦加载完毕，就应该触发该函数。那么，该<code class=\"language-text\">componentDidMount</code>上场了，它是React Native组件的生命周期函数之一，在首次渲染（<code class=\"language-text\">render</code>）成功后会触发。想要更系统地理解组件的生命周期，请移步<a href=\"https://facebook.github.io/react/docs/component-specs.html\">这里</a>。注意，既然我们用的ES6的类语法，就可以省略<code class=\"language-text\">getInitialState</code>了，取而代之的是在<code class=\"language-text\">constructor</code>中给<code class=\"language-text\">this.state</code>赋值。  </p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function\">componentDidMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">fetchWallsJSON</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span></code></pre>\n      </div>\n<p><code class=\"language-text\">fetchWallsJSON</code>里会打印信息，我们应该从哪儿看到呢？首先，让模拟器获取焦点，使用<code class=\"language-text\">CMD + D</code>组合键调出调试菜单，选择<strong>Debug in Chrome</strong>，好吧，顺便把<strong>Enable live reload</strong>也打开吧，妈妈再也不用担心每次都要手动重启APP了。将会在Chrome里打开一个新标签，按照上面的说明调出<strong>console</strong>的界面。啊哈！<br>\n<img src=\"https://zerosoul.github.io/2016/06/05/building-my-first-ios-app-with-react-native-part-one/console.png\" alt=\"console data loaded tip\"><br>\n坑占好了，下面，可以开始考虑引入真实数据了。访问URL：<a href=\"http://unsplash.it/list\">unsplash.it/list</a> ，你将会看到铺满全屏的数据，接下来我们就基于这些数据做文章啦~~~<br>\n首先，替换掉<code class=\"language-text\">console</code>:  </p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function\">fetchWallsJSON</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token comment\">/***/</span>\n\n    <span class=\"token keyword\">var</span> url <span class=\"token operator\">=</span> <span class=\"token string\">'http://unsplash.it/list'</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">)</span>\n\n      <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span> response <span class=\"token operator\">=></span> response<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span>\n\n      <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span> jsonData <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>jsonData<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token punctuation\">.</span><span class=\"token keyword\">catch</span><span class=\"token punctuation\">(</span> error <span class=\"token operator\">=></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>‘获取数据有误： ‘ <span class=\"token operator\">+</span> error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">/***/</span>\n\n  <span class=\"token punctuation\">}</span></code></pre>\n      </div>\n<p><strong>注：用到了<code class=\"language-text\">fetch</code>函数，不熟悉的同学请参考<a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch\">这里</a></strong><br>\n保存然后刷新，几秒过后，啊哈！<br>\n<img src=\"https://zerosoul.github.io/2016/06/05/building-my-first-ios-app-with-react-native-part-one/consolerealdata.png\" alt=\"console real data\"></p>\n<p>太好了，我们已经能从第三方拿到数据了！在打印出数据前会有点延迟，这很正常，因为从请求到响应回数据会有个等待时间，此处应有<strong>加载提示</strong>。</p>\n<h2 id=\"3-增加加载提示\"><a href=\"#3-%E5%A2%9E%E5%8A%A0%E5%8A%A0%E8%BD%BD%E6%8F%90%E7%A4%BA\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. 增加加载提示</h2>\n<p>首先，把<code class=\"language-text\">PIW</code>类里<code class=\"language-text\">render</code>代码全部删除，新增以下代码：  </p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">var</span> <span class=\"token punctuation\">{</span>isLoading<span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>isLoading<span class=\"token punctuation\">)</span>\n\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">renderLoadingScreen</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">else</span>\n\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">renderResults</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token punctuation\">}</span></code></pre>\n      </div>\n<p>里面新增了两个函数，我们来实现它：</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function\">renderLoadingScreen</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n\n        <span class=\"token operator\">&lt;</span>View style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>styles<span class=\"token punctuation\">.</span>loadingContainer<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n\n            <span class=\"token operator\">&lt;</span>ActivityIndicatorIOS\n\n              animating<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">}</span>\n\n              color<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">'#fff'</span><span class=\"token punctuation\">}</span>\n\n              size<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">'small'</span><span class=\"token punctuation\">}</span> \n\n              style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>margin<span class=\"token punctuation\">:</span> <span class=\"token number\">15</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n\n              <span class=\"token operator\">&lt;</span>Text style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>color<span class=\"token punctuation\">:</span> <span class=\"token string\">'#fff'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span>正在加载数据<span class=\"token operator\">...</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Text<span class=\"token operator\">></span>\n\n       <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>View<span class=\"token operator\">></span>\n\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">renderResults</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n\n        <span class=\"token operator\">&lt;</span>View<span class=\"token operator\">></span>\n\n            <span class=\"token operator\">&lt;</span>Text<span class=\"token operator\">></span>\n\n             数据已加载\n\n            <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Text<span class=\"token operator\">></span>\n\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>View<span class=\"token operator\">></span>\n\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token punctuation\">}</span></code></pre>\n      </div>\n<p>根据<code class=\"language-text\">isLoading</code>的不同状态，渲染不同的界面。但是请注意，我们好像忘了什么。啊哈，<code class=\"language-text\">isLoading</code>并没有改变状态，应该在哪儿将其状态变过来呢？<code class=\"language-text\">fetchWallsJSON</code>！  </p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token operator\">...</span>\n\n<span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">)</span>\n\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span> response <span class=\"token operator\">=></span> response<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span>\n\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span> jsonData <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>jsonData<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/***/</span>\n\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>isLoading<span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//更新 isLoading </span>\n\n<span class=\"token comment\">/***/</span>\n\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token punctuation\">.</span><span class=\"token keyword\">catch</span><span class=\"token punctuation\">(</span> error <span class=\"token operator\">=></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>‘获取数据有误：‘ <span class=\"token operator\">+</span> error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token operator\">...</span></code></pre>\n      </div>\n<p>有关<code class=\"language-text\">setState</code>的详细说明请移步<a href=\"https://facebook.github.io/react/docs/component-api.html\">这里</a>，一句话描述其作用就是用于触发UI更新。<br>\n另外，我们在<code class=\"language-text\">renderLoadingScreen</code>调用了一个新组件<code class=\"language-text\">ActivityIndicatorIOS</code>，因此，需要在头部引入之：  </p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span>\n\n  AppRegistry<span class=\"token punctuation\">,</span>\n\n  StyleSheet<span class=\"token punctuation\">,</span>\n\n  Text<span class=\"token punctuation\">,</span>\n\n  View<span class=\"token punctuation\">,</span>\n\n  <span class=\"token comment\">/***/</span>\n\n  ActivityIndicatorIOS <span class=\"token comment\">// 增加新组件</span>\n\n  <span class=\"token comment\">/***/</span>\n\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-native'</span><span class=\"token punctuation\">;</span></code></pre>\n      </div>\n<p>在看到最终效果前，还有一件事情：注意到<code class=\"language-text\">&lt;View&gt;</code>标签内有个<code class=\"language-text\">styles.loadingContainer</code>没有？没错，这是用来定义<code class=\"language-text\">View</code>的样式的，目前可以这样理解：React内的样式全部用行内样式来定义的。而样式则通过<code class=\"language-text\">var styles = StyleSheet.create({…</code>来创建，只需要在相应的组件里加以引用即可：<br>\n创建<code class=\"language-text\">loadingContainer</code>:  </p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">var</span> styles <span class=\"token operator\">=</span> StyleSheet<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n\n<span class=\"token comment\">/***/</span>\n\n  loadingContainer<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n\n    flex<span class=\"token punctuation\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n\n    flexDirection<span class=\"token punctuation\">:</span> <span class=\"token string\">'row'</span><span class=\"token punctuation\">,</span>\n\n    justifyContent<span class=\"token punctuation\">:</span> <span class=\"token string\">'center'</span><span class=\"token punctuation\">,</span>\n\n    alignItems<span class=\"token punctuation\">:</span> <span class=\"token string\">'center'</span><span class=\"token punctuation\">,</span>\n\n    backgroundColor<span class=\"token punctuation\">:</span> <span class=\"token string\">'#000'</span>\n\n  <span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/***/</span>\n\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n      </div>\n<p>引用<code class=\"language-text\">loadingContainer</code>:  </p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\">\n      <pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>View</span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>styles<span class=\"token punctuation\">.</span>loadingContainer<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">/></span></span></code></pre>\n      </div>\n<p>当然，也可以这样使用：  </p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\">\n      <pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>View</span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>\n\n    flex<span class=\"token punctuation\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n\n    flexDirection<span class=\"token punctuation\">:</span> <span class=\"token string\">'row'</span><span class=\"token punctuation\">,</span>\n\n    justifyContent<span class=\"token punctuation\">:</span> <span class=\"token string\">'center'</span><span class=\"token punctuation\">,</span>\n\n    alignItems<span class=\"token punctuation\">:</span> <span class=\"token string\">'center'</span><span class=\"token punctuation\">,</span>\n\n    backgroundColor<span class=\"token punctuation\">:</span> <span class=\"token string\">'#000'</span>\n\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span></code></pre>\n      </div>\n<p>不过这样做代码的可读性和可维护性较差，尤其在有很多组件的时候，容易乱套，所以并不是一个好的实践。另外，注意到没，React Native严重依赖<code class=\"language-text\">flexbox</code>布局元素，所以，学好<code class=\"language-text\">flexbox</code>这个知识点就很有必要。</p>\n<p>保存这些改动，你将会在模拟器中看到以下加载页面：<br>\n<img src=\"https://zerosoul.github.io/2016/06/05/building-my-first-ios-app-with-react-native-part-one/loading.png\" alt=\"loading screen\"><br>\n过个几秒钟，将会转为：<br>\n<img src=\"https://zerosoul.github.io/2016/06/05/building-my-first-ios-app-with-react-native-part-one/loaded.png\" alt=\"data loaded\"></p>\n<h2 id=\"4-筛选出随机的壁纸\"><a href=\"#4-%E7%AD%9B%E9%80%89%E5%87%BA%E9%9A%8F%E6%9C%BA%E7%9A%84%E5%A3%81%E7%BA%B8\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. 筛选出随机的壁纸</h2>\n<p>这一章节侧重于Javascript的编码，将创建一个专门的模块用于生成随机数。如果模块的概念感到陌生，请先移步<a href=\"https://nodejs.org/api/modules.html#modules_modules\">Node.js的模块文档</a>。</p>\n<p>首先，我们在<code class=\"language-text\">index.ios.js</code>的<code class=\"language-text\">class</code>声明前定义一个常量，用于决定要随机选取的壁纸数量。  </p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token constant\">NUM_WALLPAPERS</span> <span class=\"token operator\">=</span> <span class=\"token number\">5</span><span class=\"token punctuation\">;</span></code></pre>\n      </div>\n<p>然后创建一个用户生成随机数的模块，这个模块内有两个函数：</p>\n<ul>\n<li><code class=\"language-text\">uniqueRandomNumbers</code>：该函数有三个参数，第一个决定了将要返回的随机数数量，后面两个定义随机数选取的范围。比如调用<code class=\"language-text\">uniqueRandomNumbers(5,10,20)</code>将获得包含5个随机数的数组，他们的范围在10到20之间。</li>\n<li><code class=\"language-text\">randomNumberInRange</code>：该函数有两个参数，定义了随机数范围，并返回一个随机数。比如调用<code class=\"language-text\">randomNumberInRange(2,10)</code>将返回介于2到10的随机的一个数。</li>\n</ul>\n<p>当然，我们完全可以将这两个函数合并为一个，但遵循<a href=\"https://en.wikipedia.org/wiki/Single_responsibility_principle\"><strong>单一职责原则</strong></a>应该是编码的最佳实践：一个函数只做一件事并将其做好。相信我，遵循好的编程原则能让以后的日子好过一些。</p>\n<p>好了，思路表述完了，开始编码。首先，在根目录下新建一个js文件<code class=\"language-text\">RandManager.js</code>，以下是代码：</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token function\">uniqueRandomNumbers</span><span class=\"token punctuation\">(</span>numRandomNumbers<span class=\"token punctuation\">,</span> lowerLimit<span class=\"token punctuation\">,</span> upperLimit<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n        <span class=\"token keyword\">var</span> uniqueNumbers <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span> uniqueNumbers<span class=\"token punctuation\">.</span>length <span class=\"token operator\">!=</span> numRandomNumbers <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n            <span class=\"token keyword\">var</span> currentRandomNumber <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">randomNumberInRange</span><span class=\"token punctuation\">(</span>lowerLimit<span class=\"token punctuation\">,</span> upperLimit<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n            <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span> uniqueNumbers<span class=\"token punctuation\">.</span><span class=\"token function\">indexOf</span><span class=\"token punctuation\">(</span>currentRandomNumber<span class=\"token punctuation\">)</span> <span class=\"token operator\">===</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span> <span class=\"token punctuation\">)</span> \n\n                uniqueNumbers<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>currentRandomNumber<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token keyword\">return</span> uniqueNumbers<span class=\"token punctuation\">;</span>\n\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token function\">randomNumberInRange</span><span class=\"token punctuation\">(</span>lowerLimit<span class=\"token punctuation\">,</span> upperLimit<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n        <span class=\"token keyword\">return</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">floor</span><span class=\"token punctuation\">(</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">random</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span><span class=\"token number\">1</span> <span class=\"token operator\">+</span> upperLimit <span class=\"token operator\">-</span> lowerLimit<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> lowerLimit<span class=\"token punctuation\">;</span>\n\n    <span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre>\n      </div>\n<p>在<code class=\"language-text\">index.ios.js</code>中引用<code class=\"language-text\">RandManager</code>模块：<code class=\"language-text\">var RandManager = require(&#39;./RandManager.js&#39;);</code>，然后我们就可以在<code class=\"language-text\">fetchWallsJSON</code>中调用啦：  </p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function\">fetchWallsJSON</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token keyword\">var</span> url <span class=\"token operator\">=</span> <span class=\"token string\">'http://unsplash.it/list'</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">)</span>\n\n    <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span> response <span class=\"token operator\">=></span> response<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span>\n\n    <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span> jsonData <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token comment\">/***/</span>\n\n      <span class=\"token keyword\">var</span> randomIds <span class=\"token operator\">=</span> RandManager<span class=\"token punctuation\">.</span><span class=\"token function\">uniqueRandomNumbers</span><span class=\"token punctuation\">(</span><span class=\"token constant\">NUM_WALLPAPERS</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> jsonData<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token keyword\">var</span> walls <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n      randomIds<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span>randomId <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\n        walls<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>jsonData\\<span class=\"token punctuation\">[</span>randomId\\<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n\n        isLoading<span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n\n        wallsJSON<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">concat</span><span class=\"token punctuation\">(</span>walls<span class=\"token punctuation\">)</span>\n\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">/***/</span>\n\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token punctuation\">.</span><span class=\"token keyword\">catch</span><span class=\"token punctuation\">(</span> error <span class=\"token operator\">=></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'获取数据有误：'</span> <span class=\"token operator\">+</span> error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span></code></pre>\n      </div>\n<p>上面代码应该不用过多解释了，使用<code class=\"language-text\">uniqueRandomNumbers</code>生成5个随机数作为<code class=\"language-text\">jsonData</code>的索引值，进而获取5个随机壁纸数据并存入<code class=\"language-text\">wallsJSON</code>，哦对了，别忘了更新<code class=\"language-text\">isLoading</code>。</p>\n<p>有了随机数据，就可以在<code class=\"language-text\">renderResults</code>里使用了：  </p>\n<div class=\"gatsby-highlight\" data-language=\"js\">\n      <pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">renderResults</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n<span class=\"token comment\">/***/</span>\n\n   <span class=\"token comment\">//这里用到了ES6中的解构</span>\n\n  <span class=\"token keyword\">var</span> <span class=\"token punctuation\">{</span>wallsJSON<span class=\"token punctuation\">,</span> isLoading<span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span> <span class=\"token operator\">!</span>isLoading <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n\n    <span class=\"token operator\">&lt;</span>View<span class=\"token operator\">></span>\n\n        <span class=\"token punctuation\">{</span>wallsJSON<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>wallpaper<span class=\"token punctuation\">,</span> index<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\n          <span class=\"token keyword\">return</span><span class=\"token punctuation\">(</span>\n\n            <span class=\"token operator\">&lt;</span>Text key<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>index<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n\n              <span class=\"token punctuation\">{</span>wallpaper<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">}</span>\n\n            <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Text<span class=\"token operator\">></span>\n\n          <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>View<span class=\"token operator\">></span>\n\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre>\n      </div>\n<p>以上代码有个地方值得注意：React Native通过循环数组或集合渲染子元素时，需要给每个元素制定一个唯一的<code class=\"language-text\">key</code>，这也是为啥<code class=\"language-text\">&lt;Text key={index}&gt;</code>这样写的原因。</p>\n<p>保存代码，模拟器刷新后，我们看到了五个不同的id：<br>\n<img src=\"https://zerosoul.github.io/2016/06/05/building-my-first-ios-app-with-react-native-part-one/randid.png\" alt=\"random id\"><br>\n当然，可以将<code class=\"language-text\">id</code>改为<code class=\"language-text\">author</code>，这样，我们看到的是五个不同的名字：<br>\n<img src=\"https://zerosoul.github.io/2016/06/05/building-my-first-ios-app-with-react-native-part-one/randname.png\" alt=\"random name\"></p>\n<p>非常好，我们现在已经可以自如地操控数据了。</p>\n<h2 id=\"5-新增swiper组件\"><a href=\"#5-%E6%96%B0%E5%A2%9Eswiper%E7%BB%84%E4%BB%B6\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5. 新增Swiper组件</h2>\n<p>React Native有强大的社区支持和<a href=\"https://react.parts/native\">丰富的组件库</a>。这一章节学习如何引入第三方组件。<br>\n对于我们当前的APP，需要一个可滑动浏览图片的组件，推荐<a href=\"https://github.com/leecade/react-native-swiper\">react-native-swiper</a>。</p>\n<p>终端切换到项目根目录，运行命令：<code class=\"language-text\">npm install react-native-swiper --save</code>，然后<code class=\"language-text\">require</code>到代码里：<code class=\"language-text\">var Swiper=require(&#39;react-native-swiper&#39;)</code>。<br>\n将<code class=\"language-text\">renderResults</code>里的<code class=\"language-text\">View</code>替换为<code class=\"language-text\">Swiper</code>：  </p>\n<div class=\"gatsby-highlight\" data-language=\"js\">\n      <pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">renderResults</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> <span class=\"token punctuation\">{</span>wallsJSON<span class=\"token punctuation\">,</span> isLoading<span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span> <span class=\"token operator\">!</span>isLoading <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token operator\">&lt;</span>Swiper<span class=\"token operator\">></span>\n        <span class=\"token punctuation\">{</span>wallsJSON<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>wallpaper<span class=\"token punctuation\">,</span> index<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">return</span><span class=\"token punctuation\">(</span>\n            <span class=\"token operator\">&lt;</span>Text key<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>index<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n              <span class=\"token punctuation\">{</span>wallpaper<span class=\"token punctuation\">.</span>author<span class=\"token punctuation\">}</span>\n            <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Text<span class=\"token operator\">></span>\n          <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Swiper<span class=\"token operator\">></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre>\n      </div>\n<p>不出意外的话，界面将变成下面这样：<br>\n<img src=\"https://zerosoul.github.io/2016/06/05/building-my-first-ios-app-with-react-native-part-one/swiperwithdata.png\" alt=\"swiper with name data\"><br>\n下面，根据<a href=\"https://github.com/leecade/react-native-swiper\">Swiper组件的文档</a>，我们来微调一下样式：  </p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\">\n      <pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Swiper</span> \n<span class=\"token attr-name\">dot</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>View</span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>backgroundColor<span class=\"token punctuation\">:</span><span class=\"token string\">'rgba(255,255,255,.4)'</span><span class=\"token punctuation\">,</span> width<span class=\"token punctuation\">:</span> <span class=\"token number\">8</span><span class=\"token punctuation\">,</span> height<span class=\"token punctuation\">:</span> <span class=\"token number\">8</span><span class=\"token punctuation\">,</span>borderRadius<span class=\"token punctuation\">:</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span> marginLeft<span class=\"token punctuation\">:</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> marginRight<span class=\"token punctuation\">:</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> marginTop<span class=\"token punctuation\">:</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> marginBottom<span class=\"token punctuation\">:</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">}</span></span>\n<span class=\"token attr-name\">activeDot</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>View</span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>backgroundColor<span class=\"token punctuation\">:</span> <span class=\"token string\">'#fff'</span><span class=\"token punctuation\">,</span> width<span class=\"token punctuation\">:</span> <span class=\"token number\">13</span><span class=\"token punctuation\">,</span> height<span class=\"token punctuation\">:</span> <span class=\"token number\">13</span><span class=\"token punctuation\">,</span> borderRadius<span class=\"token punctuation\">:</span> <span class=\"token number\">7</span><span class=\"token punctuation\">,</span> marginLeft<span class=\"token punctuation\">:</span> <span class=\"token number\">7</span><span class=\"token punctuation\">,</span> marginRight<span class=\"token punctuation\">:</span> <span class=\"token number\">7</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">}</span></span>\n<span class=\"token attr-name\">loop</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">}</span></span>\n<span class=\"token attr-name\">onMomentumScrollEnd</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>onMomentumScrollEnd<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">{</span>wallsJSON<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>wallpaper<span class=\"token punctuation\">,</span> index<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span><span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Text</span> <span class=\"token attr-name\">key</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>index<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span>\n        <span class=\"token punctuation\">{</span>wallpaper<span class=\"token punctuation\">.</span>author<span class=\"token punctuation\">}</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>Text</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>Swiper</span><span class=\"token punctuation\">></span></span></code></pre>\n      </div>\n<ul>\n<li>微调了下底部分页小圆点，更大更黑了（卧槽，我在说什么…）</li>\n<li>禁用了循环，这样，一旦浏览到最后一页，然后就没有然后了。</li>\n<li>新增了每一页滑动完毕后的触发事件：<code class=\"language-text\">onMomentumScrollEnd</code>（这个会在下一篇文章中用到，此处先占个坑）</li>\n</ul>\n<p>我们已经把Swiper加上了，好啦，这一节就写到这里，因为…我累了。<br>\n<img src=\"https://zerosoul.github.io/2016/06/05/building-my-first-ios-app-with-react-native-part-one/shuaiqi.jpg\"></p>\n<h1 id=\"总结\"><a href=\"#%E6%80%BB%E7%BB%93\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>总结</h1>\n<p>写到这里，我发现文章已经挺长的了。那么…再加个总结吧，都这么长了，应该不介意再长一点吧。<br>\n<img src=\"https://zerosoul.github.io/2016/06/05/building-my-first-ios-app-with-react-native-part-one/youdaoli.jpg\" alt=\"有道理\"></p>\n<ul>\n<li>第一节讲的是如何新建一个空的React Native项目</li>\n<li>第二节讲的是如何从第三方API获取原始数据，并建议用ES6新语法来构建程序</li>\n<li>第三节我们根据APP不同的状态渲染出不同的界面</li>\n<li>第四节我们新建了一个模块，引入并解决了产生随机数的问题</li>\n<li>第五节我们新增了一个第三方组件，并做了简单设置。</li>\n</ul>\n<p>好吧，必须承认，目前为止，我们的APP看起来似乎没啥特殊之处。不过，刚入门嘛，一步一步走到这里，也不容易了。下一篇文章，我们将继续打磨这个APP，新增特性预告：</p>\n<ul>\n<li>作者名字将替换为图片，没错，高清无码大图</li>\n<li>自定义双击事件，保存图片到相册：<code class=\"language-text\">PanHandler</code></li>\n<li>通过Xcode新增类库并获取相应授权，比如访问相册</li>\n<li>增加预览功能</li>\n<li>创建更多的自定义组件<br>\n哦对了，最终代码在<a href=\"https://github.com/zerosoul/PIW\">这儿</a>。年轻人，我们下一回合见…<br>\n<img src=\"https://zerosoul.github.io/2016/06/05/building-my-first-ios-app-with-react-native-part-one/dengyan.png\"></li>\n</ul>\n<h1 id=\"原文链接\"><a href=\"#%E5%8E%9F%E6%96%87%E9%93%BE%E6%8E%A5\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>原文链接</h1>\n<ul>\n<li><a href=\"https://www.smashingmagazine.com/2016/04/the-beauty-of-react-native-building-your-first-ios-app-with-javascript-part-1/\">The Beauty Of React Native: Building Your First iOS App With JavaScript (Part 1)</a></li>\n</ul>","frontmatter":{"title":"React Native之美：构建我的第一个iOS APP（1）","date":"2016-06-05T09:31:37.000Z","category":"它山之石","tags":["react native","react","翻译"],"cover":null},"tableOfContents":"<ul>\n<li><a href=\"/posts/building-my-first-ios-app-with-react-native-part-one/#%E5%86%99%E5%9C%A8%E5%89%8D%E9%9D%A2%E7%9A%84%E8%AF%9D\">写在前面的话</a></li>\n<li><a href=\"/posts/building-my-first-ios-app-with-react-native-part-one/#%E4%B9%8B%E5%89%8D%E7%9A%84%E5%9B%B0%E6%83%91\">之前的困惑</a></li>\n<li><a href=\"/posts/building-my-first-ios-app-with-react-native-part-one/#%E5%85%88%E8%B0%88%E8%B0%88%E9%9C%80%E6%B1%82\">先谈谈需求</a></li>\n<li>\n<p><a href=\"/posts/building-my-first-ios-app-with-react-native-part-one/#%E5%86%8D%E8%B0%88%E8%B0%88%E6%96%87%E7%AB%A0%E7%9A%84%E8%A7%84%E5%88%92\">再谈谈文章的规划</a></p>\n<ul>\n<li><a href=\"/posts/building-my-first-ios-app-with-react-native-part-one/#1first-blood%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%A9%BAreact-native%E9%A1%B9%E7%9B%AE\">1.First Blood:建一个空React Native项目</a></li>\n<li>\n<p><a href=\"/posts/building-my-first-ios-app-with-react-native-part-one/#2-%E4%BB%8E%E7%AC%AC%E4%B8%89%E6%96%B9%E8%8E%B7%E5%8F%96%E5%A3%81%E7%BA%B8%E6%95%B0%E6%8D%AE\">2. 从第三方获取壁纸数据</a></p>\n<ul>\n<li><a href=\"/posts/building-my-first-ios-app-with-react-native-part-one/#%E6%9C%89%E5%85%B3code-classlanguage-textes6code%E4%B8%AD%E7%B1%BB%E7%9A%84%E8%A7%A3%E9%87%8A\">有关&#x3C;code class=\"language-text\">ES6&#x3C;/code>中“类”的解释</a></li>\n<li><a href=\"/posts/building-my-first-ios-app-with-react-native-part-one/#%E5%BC%80%E5%A7%8B%E5%81%9A%E4%B8%80%E4%BA%9B%E6%94%B9%E5%8A%A8\">开始做一些改动</a></li>\n</ul>\n</li>\n<li><a href=\"/posts/building-my-first-ios-app-with-react-native-part-one/#3-%E5%A2%9E%E5%8A%A0%E5%8A%A0%E8%BD%BD%E6%8F%90%E7%A4%BA\">3. 增加加载提示</a></li>\n<li><a href=\"/posts/building-my-first-ios-app-with-react-native-part-one/#4-%E7%AD%9B%E9%80%89%E5%87%BA%E9%9A%8F%E6%9C%BA%E7%9A%84%E5%A3%81%E7%BA%B8\">4. 筛选出随机的壁纸</a></li>\n<li><a href=\"/posts/building-my-first-ios-app-with-react-native-part-one/#5-%E6%96%B0%E5%A2%9Eswiper%E7%BB%84%E4%BB%B6\">5. 新增Swiper组件</a></li>\n</ul>\n</li>\n<li><a href=\"/posts/building-my-first-ios-app-with-react-native-part-one/#%E6%80%BB%E7%BB%93\">总结</a></li>\n<li><a href=\"/posts/building-my-first-ios-app-with-react-native-part-one/#%E5%8E%9F%E6%96%87%E9%93%BE%E6%8E%A5\">原文链接</a></li>\n</ul>","excerpt":"…"}},{"node":{"fields":{"slug":"/posts/everything-about-promise"},"html":"<p><img src=\"https://zerosoul.github.io/2016/05/26/everything-about-promise/promise.jpg\" alt=\"javascript promise\"></p>\n<h1 id=\"引子\"><a href=\"#%E5%BC%95%E5%AD%90\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>引子</h1>\n<p>先看一段代码：  </p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\">p<span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token comment\">// do something with the result</span>\n\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre>\n      </div>\n<p>如果有似曾相识的感觉，那么你在理解javascript中的promise道路上已经迈出了一步。如果完全懵逼，别怕，接下来我们通过例子来了解promise为何物。</p>\n<p>作为新概念，一些人理解promise起来会有些困难，因为这需要思维上的转变。但是请相信我，经过几个实例的讲解，你会发现它的优雅：它使得让人头痛的异步代码写起来更为轻松，而且可以避免“回调大坑”（<a href=\"http://callbackhell.com/\">callback hell</a>）。</p>\n<p>promise背后的思想是：</p>\n<blockquote>\n<p>promise代表的是异步操作的<strong>最终</strong>（eventual）结果</p>\n</blockquote>\n<p>这意味着异步操作的结果并不能立即获取，而是要等到promise稳定了（settled）。</p>\n<p>想想你在日常生活中做出承诺（promise）的例子：小时候，你出门对老妈说：我保证（promise）把垃圾带出去。这句话的意思是在稍后的某个时间点你会去做<strong>扔垃圾</strong>这件事并兑现你的承诺。也许几分钟，也许几小时，也许…</p>\n<p>promise亦是如此。当一个函数返回一个promise，它其实是在说：嘿！我向你承诺，一旦完事，我将带着结果去找你！</p>\n<h1 id=\"举例\"><a href=\"#%E4%B8%BE%E4%BE%8B\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>举例</h1>\n<p>好啦，理论和术语的东西讲多了让人烦，下面我们来例证上面说的一堆话。</p>\n<p>AJAX的概念应该不陌生吧，相信你之前使用过原生<a href=\"https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest\">XMLHttpRequest</a>，或者jQuery的<a href=\"http://api.jquery.com/jquery.ajax/\">$.ajax()</a>，或者其它类库。不过，XMLHttpRequest API既复杂又难记忆。谢天谢地，新API <a href=\"https://developer.mozilla.org/en/docs/Web/API/Fetch_API\">fetch</a>简化了ajax的应用，并且，它用到了promise！</p>\n<p>这意味着什么？其实，每当你使用fetch()发出请求，像这样：  </p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/some/endpoint'</span><span class=\"token punctuation\">)</span></code></pre>\n      </div>\n<p>它就会返回一个promise对象。</p>\n<p>通常我们会使用回调函数来响应异步请求完成时的操作。但是，在promise的世界里，我们得使用<code class=\"language-text\">then()</code>来达到这一目的。</p>\n<p>通过链式调用<code class=\"language-text\">.then(onFulfilled, onRejected)</code>来访问<code class=\"language-text\">fetch</code>的结果：  </p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/some/endpoint'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Response from the endpoint '</span> <span class=\"token operator\">+</span> result<span class=\"token punctuation\">)</span>\n\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'An error occurred: '</span> <span class=\"token operator\">+</span> error<span class=\"token punctuation\">)</span>\n\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre>\n      </div>\n<p><code class=\"language-text\">then</code>方法提供两个参数：</p>\n<ol>\n<li><code class=\"language-text\">onFulfilled</code>：当promise完成（fulfilled）时调用，第一个参数表示promise的结果。</li>\n<li><code class=\"language-text\">onRejected</code>：当promise被拒（rejected）时调用，第一个参数表示promise被拒的原因。</li>\n</ol>\n<p><strong>完成</strong>和<strong>被拒</strong>是promise的两个状态，其实还有第三种状态：挂起（pending）。现在，我们来总结下<code class=\"language-text\">fetch</code>使用promise的经过：</p>\n<ol>\n<li>从调用<code class=\"language-text\">fetch()</code>那一刻，它就返回了一个promise对象</li>\n<li>在请求完成之前，promise的状态一直处于<strong>挂起</strong></li>\n<li>promise由挂起状态，可能会转为<strong>完成</strong>，也可能会是<strong>被拒</strong>。</li>\n</ol>\n<p>值得一提的是，一旦promise的状态转为完成或被拒，其值将不再改变。</p>\n<h1 id=\"使用code-classlanguage-textcatchcode错误处理\"><a href=\"#%E4%BD%BF%E7%94%A8code-classlanguage-textcatchcode%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>使用<code class=\"language-text\">catch()</code>错误处理</h1>\n<p><a href=\"https://promisesaplus.com/\">Promises/A+ 规范</a> 提供了一种语法糖来处理promise的错误。</p>\n<p>假设有个<code class=\"language-text\">lookupPrice(itemId)</code>函数，功能是查找数据库中特定商品的价格，如果存在记录则表示成功，否则表示失败。无论如何，最终返回一个promise对象，我们可以使用<code class=\"language-text\">catch()</code>来使代码更具可读性：  </p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function\">lookupPrice</span><span class=\"token punctuation\">(</span><span class=\"token number\">123</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>price<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'The item costs: '</span> <span class=\"token operator\">+</span> price<span class=\"token punctuation\">)</span>\n\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token punctuation\">.</span><span class=\"token keyword\">catch</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Could not find an item with that ID'</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre>\n      </div>\n<p>如果商品存在，将会打印：<code class=\"language-text\">The item costs: 50</code>，如果不存在，则打印：<code class=\"language-text\">Could not find an item with that ID</code>。</p>\n<p>如果你对<code class=\"language-text\">then()</code>情有独钟，上面的那段代码可以改写成下面的链式调用：  </p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function\">lookupPrice</span><span class=\"token punctuation\">(</span><span class=\"token number\">123</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>price<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'The item costs: '</span> <span class=\"token operator\">+</span> price<span class=\"token punctuation\">)</span>\n\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Could not find an item with that ID'</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre>\n      </div>\n<blockquote>\n<p>如果一个promise被拒，代码将直接跳到第一个<code class=\"language-text\">catch</code>或者有<code class=\"language-text\">onRejected</code>的<code class=\"language-text\">then</code>链式调用处。</p>\n</blockquote>\n<p>比如当我们使用一个不存在的商品id来调用<code class=\"language-text\">lookupPrice()</code>：  </p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function\">lookupPrice</span><span class=\"token punctuation\">(</span><span class=\"token number\">99999</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>price<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'The item costs: '</span> <span class=\"token operator\">+</span> price<span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">return</span> price\n\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>price<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Double the price: '</span> <span class=\"token operator\">+</span> <span class=\"token punctuation\">(</span>price <span class=\"token operator\">*</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token punctuation\">.</span><span class=\"token keyword\">catch</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Could not find an item with that ID'</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre>\n      </div>\n<p>由于两个<code class=\"language-text\">then</code>都没有<code class=\"language-text\">onRejected</code>，均被忽略了，代码直接跳到<code class=\"language-text\">catch</code>执行。</p>\n<p>接下来再列举两个代码片段，它们有细微差别，您瞧好了：<br>\n片段1：  </p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// 使用 then(onFulfilled, onRejected)</span>\n\n<span class=\"token function\">lookupPrice</span><span class=\"token punctuation\">(</span><span class=\"token number\">123</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>price<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token comment\">// lookup another price and return the promise created by lookupPrice(456)</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token function\">lookupPrice</span><span class=\"token punctuation\">(</span><span class=\"token number\">456</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Item 123 does not exist'</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre>\n      </div>\n<p>片段2：  </p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// 使用 catch()</span>\n\n<span class=\"token function\">lookupPrice</span><span class=\"token punctuation\">(</span><span class=\"token number\">123</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>price<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token comment\">// lookup another price and return the promise created by lookupPrice(456)</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token function\">lookupPrice</span><span class=\"token punctuation\">(</span><span class=\"token number\">456</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token punctuation\">.</span><span class=\"token keyword\">catch</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Either item 123 OR 456 does not exist'</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre>\n      </div>\n<p>片段1中，如果商品123不存在，带有<code class=\"language-text\">onRejected</code>的<code class=\"language-text\">then</code>将会被立即执行：</p>\n<ul>\n<li>在这个例子中将会打印“Item 123 does not exist”</li>\n<li>然而，并没有给<code class=\"language-text\">lookupPrice(456)</code>指定错误处理函数，所以，如果商品456不存在，什么都不会打印。这是个未捕捉到的错误(Uncaught error)。</li>\n</ul>\n<p>需要提醒的一点：当你链式调用<code class=\"language-text\">then(onFulfilled, onRejected)</code>，被执行的或者是<code class=\"language-text\">onFulfilled</code>，或者是<code class=\"language-text\">onRejected</code>，绝对不是两个都执行。</p>\n<p>片段2中：</p>\n<ul>\n<li>如果商品123不存在，代码直接进入<code class=\"language-text\">catch</code>，打印“Either item 123 OR 456 does not exist”</li>\n<li>由于在<code class=\"language-text\">then</code>之后链式调用了<code class=\"language-text\">catch</code>，在此之前任何promise转到了被拒状态，都将进入<code class=\"language-text\">catch</code>。所以，如果商品456也不存在，也会在屏幕上看到“Either item 123 OR 456 does not exist”。</li>\n</ul>\n<h1 id=\"使用code-classlanguage-textnew-promisecode创建promise\"><a href=\"#%E4%BD%BF%E7%94%A8code-classlanguage-textnew-promisecode%E5%88%9B%E5%BB%BApromise\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>使用<code class=\"language-text\">new Promise()</code>创建promise</h1>\n<p>目前为止，我们通过<code class=\"language-text\">fetch</code>API来了解了promise，通过<code class=\"language-text\">then</code>来使用promise的结果。多数情况下，我们会用到各式各样的类库来使用promise。然而，有时还是需要自己创建promise，自主决定什么情况下转入完成，什么情况下转入被拒。</p>\n<p>使用构造函数<code class=\"language-text\">Promise(resolver)</code>来创建promise实例，其中<code class=\"language-text\">resolver</code>接收两个参数：resolve和reject。似曾相识？恩哼？！</p>\n<p>举个栗子：比如我们想创建一个随机数1到10生成函数，并且返回一个promise。如果数字小于5，进入<code class=\"language-text\">resolve</code>（意味着操作成功），如果大于5，进入<code class=\"language-text\">reject</code>（意味着操作失败）。</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">generateRandomNumber</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>resolve<span class=\"token punctuation\">,</span> reject<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">var</span> randomNumber <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">floor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>Math<span class=\"token punctuation\">.</span><span class=\"token function\">random</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>randomNumber <span class=\"token operator\">&lt;=</span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n      <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>randomNumber<span class=\"token punctuation\">)</span>\n\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n\n      <span class=\"token function\">reject</span><span class=\"token punctuation\">(</span>randomNumber<span class=\"token punctuation\">)</span>\n\n    <span class=\"token punctuation\">}</span>\n\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">generateRandomNumber</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Success: '</span> <span class=\"token operator\">+</span> result<span class=\"token punctuation\">)</span>\n\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">catch</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Error: '</span> <span class=\"token operator\">+</span> error<span class=\"token punctuation\">)</span>\n\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre>\n      </div>\n<h1 id=\"链式调用：一次只完成一个任务\"><a href=\"#%E9%93%BE%E5%BC%8F%E8%B0%83%E7%94%A8%EF%BC%9A%E4%B8%80%E6%AC%A1%E5%8F%AA%E5%AE%8C%E6%88%90%E4%B8%80%E4%B8%AA%E4%BB%BB%E5%8A%A1\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>链式调用：一次只完成一个任务</h1>\n<p>链式调用多个<code class=\"language-text\">then</code>，可以做到进一步处理返回值，并且顺序化执行其它异步任务。</p>\n<p>在一些业务场景，这非常有用。比如，你要调用某个终端来认证用户，一旦认证成功，我们调用另一个终端来获取用户资料。</p>\n<p>上面那个场景用代码来表示的话，类似这样：</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// 认证id为333的用户</span>\n\n<span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/auth/333'</span><span class=\"token punctuation\">)</span>\n\n   <span class=\"token comment\">//将响应对象传值给authStatus，用以确认认证成功与否</span>\n\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span>authStatus<span class=\"token punctuation\">)</span>\n\n  <span class=\"token comment\">//认证成功了，则继续调用loadProfile，并传入用户名</span>\n\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span>loadProfile<span class=\"token punctuation\">)</span>\n\n  <span class=\"token comment\">//认证失败了，进入catch处理程序</span>\n\n  <span class=\"token punctuation\">.</span><span class=\"token keyword\">catch</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span>\n\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">authStatus</span> <span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">.</span>status <span class=\"token operator\">===</span> <span class=\"token number\">200</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token comment\">//用户名将传入下一个`then`，即loadProfile</span>\n\n    <span class=\"token keyword\">return</span> Promise<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">.</span>userName<span class=\"token punctuation\">)</span>\n\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token comment\">// 认证失败，进入reject</span>\n\n    <span class=\"token keyword\">return</span> Promise<span class=\"token punctuation\">.</span><span class=\"token function\">reject</span><span class=\"token punctuation\">(</span><span class=\"token string\">'User cannot be authenticated'</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">loadProfile</span> <span class=\"token punctuation\">(</span>userName<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/profile/'</span> <span class=\"token operator\">+</span> userName<span class=\"token punctuation\">)</span>\n\n    <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">.</span>profileData<span class=\"token punctuation\">)</span>\n\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token punctuation\">}</span></code></pre>\n      </div>\n<p>建议花上一两分钟看上几遍上面代码，研究下各个部分是如何组合在一起的。</p>\n<p>有两个地方需要特别注意下：</p>\n<ul>\n<li>一旦promise转为<strong>完成</strong>状态，它的值将被当做参数自动传入下一个<code class=\"language-text\">then</code>方法中。</li>\n<li>如果认证失败，将立即进入<code class=\"language-text\">catch</code>，并略过<code class=\"language-text\">.then(loadProfile)</code>。</li>\n</ul>\n<h1 id=\"promiseall：一次搞定！\"><a href=\"#promiseall%EF%BC%9A%E4%B8%80%E6%AC%A1%E6%90%9E%E5%AE%9A%EF%BC%81\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Promise.all()：一次搞定！</h1>\n<p>如果我们不关心异步操作的执行顺序，换句话说，假如我们想在获取用户信息的同时，把最近发表的文章也获取了，该怎么办？</p>\n<p>这时候就该<code class=\"language-text\">Promise.all()</code>上场了。它将promise数组作为参数传入，并且实例化一个promise，只有当数组中所有的promise都转为完成状态时，该实例化promise才进入完成状态。但是，请记住，一旦参数中有一个promise是被拒状态，Promise.all()也就进入了被拒状态。要么所有的promise都完成，要么全部被拒。</p>\n<p>Promise.all()完成返回的结果是一个数组，其中的值对应参数中的promise数组。下面根据刚刚提到的那个场景，我们使用Promise.all()来实现下：</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\">Promise<span class=\"token punctuation\">.</span><span class=\"token function\">all</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n\n  <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/profile/333'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 获取用户信息</span>\n\n  <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/posts/user/333'</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 获取用户文章</span>\n\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token comment\">// `result`是一个长度为2的数组</span>\n\n  <span class=\"token keyword\">var</span> profileInfo <span class=\"token operator\">=</span> result<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>profileData\n\n  <span class=\"token keyword\">var</span> recentPosts <span class=\"token operator\">=</span> result<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>posts\n\n  <span class=\"token comment\">//处理数据 BLA BLA ~~~</span>\n\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre>\n      </div>\n<h1 id=\"就这些了！我保证！（i-promise）\"><a href=\"#%E5%B0%B1%E8%BF%99%E4%BA%9B%E4%BA%86%EF%BC%81%E6%88%91%E4%BF%9D%E8%AF%81%EF%BC%81%EF%BC%88i-promise%EF%BC%89\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>就这些了！我保证！（I Promise）</h1>\n<p>一旦开始在代码中实践Promise，你会发现一切都变得相当简单。因此我建议你打开Chrome/Firefox的开发者工具，走一遍这篇文章里的例子。</p>\n<p>需要指出的是，有一个Promise的API我还没有提及:<code class=\"language-text\">Promise.race()</code>。它和<code class=\"language-text\">Promise.all()</code>类似，传入一个promise数组，并实例化一个promise，但不同之处在于传入的promise有任何一个转为完成，实例化的promise便进入完成，任何一个promise转为被拒，便进入被拒。个人认为，这并不十分实用，但我认为有一些特定业务场景会用得上它，你可以在<a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/race\">这儿</a>熟悉下这个API，祝好运！</p>\n<h1 id=\"参考链接\"><a href=\"#%E5%8F%82%E8%80%83%E9%93%BE%E6%8E%A5\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>参考链接</h1>\n<ul>\n<li>\n<p><a href=\"https://coligo.io/javascript-promises-plain-simple/\">JavaScript Promises: Plain and Simple</a></p>\n</li>\n<li>\n<p><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise\">MDN:Promise</a></p>\n</li>\n</ul>","frontmatter":{"title":"探索 Javascript Promise","date":"2016-05-26T09:31:37.000Z","category":"它山之石","tags":["译文","技术","javascript","promise"],"cover":"https://zerosoul.github.io/2016/05/26/everything-about-promise/promise.jpg"},"tableOfContents":"<ul>\n<li><a href=\"/posts/everything-about-promise/#%E5%BC%95%E5%AD%90\">引子</a></li>\n<li><a href=\"/posts/everything-about-promise/#%E4%B8%BE%E4%BE%8B\">举例</a></li>\n<li><a href=\"/posts/everything-about-promise/#%E4%BD%BF%E7%94%A8code-classlanguage-textcatchcode%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86\">使用&#x3C;code class=\"language-text\">catch()&#x3C;/code>错误处理</a></li>\n<li><a href=\"/posts/everything-about-promise/#%E4%BD%BF%E7%94%A8code-classlanguage-textnew-promisecode%E5%88%9B%E5%BB%BApromise\">使用&#x3C;code class=\"language-text\">new Promise()&#x3C;/code>创建promise</a></li>\n<li><a href=\"/posts/everything-about-promise/#%E9%93%BE%E5%BC%8F%E8%B0%83%E7%94%A8%EF%BC%9A%E4%B8%80%E6%AC%A1%E5%8F%AA%E5%AE%8C%E6%88%90%E4%B8%80%E4%B8%AA%E4%BB%BB%E5%8A%A1\">链式调用：一次只完成一个任务</a></li>\n<li><a href=\"/posts/everything-about-promise/#promiseall%EF%BC%9A%E4%B8%80%E6%AC%A1%E6%90%9E%E5%AE%9A%EF%BC%81\">Promise.all()：一次搞定！</a></li>\n<li><a href=\"/posts/everything-about-promise/#%E5%B0%B1%E8%BF%99%E4%BA%9B%E4%BA%86%EF%BC%81%E6%88%91%E4%BF%9D%E8%AF%81%EF%BC%81%EF%BC%88i-promise%EF%BC%89\">就这些了！我保证！（I Promise）</a></li>\n<li><a href=\"/posts/everything-about-promise/#%E5%8F%82%E8%80%83%E9%93%BE%E6%8E%A5\">参考链接</a></li>\n</ul>","excerpt":"引子 先看一段代码：   如果有似曾相识的感觉，那么你在理解javascript中的promise道路上已经迈出了一步。如果完全懵逼，别怕，接下来我们通过例子来了解promise为何物。 作为新概念，一些人理解promise…"}}],"pathPrefix":"archives","first":false,"last":false,"index":2,"pageCount":6,"additionalContext":{"totalCount":118}}}