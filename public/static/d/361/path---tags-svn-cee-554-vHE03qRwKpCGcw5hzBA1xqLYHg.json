{"pageContext":{"group":[{"node":{"fields":{"slug":"/posts/svn-cleanup-error"},"html":"<h1 id=\"问题\"><a href=\"#%E9%97%AE%E9%A2%98\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>问题</h1>\n<p>svn执行clean up后出现提示:  </p>\n<div class=\"gatsby-highlight\" data-language=\"bash\">\n      <pre class=\"language-bash\"><code class=\"language-bash\">svn cleanup failed\n\nprevious operation has not finished<span class=\"token punctuation\">;</span> run cleanup <span class=\"token keyword\">if</span> it was interrupted</code></pre>\n      </div>\n<h1 id=\"分析\"><a href=\"#%E5%88%86%E6%9E%90\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>分析</h1>\n<p>可能是因为上次<code class=\"language-text\">cleanup</code>中断后，进入死循环了。</p>\n<h1 id=\"解决\"><a href=\"#%E8%A7%A3%E5%86%B3\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>解决</h1>\n<ol>\n<li>\n<p>下载<a href=\"http://pan.baidu.com/s/1i3ie1HN\">sqlite3.exe</a></p>\n</li>\n<li>\n<p>找到项目的<strong>.svn</strong>文件，查看是否存在<strong>wc.db</strong></p>\n</li>\n<li>\n<p>将<strong>sqlite3.exe</strong>放到<strong>.svn</strong>的同级目录</p>\n</li>\n<li>\n<p>启动<strong>cmd</strong>，执行<code class=\"language-text\">sqlite3 .svn/wc.db &quot;select * from work_queue&quot;</code></p>\n</li>\n<li>\n<p>不出意外的话，会看到很多记录，下一步执行<code class=\"language-text\">delete from work_queue</code></p>\n</li>\n<li>\n<p>现在再到项目里面，执行<code class=\"language-text\">cleanup</code>，没问题了，图标状态也已经恢复了，完美~~~</p>\n</li>\n</ol>\n<p><img src=\"perfect.gif\" alt=\"完美\"></p>","frontmatter":{"title":"SVN clean失败解决方法","date":"2014-09-24T09:31:37.000Z","category":"技术","tags":["svn","备忘"],"cover":null},"tableOfContents":"<ul>\n<li><a href=\"/posts/svn-cleanup-error/#%E9%97%AE%E9%A2%98\">问题</a></li>\n<li><a href=\"/posts/svn-cleanup-error/#%E5%88%86%E6%9E%90\">分析</a></li>\n<li><a href=\"/posts/svn-cleanup-error/#%E8%A7%A3%E5%86%B3\">解决</a></li>\n</ul>","excerpt":"问题 svn执行clean up后出现提示:   分析 可能是因为上次 中断后，进入死循环了。 解决 下载 sqlite3.exe 找到项目的 .svn 文件，查看是否存在 wc.db 将 sqlite3.exe 放到 .svn 的同级目录 启动 cmd…"}},{"node":{"fields":{"slug":"/posts/svn-rollback"},"html":"<p>SVN回滚，即取消对代码的修改，分为两种情况：</p>\n<h1 id=\"改动没有被提交（commit）改动没有被提交（commit）\"><a href=\"#%E6%94%B9%E5%8A%A8%E6%B2%A1%E6%9C%89%E8%A2%AB%E6%8F%90%E4%BA%A4%EF%BC%88commit%EF%BC%89%E6%94%B9%E5%8A%A8%E6%B2%A1%E6%9C%89%E8%A2%AB%E6%8F%90%E4%BA%A4%EF%BC%88commit%EF%BC%89\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"#%E6%94%B9%E5%8A%A8%E6%B2%A1%E6%9C%89%E8%A2%AB%E6%8F%90%E4%BA%A4%EF%BC%88commit%EF%BC%89\" title=\"改动没有被提交（commit）\"></a>改动没有被提交（commit）</h1>\n<p>这种情况下，<code class=\"language-text\">svn revert</code>就能取消之前的修改。<br>\n用法如下：  </p>\n<div class=\"gatsby-highlight\" data-language=\"bash\">\n      <pre class=\"language-bash\"><code class=\"language-bash\">svn revert <span class=\"token punctuation\">[</span>-R<span class=\"token punctuation\">]</span> sth</code></pre>\n      </div>\n<p>其中<code class=\"language-text\">sth</code>可以是目录或文件的相对路径也可以是绝对路径。</p>\n<ul>\n<li>当<code class=\"language-text\">sth</code>为单个文件时，直接<code class=\"language-text\">svn revert sth</code>就行了；</li>\n<li>当<code class=\"language-text\">sth</code>为目录时，需要加上参数<code class=\"language-text\">-R</code>(Recursive,递归)，否则只会将<code class=\"language-text\">sth</code>这个目录的改动。</li>\n</ul>\n<p>也可以使用<code class=\"language-text\">svn update</code>命令来取消对之前的修改，但不建议使用。因为<code class=\"language-text\">svn update</code>会去连接仓库服务器，比较耗时。<br>\n<strong>注意：<code class=\"language-text\">svn revert</code>有风险，因为它的目的是放弃未提交的修改。一旦你选择了恢复，Subversion没有方法找回未提交的修改。</strong></p>\n<h1 id=\"改动已经被提交（commit）改动已经被提交（commit）\"><a href=\"#%E6%94%B9%E5%8A%A8%E5%B7%B2%E7%BB%8F%E8%A2%AB%E6%8F%90%E4%BA%A4%EF%BC%88commit%EF%BC%89%E6%94%B9%E5%8A%A8%E5%B7%B2%E7%BB%8F%E8%A2%AB%E6%8F%90%E4%BA%A4%EF%BC%88commit%EF%BC%89\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"#%E6%94%B9%E5%8A%A8%E5%B7%B2%E7%BB%8F%E8%A2%AB%E6%8F%90%E4%BA%A4%EF%BC%88commit%EF%BC%89\" title=\"改动已经被提交（commit）\"></a>改动已经被提交（commit）</h1>\n<p>这种情况下，用<code class=\"language-text\">svn merge</code>命令来进行回滚。回滚的操作过程如下：</p>\n<ol>\n<li>保证拿到的是最新代码：<code class=\"language-text\">svn update</code>。假设最新版本号是28。</li>\n<li>然后找出要回滚的确切版本号：<code class=\"language-text\">svn log [sth]</code>。假设根据<code class=\"language-text\">svn log</code>日志查出要回滚的版本号是25，如果想要更详细的了解情况，可以使用<code class=\"language-text\">svn diff -r 28:25 [sth]</code></li>\n<li>回滚到版本号25：<code class=\"language-text\">svn merge -r 28:25 sth</code>。为了保险起见，再次确认回滚的结果：<code class=\"language-text\">svn diff [sth]</code>。正确无误的话，提交。</li>\n<li>提交回滚：<code class=\"language-text\">svn commit -m &quot;revert revision from r28 to r25,because of ...&quot;</code>提交后版本变成了29。</li>\n</ol>\n<p>以上操作总结下：</p>\n<ol>\n<li><code class=\"language-text\">svn update</code>，<code class=\"language-text\">svn log</code>，找到最新版本</li>\n<li>找到自己想要回滚的版本号</li>\n<li>用<code class=\"language-text\">svn merge</code>来回滚：<code class=\"language-text\">svn merge -r latest:older sth</code></li>\n</ol>\n<h1 id=\"温馨提示温馨提示\"><a href=\"#%E6%B8%A9%E9%A6%A8%E6%8F%90%E7%A4%BA%E6%B8%A9%E9%A6%A8%E6%8F%90%E7%A4%BA\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"#%E6%B8%A9%E9%A6%A8%E6%8F%90%E7%A4%BA\" title=\"温馨提示\"></a>温馨提示</h1>\n<p>回滚虽好，可不要贪多哦~~~^_^</p>","frontmatter":{"title":"SVN回滚操作","date":"2014-08-01T09:31:37.000Z","category":"技术","tags":["svn","备忘"],"cover":null},"tableOfContents":"<ul>\n<li><a href=\"/posts/svn-rollback/#%E6%94%B9%E5%8A%A8%E6%B2%A1%E6%9C%89%E8%A2%AB%E6%8F%90%E4%BA%A4%EF%BC%88commit%EF%BC%89%E6%94%B9%E5%8A%A8%E6%B2%A1%E6%9C%89%E8%A2%AB%E6%8F%90%E4%BA%A4%EF%BC%88commit%EF%BC%89\">改动没有被提交（commit）改动没有被提交（commit）</a></li>\n<li><a href=\"/posts/svn-rollback/#%E6%94%B9%E5%8A%A8%E5%B7%B2%E7%BB%8F%E8%A2%AB%E6%8F%90%E4%BA%A4%EF%BC%88commit%EF%BC%89%E6%94%B9%E5%8A%A8%E5%B7%B2%E7%BB%8F%E8%A2%AB%E6%8F%90%E4%BA%A4%EF%BC%88commit%EF%BC%89\">改动已经被提交（commit）改动已经被提交（commit）</a></li>\n<li><a href=\"/posts/svn-rollback/#%E6%B8%A9%E9%A6%A8%E6%8F%90%E7%A4%BA%E6%B8%A9%E9%A6%A8%E6%8F%90%E7%A4%BA\">温馨提示温馨提示</a></li>\n</ul>","excerpt":"SVN回滚，即取消对代码的修改，分为两种情况： 改动没有被提交（commit） 这种情况下， 就能取消之前的修改。 用法如下：   其中 可以是目录或文件的相对路径也可以是绝对路径。 当 为单个文件时，直接 就行了； 当 为目录时，需要加上参数 (Recursive…"}}],"pathPrefix":"tags/svn","first":true,"last":true,"index":1,"pageCount":1,"additionalContext":{"total":2,"tag":"svn"}}}